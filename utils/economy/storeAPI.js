function b(s,e){let i=a();return(b=function(e,r){e-=459;let t=i[e];void 0===b.rROVKs&&(b.xtorCM=function(s){let i="",t="";for(let e=0,r,t,a=0;t=s.charAt(a++);~t&&(r=e%4?64*r+t:t,e++%4)&&(i+=String.fromCharCode(255&r>>(-2*e&6))))t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(t);for(let e=0,r=i.length;e<r;e++)t+="%"+("00"+i.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(t)},s=arguments,b.rROVKs=!0);var e=e+i[0],a=s[e];return a?t=a:(t=b.xtorCM(t),s[e]=t),t})(s,e)}let t=b;function a(){let e=["igz1BMrZ","DgL0Bgu","CM9Szq","yxKP","DgGGD2L0","yxrH","y29UzMLN","Bgv2zwW","sxrLBsbU","zMLUze9U","B3j5","CMvHzhKG","DxjZ","vgL0Bgu","iIb1BMXV","Bwf4ugvY","z3vPBgrZ","l1n0B3jL","uhDWD3O","Cgv0CW","BgvUz3rO","y3j5ChrV","BgfUzW","C3rVy2S","B25MAwD1","ugv0swq","vxnLCIbU","u2HVDYbV","AwnPzw50","zxHWB3j0","CMvTB3zL","tw9UzxK","C3rPz2uG","DgL0BgvZ","tMDhvwG","yM9VC3rL","y291BNre","CMfUDgvK","zMv0y2G","ndiZmZeWs3fPDMTb","vw5RBM93","CgXPzxi","ChjLC3rP","q2HHCM0","yw5PB24G","DwX5igXL","z2vUzgfY","Ew91CIbL","yw50ihjV","B2n1BwvU","AxrLBurH","odi0mdu2tMz6D3LI","idi0igHV","AxrLBuLK","yxnZAxzL","CMvXDwLY","mcuGzM9Y","AxrLBq","y2f0zwDV","CMfUzg9T","tw9UzxKG","BMTMDvm","ndKWnZm1m1rrqKPItG","C3rVCMvF","Cgv0swq","l1vZzxje","CMf0Aw9U","AxrSzq","ChrPB24","BM93","C2f2zq","DgvK","C2vZihLV","n1z6Bg1Swa","uhvYy2HH","sLHtsw0","C3vJy2vZ","CMv3yxjK","C2vLzerL","tun0shO","mJK1vevpCw1P","DxnLCKLK","rg9N","ou10qNPdAW","vxnLCG","zxDHCMq","CeXiB3a","CLr5Cgu","ywrK","qsbTExn0","mJDks2vtrgi","rhjHz29U","ugHVzw5P","Bw9KzwXZ","CIaOmsbe","sxrLBq","ywn0AxzL","yMvHC3qG","BIbYzxDH","igzYAwvU","yuHXqwW","nJm4ndz2z0HVBxa","C2vZ","8j+sScbsAwnO","B3qGzM91","mty0mtiYzgntqLPp","D2L0AcbT","AxmGCgv0","yw1LCYbZ","AwnHBcbI","t25L","thvJA3KG","igzPCMuG","rMfPBgvK","uMvXDwLY","y3vZDg9T","zwWG","ihrVigDY","zw1LBNrZ","C3rLCIaO","sw5JCMvH","yMfSyw5J","mtaYmZz1CMn5tNG","zxjPB3vZ","lI4VlI4V","Cgv0","zcbHChbS","CeXou2m","C2L2zsb0","yxjUAw5N","nZKZntKYthLuCNvX","BM1vq0u","uMLJAcbu","ChjPy2u","BwHbsNe","CM9Szxm","idCGzgf5","DxiGBhvJ","zxmGBgv2","CYbIEsa1","z2v0rMvH","C3rVCMu","igv4y2X1","DgvTCW","Aw9U","ChvYy2HH","CK11BhrP","BcbJB21W","rgf0yq","Aw52zw50","igHPz2HL","Cgv0vhLW","z2v0sxrL","r2nyyw0","C29YDa","ChvZAa","yxbWBhLs","yMLYDgG","zerUvui","DxbKyxrL","q3vZDg9T","tKDMtvm","y2XPzw50","DhjHBNnH","CM9SzuLK","C2v0q29U","B3DUihrO","uw9vC0C","vhLWzq","qsbSzwDL","AxrLBxm","CM9Szur1","z1bit24","zxiGywn0","uM9SzsbN","AxqGCMvH","zMLUza","BMfTzq","zMvHDhvY","qM9VC3qG","zgf0zq","y29TCgXL"];return(a=function(){return e})()}(()=>{for(var e=b,r=a();;)try{if(117180==-parseInt(e(509))+-parseInt(e(505))/2*(parseInt(e(487))/3)+-parseInt(e(534))/4+parseInt(e(484))/5*(-parseInt(e(526))/6)+parseInt(e(477))/7*(parseInt(e(637))/8)+-parseInt(e(494))/9*(-parseInt(e(625))/10)+parseInt(e(466))/11)break;r.push(r.shift())}catch(e){r.push(r.shift())}})();let StoreItem=require("../../"+t(497)+t(603)+"Item"),StorePurchase=require(t(528)+t(497)+t(603)+t(478)+"se"),User=require("../../models"+t(469)+t(591)),crypto=require(t(607)),generateId=()=>crypto[t(463)+"UUID"]();class StoreAPI{constructor(){var e=t;this[e(566)]=null,this[e(592)]=null,this[e(608)]=null}[t(569)+"text"](e,r,a){var s=t;this[s(566)]=e,this[s(592)]=r,this[s(608)]=a}async["addItem"](e,r){var a=t,s=r.itemId||generateId(),s=new StoreItem({itemId:s,guildId:e,name:r.name,description:r["descri"+a(472)]||"",category:r.category,price:r[a(537)],stock:r[a(609)]??-1,maxPerUser:r.maxPerUser??-1,enabled:r.enabled??!0,rewardType:r[a(481)+a(572)],rewardData:r[a(481)+a(552)]||{},requirements:r[a(459)+"ements"]||{},metadata:{emoji:r.emoji||"üõí",color:r.color||"#5865F2",image:r.image,featured:r[a(582)+"ed"]||!1,sortOrder:r.sortOrder||0}});return await s.save(),s}async[t(616)+t(499)](e,r){return 0<(await StoreItem.deleteOne({guildId:e,itemId:r})).deletedCount}async[t(563)+"Item"](e,r,a){var s=t,s=(a[s(563)+"dAt"]=new Date,await StoreItem[s(595)+"eAndUp"+s(584)]({guildId:e,itemId:r},{$set:a},{new:!0}));return s}async[t(556)+"m"](e,r){return StoreItem.findOne({guildId:e,itemId:r,enabled:!0})}async["getItems"](e,r=null){var a=t,e={guildId:e,enabled:!0};return r&&(e[a(462)+"ry"]=r),StoreItem[a(580)](e).sort({"metadata.sortOrder":1,createdAt:-1})}async["getCategories"](e){var r=t,r=await StoreItem[r(580)]({guildId:e,enabled:!0});return[...new Set(r.map(e=>e.category))]}async[t(544)+"turedI"+t(547)](e){var r=t;return StoreItem[r(580)]({guildId:e,enabled:!0,"metadata.featured":!0}).sort({"metadata.sortOrder":1})}async[t(549)+"seItem"](e,r,a,s=null){var i=t,n={BtxEC:function(e,r){return e===r},JXSIm:i(620),EEWEm:"Item out of "+i(609),EgkSI:function(e,r){return e<r},Pnjst:function(e,r){return e===r},aHqAl:i(562),jBYcA:function(e,r){return r<e},pLNSc:i(585)+i(475),nkfuS:i(467)+i(549)+"se"},s=s||this[i(566)],o=await this[i(556)+"m"](e,a);if(!o)return{success:!1,error:"Item n"+i(508)+"nd"};if(n.BtxEC(o[i(609)],0))return"YNYIa"!==n[i(479)]?{success:!1,error:n.EEWEm}:{success:!1,error:"You al"+i(597)+"own th"+i(511)+"!"};var d=await User[i(595)+"e"]({guildId:e,userId:r});if(!d)return{success:!1,error:i(612)+i(508)+"nd"};if(d.balance<o.price)return{success:!1,error:"Insufficient"+i(586)};if(o[i(459)+i(522)][i(593)]&&n.EgkSI(d.level||0,o[i(459)+"ements"].level))return n.Pnjst(i(562),n[i(504)])?{success:!1,error:i(518)+i(542)+i(520)+o["requir"+i(522)][i(593)]}:r;if(o.requirements[i(628)+"ge"]&&(d.prestigeLevel||0)<o.requirements.prestige)return{success:!1,error:i(518)+"es pre"+i(618)+o["requir"+i(522)].prestige};if(n.jBYcA(o[i(601)+i(488)],0)&&await StorePurchase[i(622)+"ocuments"]({guildId:e,userId:r,itemId:a,status:n[i(531)]})>=o[i(601)+"User"])return i(490)===i(565)?{success:!1,error:i(594)+"ot found"}:{success:!1,error:"Purchase lim"+i(579)+"ched"};d[i(525)+"e"]-=o.price;a=await this[i(560)+"eward"](d,o,s,e);if(!a[i(480)+"s"])return a;0<o.stock&&await StoreItem["update"+i(514)]({_id:o._id},{$inc:{stock:-1}});s=new StorePurchase({oderId:generateId(),guildId:e,userId:r,itemId:o.itemId,itemName:o.name,category:o[i(462)+"ry"],price:o.price,rewardType:o["reward"+i(572)],rewardData:o.rewardData,status:"comple"+i(475)});return d[i(567)+"ctionLogs"].push({type:n[i(465)],amount:-o.price,timestamp:new Date,details:{itemId:o.itemId,itemName:o[i(581)]}}),await Promise.all([d[i(474)](),s[i(474)]()]),{success:!0,item:o,purchase:s,reward:a[i(481)]}}async["applyR"+t(489)](a,r,e,s){let i=t,n={Pwpwz:function(e,r,t){return e(r,t)},nbxjO:function(e,r){return e===r},wFmYi:"lMXsf",vNoSV:"Role c"+i(610)+i(470)+" error",PROVb:i(621)+"r",CIhMG:i(545),GcXam:i(587)},o=r[i(481)+"Data"],d=e||this[i(566)];switch(r[i(481)+"Type"]){case i(529):var u;return a[i(605)]||(a.pets=[]),a[i(605)][i(580)](e=>e[i(468)]===r.itemId)?{success:!1,error:"You al"+i(597)+i(570)+i(511)+"!"}:(c=0===a[i(605)][i(606)],u={petId:r[i(639)],name:o.petName||o[i(555)+"e"]||r.name,level:1,xp:0,happiness:100,hunger:100,lastFed:new Date,lastCollect:null,totalEarnings:0,timesFed:0,isActive:c,acquiredAt:new Date},a[i(605)][i(559)](u),c&&(a[i(500)+i(611)]=r[i(639)]),{success:!0,reward:"You adopted "+u.name+"!"});case i(588):if(d&&o.roleId)try{let r=await d[i(602)].fetch(s),e=await r.members.fetch(a.userId);return await e.roles[i(492)](o[i(568)]),o[i(575)+i(470)]&&0<o.roleDuration&&n[i(604)](setTimeout,async()=>{var e=i;try{await(await r.members[e(624)](a[e(485)]))[e(539)][e(616)](o.roleId)}catch(e){}},o[i(575)+"ration"]),{success:!0,reward:i(578)+i(623)+"!"}}catch(e){return n.nbxjO(n.wFmYi,n.wFmYi)?{success:!1,error:i(517)+i(521)+i(634)+"le"}:{success:!1,error:"Insuff"+i(614)+i(586)}}return{success:!1,error:n.vNoSV};case n.PROVb:var c={type:o[i(621)+i(491)]||i(617),multiplier:o["booste"+i(550)+i(627)]||1.5,expiresAt:new Date(Date[i(473)]()+(o["boosterDurat"+i(548)]||864e5)),source:n.CIhMG};return a[i(621)+"rs"]||(a[i(621)+"rs"]=[]),a[i(621)+"rs"][i(559)](c),{success:!0,reward:c.type+(" boost"+i(577))+"ivated!"};case n[i(557)]:return a.titles||(a.titles=[]),a[i(619)].includes(o[i(587)])||a.titles.push(o.title),a["active"+i(599)]=o[i(587)],{success:!0,reward:'Title "'+o[i(587)]+i(600)+"cked!"};case i(461):return a[i(553)+"ory"]||(a["invent"+i(596)]=[]),a.inventory[i(559)]({itemId:r.itemId,name:r.name,type:o.itemType,data:o[i(636)+"ta"],acquiredAt:new Date}),{success:!0,reward:r[i(581)]+" added to inventory!"};case i(519):return{success:!0,reward:i(564)+" rewar"+i(530)+"ied!"};default:return{success:!1,error:i(626)+i(502)+"rd type"}}}async["getUserPurchases"](e,r){var a=t;return StorePurchase.find({guildId:e,userId:r})[a(558)]({purchasedAt:-1})}async[t(482)+"faultI"+t(547)](e){var r,a=t,s={JODOB:"Cat",mhAJq:a(605),NNlfr:a(529),gPHOn:a(464)+"Booste"+a(498)+a(589),nmUCE:"Boost your e"+a(533)+a(543)+"0% for"+a(540)+"s",MCtHz:"boosters",mAltc:a(621)+"r",ThQJw:"Boost your XP gains by 5"+a(460)+a(638)+"urs",XTELv:a(619),jRlkA:"üè∑Ô∏è",DDGDA:"Legend Title",QoUsG:a(587)},i=await StoreItem[a(622)+a(635)+"ts"]({guildId:e});if(!(0<i))for(r of[{name:a(486),description:"A loya"+a(551)+a(630)+"that boosts "+a(633)+a(533)+"s",category:a(605),price:5e3,rewardType:a(529),rewardData:{petType:"Dog",petMultiplier:1.05,petPassiveIncome:20},metadata:{emoji:"üê∂",sortOrder:1}},{name:"Cat",description:a(493)+a(527)+a(503)+"d with"+a(554)+"r bonu"+a(506),category:a(605),price:7500,rewardType:a(529),rewardData:{petType:s.JODOB,petMultiplier:1.07,petPassiveIncome:25},metadata:{emoji:"üê±",sortOrder:2}},{name:a(495),description:a(573)+"ndary "+a(501)+a(510)+a(640)+" bonuses",category:s.mhAJq,price:5e4,rewardType:a(529),rewardData:{petType:a(495),petMultiplier:1.15,petPassiveIncome:100},metadata:{emoji:"üêâ",sortOrder:3,featured:!0}},{name:"Phoenix",description:"A myth"+a(513)+"ird of"+a(516)+"and re"+a(561),category:s[a(538)],price:75e3,rewardType:s.NNlfr,rewardData:{petType:a(496)+"x",petMultiplier:1.2,petPassiveIncome:150},metadata:{emoji:"üî•",sortOrder:4,featured:!0}},{name:s[a(576)],description:a(583)+"your earnings by 50% for 24 ho"+a(598),category:"boosters",price:15e3,rewardType:a(621)+"r",rewardData:{boosterType:a(617),boosterMultiplier:1.5,boosterDuration:864e5},metadata:{emoji:"üí∞",sortOrder:1}},{name:"Money Booster (7 Days)",description:s[a(535)],category:s[a(483)],price:75e3,rewardType:s.mAltc,rewardData:{boosterType:a(617),boosterMultiplier:1.5,boosterDuration:6048e5},metadata:{emoji:"üíé",sortOrder:2,featured:!0}},{name:"XP Boo"+a(523)+"1 Day)",description:s.ThQJw,category:a(621)+"rs",price:1e4,rewardType:s.mAltc,rewardData:{boosterType:"XP",boosterMultiplier:1.5,boosterDuration:864e5},metadata:{emoji:"‚≠ê",sortOrder:3}},{name:a(536)+a(471),description:a(613)+"ff your weal"+a(590)+"h this"+a(546)+a(532)+a(471),category:s.XTELv,price:1e5,maxPerUser:1,rewardType:"title",rewardData:{title:a(507)},metadata:{emoji:s.jRlkA,sortOrder:1}},{name:s.DDGDA,description:"A title for the tr"+a(631)+a(632)+"y",category:"titles",price:5e5,maxPerUser:1,rewardType:s[a(571)],rewardData:{title:"üåü Legend"},metadata:{emoji:"üëë",sortOrder:2,featured:!0}},{name:a(515)+a(629),description:a(524)+a(476)+a(541)+"k in g"+a(512)+"lightly",category:a(574),price:2500,rewardType:"item",rewardData:{itemType:"charm",itemData:{luckBonus:.05}},metadata:{emoji:"üçÄ",sortOrder:1}}])await this.addItem(e,r)}}module[t(615)+"s"]=StoreAPI;