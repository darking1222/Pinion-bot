let P=b,fs=((()=>{for(var e=b,t=a();;)try{if(575095==+parseInt(e(393))*(parseInt(e(408))/2)+parseInt(e(598))/3*(parseInt(e(671))/4)+-parseInt(e(397))/5*(-parseInt(e(483))/6)+-parseInt(e(448))/7*(parseInt(e(609))/8)+parseInt(e(654))/9*(-parseInt(e(688))/10)+parseInt(e(701))/11+parseInt(e(401))/12*(parseInt(e(465))/13))break;t.push(t.shift())}catch(e){t.push(t.shift())}})(),require("fs")),path=require(P(563)),https=require("https"),http=require(P(719)),{execSync,spawn}=require(P(441)+"process"),colors=require(P(539)+"olors"),crypto=require("crypto");function a(){let e=["BgvtEw5J","vuvlA3e","B25Z","EgTpChG","Bg9JyxrP","y2T1CcaT","y3LHBG","AYb0Aw1L","zuTLEq","ywrTlxPP","iezHAwXL","ChjVDg9J","y3rVCNK","yxnLigvU","Ew5J","CMvXDwvZ","vxjS","DgvZDa","BwfRzvjL","rLjhsLC","zvzLCNnP","EMLW","CxvLC3q","mZKZmtHmDMzuwxO","yM90ugf0","tuDwvui","sgfZAa","zvbHDgG","Aw9UigzH","zgf0zuzP","Bg9N","q2HLy2TZ","zs5QC29U","y2XLyw5p","mZq0mfnVA0rjza","v3jPDgvt","y2HxAKu","mNWXma","y29WEvvW","ig9UifDP","Dg9tDhjP","CgvYzM9Y","igTLEsbM","BNrPy2f0","qwvZEhG","lY91CgrH","BIbJAgvJ","Cg9YDgvK","igf1DgHL","Aw5NigjH","zw5K","l2fWAs91","Dw0GDMvY","AM9PBG","Ag9ZDg5H","ywrgCM9T","tenQrNa","DgvtAwDU","lI4U","tM50u1m","Cgf0Ag5H","C3rHDfn5","BxrPBwu","wvnjr3u","igf1Dg8T","ywXSzwqU","Aw5JBhvK","yMXLzcbI","t0Dys2y","zMv0y2Hw","CgrHDgu6","Ahr0Chm6","iejHy2T1","C3rHCNqG","zxHLy1bH","ihWGugXL","uezqCM8","iezVCMnP","uLb3zMe","ndu0nti3qKfQzNf0","AwLZBgm","rvr2A3O","ihWGq2HH","FdeYFdb8","q29Kzq","BwfW","DgvTCa","ywqGzMfP","BNnLigTL","zwq6ia","igrLCgvU","zhzfqKO","zxH0CMfJ","vNDWq2K","lMDPDa","lNPPCa","mtKYBfjNqLPt","BgrcywnR","yxPKEgy","zMLSDgvY","BgLJzw5Z","zwnRlI4U","ifvWzgf0","A0Drzxq","iefSCMvH","yxr1CMu","BgvUz3rO","B21WBgv0","zgvZDhjV","DgLTzw91","y2XSseS","BgLKigXP","Bu1WC0m","mJaWy3Lhrxfi","y2HLy2Tj","ywDLig5V","A0rkzKW","z3jLzw4","l2nOzwnR","Es4GugXL","se5krLm","sw52ywXP","AgvHzgvY","BM90ignV","Dg9ju09t","DxbKyxrL","nZi1otq3mMvls0jmza","y2HLy2TZ","zsbMywLS","uMfUuKu","BM9Kzv9T","yxnLihjL","B1vWzgf0","rgLY","r0vu","z2v0","BwTKAxjt","v2L0Aa","z3vPBgrj","r3jNCvq","Dw5SAw5R","CcbMywLS","CgXmAgy","t0nfwMC","Ahr0Ca","C2XPy2u","yxv0B1jL","mtu5ndm4B2jvCxnl","zLz0CeG","zgLNzxn0","r0rgBK0","mtqWotKZmg5LD296Eq","iokAOcbqBgu","v01vrvC","CgfJA2fN","mti2mZGYofnZBg5bvW","ifnRAxbW","zw5KC1DP","DhjLyw0","zMLUAxnO","z1LNBNm","zMLSzq","mtbUEvvds1G","CgrHDgu","DcbTyw51","yxrLCZOG","zg93BMXV","yMLlCMC","AwnLBNnL","AKjQDui","zsbRzxKG","BMvKia","qM90rMLS","CgXHDgzV","zgf0zq","AxnwywXP","Cg9YDa","CLn5BMm","z2v0vgLT","zsbLBNrL","z2vUzxjH","CgLWzq","zgLYBMfT","y2XPzw50","zhKGB24G","zcbSAwnL","ywXjza","vfjRD3u","DvLXyu8","sg1HyW","z3jHEq","rg93BMXV","CMvHzgrP","y2HLy2Tg","AxneAxjL","y2HPBgrF","BMrVD3mU","veDKr2W","B3iGDxbK","igjHy2T1","DgHLigjV","iokAOcbfBMe","mtq0nJjUDw5RsNO","BMzV","nxW2FdeX","CK9hruG","weHXtgW","lMnHy2HL","DMLAufa","CMvK","zxHWB3j0","y2XVC2u","BNrLCNzH","AwXLza","qxHbzNm","ifjLBw92","DcbPCYbU","CMvHzezP","zMv0y2Hv","mtnxwwrfEfC","DgLTzq","BwvZC2fN","Aw50zxj2","q2Xkt20","DhjPBMC","DgvYigeG","u3LUyW","zcb0BYbH","qxv0B1vW","zxjYB3i","lM5WBq","CMvZDgfY","zeXPy2vU","DfzLCNnP","DgvKoIa","y1fwAMG","zwqGDg8G","nKzXz3rHBa","BMfTzq","AgvJAYbM","C2vlzxK","B2fK","C3rHBgWG","sMz0Cxa","tvb6su0","CgrHDgvD","wKnqD2S","Dxvgve8","vxLHCNa","DcbPBNn0","zw1Iywm","l3zLCNnP","u2vJCMv0","CKXKtLC","vMvYC2LV","DgLUzW","C2HVDwXK","Ewflq0K","yMfJA3vW","ChbSEsb1","zcbVDxq","lMvUDG","DunSAha","zgf0zxm","CgrHDgvd","yxjJAgL2","BgvKoIbi","ywTJBgq","yxj0ig1H","C3rHCNrZ","qMfJA3vW","q0zpruG","ywrvCgrH","AxnvCgrH","DhjPBq","BMzPz3vY","CNnPB24","r25cz3u","C3rHDhvZ","z2v0q3vY","C2HHmJu2","zxr6t28","BNvHBgX5","zcbIB3qG","vfrqia","BM93","CM1tEw5J","zxHPC3rZ","y3jLyxrL","CM9VDerP","zw5HyMXL","y3vYDxi","DMvqyxrO","yw5ZAs1J","y3vYCMvU","zMLSzxmU","ifbSzwfZ","CgfYC2u","BNnLig9Y","zgf0yq","Dg8GDxnL","B3jvCgrH","BvvWzgf0","uuXOtwu","CgrHDgvj","y29UzMLN","BNbTigLU","DxqGBM8G","CdOG","uhjLC2vY","C2vHCMnO","EgfJCwq","Agv4","ChjPBNrv","rMT5r3G","zcb0BYbJ","zcb0BYbP","Cgf0Aa","zwqGB2XK","zvLgCwW","ywXSEs4","EwvSBg93","y29TBwfU","C3rHCNq","DMfSAwqG","w0f1Dg9v","DgvZ","C3rVCa","ywXSzwq"];return(a=function(){return e})()}let AdmZip;try{AdmZip=require(P(584)+"p")}catch{AdmZip=null}let archiver;try{archiver=require(P(511)+"er")}catch{archiver=null}function b(n,e){let i=a();return(b=function(e,t){e-=393;let r=i[e];void 0===b.OddgeL&&(b.cqwWfM=function(n){let i="",r="";for(let e=0,t,r,s=0;r=n.charAt(s++);~r&&(t=e%4?64*t+r:r,e++%4)&&(i+=String.fromCharCode(255&t>>(-2*e&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(let e=0,t=i.length;e<t;e++)r+="%"+("00"+i.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(r)},n=arguments,b.OddgeL=!0);var e=e+i[0],s=n[e];return s?r=s:(r=b.cqwWfM(r),n[e]=r),r})(n,e)}class AutoUpdater{constructor(e){var t=P,r={viZPP:t(450)+"|3|7|4"+t(658)+"1|14|9|13|8|"+t(612),NntSS:t(568)+"ds",uKPJM:"dashboard",VCvmI:"utils",MCnZq:t(453),ETvkz:t(705)+"odules",KyLLu:"index.js",AxAfs:"package-lock.json",oYgxa:function(e,t){return e===t},WgWnb:t(507),dvEBJ:t(669),plLhf:"addons"},s=r[t(454)].split("|");let n=0;for(;;){switch(s[n++]){case"0":this[t(540)+t(479)+"on"]=this[t(525)+"rentVersion"]();continue;case"1":this[t(519)+"ting"]=!1;continue;case"2":this[t(599)+"hs"]=[r[t(634)],r.uKPJM,"events","models",r.VCvmI,t(476),r.MCnZq,r[t(656)],r.KyLLu,r[t(460)],"packag"+t(607),"utils.js"];continue;case"3":this[t(675)+t(583)]=e?.["Licens"+t(583)]||"";continue;case"4":this.rootDir=path[t(628)](__dirname,"..","..");continue;case"5":this[t(536)+"d"]=r.oYgxa(e?.[t(474)+t(420)],!0);continue;case"6":this[t(689)+t(458)+"l"]=36e5;continue;case"7":this.guildId="";continue;case"8":this.preservePaths=[t(551),r.WgWnb,r[t(666)],t(661),r[t(717)]];continue;case"9":this[t(429)+t(498)]=null;continue;case"10":this[t(504)+t(708)]=path.join(this[t(535)+"r"],t(504)+"s");continue;case"11":this[t(700)+"Server"]="https:"+t(620)+"ter.drako.gg";continue;case"12":this["packag"+t(602)]=path.join(this.rootDir,t(400)+"e.json");continue;case"13":this[t(721)+"start"]=!0;continue;case"14":this.intervalId=null;continue}break}}["getCurrentVe"+P(522)](){var e=P;try{return JSON[e(543)](fs.readFileSync(this["packag"+e(602)],"utf8")).version}catch(e){return"0.0.0"}}["compareVersions"](e,t){var r=P,s=e.split(".")[r(660)](Number),n=t.split(".").map(Number);for(let e=0;e<Math.max(s.length,n[r(681)]);e++){var i=s[e]||0,o=n[e]||0;if(o<i)return 1;if(i<o)return-1}return 0}["generateSignature"](e){var t,r=P;return this["client"+r(498)]?(t=this["licens"+r(583)]+":"+e+":"+this.guildId,crypto["create"+r(435)]("sha256",this.clientSecret).update(t)[r(395)]("hex")):(t=this[r(675)+r(583)]+":"+e+":"+this.guildId,crypto[r(534)+"Hmac"](r(526),this[r(675)+"eKey"])[r(700)](t).digest(r(558)))}[P(593)+"quest"](r,h={}){let f={chWjE:function(e,t){return e===t},fWKfm:function(e,t){return e!==t},PFPro:"end",VwpCi:function(e,t){return e+t}};return new Promise((i,o)=>{let e=b,a=new URL(r),t="https:"===a[e(586)+"ol"]?https:http,c=Date.now()[e(615)+"ng"](),u={hostname:a.hostname,port:a[e(422)]||(a.protocol===e(646)?443:80),path:f[e(668)](a[e(635)+"me"],a[e(556)]),method:h.method||e(709),headers:{"User-Agent":"DrakoBot-AutoUpdater","X-License-Key":this["licens"+e(583)],"X-Guild-ID":this.guildId,"X-Timestamp":c,"X-Signature":this[e(426)+e(632)+e(680)](c),"X-Current-Version":this[e(540)+e(479)+"on"],...h.headers}},l=t.request(u,t=>{let r=e,s={oMdmw:"Version chec"+r(582)+r(506)};if(f[r(611)](t[r(524)+r(659)],301)||302===t.statusCode){if(!f.fWKfm(r(704),"RanRE"))return void this[r(593)+"quest"](t.headers[r(579)+"on"],h).then(i).catch(o);c.close(),u[r(533)+"Sync"](l)&&t[r(715)+r(472)](s),n(p)}let n="";t.on("data",e=>n+=e),t.on(f[r(651)],()=>{var e=r;"WMUEW"!==e(399)?(i[e(683)+"y"](),o(new a(s.oMdmw))):i({statusCode:t["status"+e(659)],data:n,headers:t[e(697)+"s"]})})});l.on(e(475),o),l.end()})}async[P(644)+"ersion"](){let s={Bruqz:function(e,t){return e===t}};return new Promise((n,i)=>{let o=b,a={JrODl:function(e,t){return e===t}},e=new URL(this.updateServer+(o(626)+"pdates"+o(497))+"on"),t="https:"===e[o(586)+"ol"]?https:http,r=t[o(710)]({hostname:e[o(629)+"me"],port:e[o(422)]||(s.Bruqz(e.protocol,"https:")?443:80),path:e.pathname,timeout:5e3},t=>{let r=o,s="";t.on(r(545),e=>s+=e),t.on(r(625),()=>{var e=r;a.JrODl(t["status"+e(659)],200)?n(s[e(520)]()):i(new Error("Versio"+e(621)+"k failed: "+t[e(524)+e(659)]))})});r.on("error",i),r.on(o(684)+"t",()=>{var e=o;r[e(683)+"y"](),i(new Error(e(500)+e(621)+e(582)+e(506)))})})}async[P(464)+"pdateInfo"](){var e=P,t={biKrg:function(e,t){return e===t},DThzC:"Access denied"};if(!this[e(675)+"eKey"])throw new Error("License key "+e(698)+e(521)+"ed");var r=this.updateServer+(e(626)+"pdates"+e(693)),r=await this[e(593)+"quest"](r);if(t[e(413)](r["status"+e(659)],401))throw new Error("Invalid lice"+e(544)+e(623)+e(618)+e(603)+e(459));if(403===r["status"+e(659)])throw s=JSON.parse(r[e(545)]),new Error(s[e(475)]||t.DThzC);if(200!==r["status"+e(659)])throw new Error("Server retur"+e(417)+r["status"+e(659)]);var s=JSON[e(543)](r[e(545)]);return s["client"+e(498)]&&(this[e(429)+"Secret"]=s.clientSecret),s}async["checkF"+P(547)+P(572)](){var r=P,s={XHqLl:function(e,t){return t<e},uClhp:function(e,t){return e!==t}};if(!this[r(536)+"d"]||this[r(519)+r(501)])return null;if(!this["isVali"+r(478)+r(486)](this[r(675)+r(583)]))throw new Error("Invalid license ke"+r(694)+"ase enter a valid "+r(675)+r(416)+"to use"+r(639)+r(700)+"s.");try{if(s[r(508)]("BBIqc","KEDKF")){var e=await this[r(644)+"ersion"]();if(e){var t=this["compar"+r(595)+r(577)](e,this[r(540)+r(479)+"on"]);if(s[r(452)](t,0)){if("qdoCj"===r(685))return f.error(g.yellow("[AutoU"+r(491)+" Backu"+r(716)+r(664)+h[r(467)+"e"])),null;{let e=await this["fetchU"+r(550)+r(449)]();return e}}}return null}{let e=g[h]||0,t=e[t]||0;return s[r(452)](e,t)?1:e<t?-1:void 0}}catch(e){return console.error(colors.yellow(r(571)+"pdate]"+r(585)+"d to c"+r(485)+r(444)+r(411)+e[r(467)+"e"])),null}}async["downlo"+P(518)+"te"](p){let d=P,v={RPwfa:function(e,t){return e(t)},OGXKf:d(526),VUhla:"update"+d(670),IouwX:function(e,t){return e===t},ReVBn:d(646),XBwOp:d(714)};if(!AdmZip){if("CXcfy"!==v.XBwOp)throw new Error(d(584)+"p pack"+d(690)+d(495)+d(640)+" Run: "+d(552)+d(488)+"adm-zip");e=f}return new Promise((n,i)=>{let o=d,a={embac:v[o(643)],pGWcu:function(e,t){return e!==t},azdxf:function(e,t){return e(t)}},c=this.updateServer+("/api/updates/downl"+o(487)),u=path.join(this.rootDir,o(661),v.VUhla),e=(fs[o(711)+o(589)](path[o(428)+"e"](u),{recursive:!0}),new URL(c)),t="https:"===e.protocol?https:http,r=Date.now()[o(615)+"ng"](),s={hostname:e.hostname,port:e.port||(v.IouwX(e.protocol,v.ReVBn)?443:80),path:e.pathname,method:o(709),headers:{"User-Agent":"DrakoBot-Aut"+o(707)+"er","X-License-Key":this.licenseKey,"X-Guild-ID":this[o(713)+"d"],"X-Timestamp":r,"X-Signature":this["generateSign"+o(680)](r),"X-Current-Version":this[o(540)+"tVersion"]}},l=fs["createWriteS"+o(404)](u),h=t.request(s,e=>{let r=o,s={rOGEH:a[r(496)]};301===e[r(524)+r(659)]||302===e.statusCode?(l[r(457)](),fs["exists"+r(472)](u)&&fs[r(715)+r(472)](u),this["downlo"+r(630)+r(591)](e.headers[r(579)+"on"],u,p).then(n).catch(i)):a.pGWcu(e[r(524)+r(659)],200)?(l.close(),fs[r(533)+r(472)](u)&&fs["unlink"+r(472)](u),a[r(673)](i,new Error("Downlo"+r(662)+"led: H"+r(530)+e.statusCode))):(e[r(427)](l),l.on(r(405),()=>{var e=r;if("mwTYp"===e(494))i.log(a[e(567)]("[AutoUpdate] ⚠ Ena"+e(642)+e(553)+"licens"+e(416)+"configured")),c[e(605)](u.yellow("[AutoU"+e(491)+e(398)+"ase enter a "+e(570)+e(675)+"e key to use"+e(639)+"updates"));else{if(l[e(457)](),p.checksum){var t=fs[e(463)+"leSync"](u);if(crypto[e(534)+e(601)](s[e(451)]).update(t).digest("hex")!==p.checksum)return fs[e(715)+e(472)](u),void i(new Error("Checks"+e(627)+"ificat"+e(603)+"iled - file may be corrupted"))}n(u)}}))});h.on("error",e=>{var t=o;l.close(),fs[t(533)+t(472)](u)&&fs[t(715)+t(472)](u),v[t(653)](i,e)}),h[o(625)]()})}async[P(412)+"adFromUrl"](u,l,h){let e=P,f={yaKCI:function(e,t){return e!==t},uYqaO:"NiRsc",tiQpY:function(e,t){return e(t)},NwMGs:"qnJOJ",RxQZH:"https:",BpHcj:function(e,t){return e===t},fJfMV:e(709)};return new Promise((i,o)=>{let a=e,c={bzTbK:a(558),OCEZg:function(e,t){return f.tiQpY(e,t)}};if(!f[a(503)](f.NwMGs,a(489)))return h[a(605)](f.yellow(a(571)+a(491)+a(402)+a(624)+"ckup - archiver not inst"+a(574))),null;{let e=new URL(u),t=e[a(586)+"ol"]===f.RxQZH?https:http,r=fs[a(534)+a(610)+a(404)](l),s=Date[a(531)]().toString(),n={hostname:e.hostname,port:e.port||(f.BpHcj(e.protocol,f.RxQZH)?443:80),path:e[a(635)+"me"]+e[a(556)],method:f.fJfMV,headers:{"X-License-Key":this.licenseKey,"X-Guild-ID":this.guildId,"X-Timestamp":s,"X-Signature":this[a(426)+a(632)+"ature"](s)}};t[a(590)+"t"](n,e=>{let t=a;f.yaKCI("rcspd",f[t(434)])?f.yaKCI(e[t(524)+t(659)],200)?(r.close(),fs["exists"+t(472)](l)&&fs["unlink"+t(472)](l),o(new Error(t(437)+t(662)+t(512)+t(530)+e["status"+t(659)]))):(e[t(427)](r),r.on(t(405),()=>{var e=t;if(r.close(),h?.checksum)if("jpnbU"!==e(513)){if(crypto["create"+e(601)]("sha256").update(fs["readFi"+e(575)](l)).digest(c.bzTbK)!==h[e(702)+"um"])return fs[e(715)+"Sync"](l),void o(new Error("Checks"+e(627)+"ification failed"))}else l(this[e(468)+"alId"]),this[e(468)+"alId"]=null;i(l)})):this[t(429)+"Secret"]=l[t(429)+t(498)]}).on(a(475),e=>{var t=a;r.close(),fs["exists"+t(472)](l)&&fs.unlinkSync(l),c[t(718)](o,e)})[a(625)]()}})}async["applyUpdate"](s){var n,i=P,o={curur:i(661),FkyGx:function(e,t){return e===t}},a=path.join(this.rootDir,o[i(537)],i(700)+"_extract");try{await this[i(534)+i(516)](),fs[i(533)+"Sync"](a)&&fs.rmSync(a,{recursive:!0,force:!0}),fs.mkdirSync(a,{recursive:!0});let e=new AdmZip(s),t=(e[i(667)+"tAllTo"](a,!0),fs["readdi"+i(423)](a)),r=a;return o[i(560)](t[i(681)],1)&&(n=path.join(a,t[0]),fs.statSync(n)[i(440)+i(587)]())&&(r=n),this.deleteBotFiles(),await this["copyUp"+i(604)+"les"](r,this[i(535)+"r"]),fs.rmSync(a,{recursive:!0,force:!0}),fs.unlinkSync(s),!0}catch(e){if(console.error(colors.red("[AutoU"+i(491)+i(585)+i(473)+i(505)+i(645)+" "+e.message)),fs[i(533)+i(472)](a)){if(i(655)!==i(655))return f.error(g[i(455)]("[AutoU"+i(491)+i(677)+i(703)+"ed: "+h.message)),this[i(519)+"ting"]=!1;fs[i(532)](a,{recursive:!0,force:!0})}return!1}}async["copyUpdateFiles"](e,r,s=""){const i=P,a={GDFnM:i(545),cQVjh:function(e,t){return e(t)},cZjnN:i(394)},c=fs[i(438)+"rSync"](e,{withFileTypes:!0});for(var l of c){var h=path.join(e,l[i(484)]),f=path[i(628)](r,l[i(484)]),p=s?path.join(s,l.name):l[i(484)];if(!this.shouldPreserve(p))if(l.isDirectory())if(i(619)===a.cZjnN){if(301===n.statusCode||302===o[i(524)+i(659)])return void this.makeRequest(y.headers.location,z).then(A).catch(B);let r="";t.on(a[i(396)],e=>r+=e),u.on(i(625),()=>{r({statusCode:D.statusCode,data:r,headers:E.headers})})}else fs[i(533)+"Sync"](f)||(i(527)!==i(469)?fs[i(711)+i(589)](f,{recursive:!0}):a[i(481)](s,a.trim())),await this[i(613)+i(604)+"les"](h,f,p);else"ytSzO"!==i(578)?fs["copyFi"+i(575)](h,f):a=new c(l)}}[P(502)+P(555)+"ve"](e){var t=P,e=e.split(path.sep)[0];return this["preser"+t(538)+"s"][t(641)+"es"](e)}async["createBackup"](){let c=P,u={kDJfL:function(e,t,r){return e(t,r)},YSIGu:c(596),FRGJW:"error",vAwqE:c(443)};if(!archiver)return console.log(colors[c(567)]("[AutoU"+c(491)+c(402)+c(624)+c(580)+" archiver no"+c(495)+c(574))),null;try{fs["exists"+c(472)](this.backupDir)||fs[c(711)+c(589)](this["backup"+c(708)],{recursive:!0});let e=(new Date)[c(699)+c(470)]().replace(/[:.]/g,"-").slice(0,19),t="backup-v"+this["curren"+c(479)+"on"]+"-"+e+c(670),a=path[c(628)](this[c(504)+c(708)],t);return console[c(605)](colors.cyan(c(571)+"pdate] Creat"+c(624)+"ckup: "+t)),await new Promise((e,t)=>{var r,s=c,n=fs[s(534)+s(610)+s(404)](a),i=u[s(691)](archiver,u[s(638)],{zlib:{level:1}});n.on(s(457),e),i.on(u[s(594)],t),i[s(427)](n);for(r of this[s(599)+"hs"]){if(s(576)===u.vAwqE)return a.error(e.yellow("[AutoU"+s(491)+s(585)+s(561)+"heck for updates: "+t.message)),null;var o=path[s(628)](this[s(535)+"r"],r);fs.existsSync(o)&&(fs[s(636)+"nc"](o)[s(440)+s(587)]()?i.directory(o,r):i[s(407)](o,{name:r}))}i.finalize()}),console.log(colors.green(c(571)+"pdate] Backup crea"+c(480)+a)),await this["cleanO"+c(672)+"ups"](),a}catch(e){return console.error(colors[c(567)](c(571)+c(491)+c(647)+"p fail"+c(664)+e.message)),null}}async[P(608)+P(672)+"ups"](e=1){const r=P,t={LCjFp:function(e,t){return t<e}};try{if(r(565)!==r(565))t=null;else if(fs.existsSync(this["backup"+r(708)])){var s,n=fs["readdi"+r(423)](this["backup"+r(708)]).filter(e=>e[r(515)+r(712)](r(504)+"-")&&e[r(403)+"th"](r(670)))[r(660)](e=>({name:e,path:path.join(this[r(504)+"Dir"],e),time:fs.statSync(path.join(this[r(504)+r(708)],e))[r(637)][r(424)+"e"]()})).sort((e,t)=>t.time-e[r(466)]);if(t[r(631)](n.length,e))for(s of n.slice(e))fs.unlinkSync(s.path),console.log(colors[r(436)]("[AutoUpdate]"+r(461)+r(564)+r(445)+r(554)+s[r(484)]))}}catch(e){}}["delete"+P(418)+"es"](){var s,i=P,o={TRkwu:function(e,t){return e===t}};console.log(colors[i(581)]("[AutoU"+i(491)+i(461)+"ing ol"+i(529)+i(541)+".."));for(s of this[i(599)+"hs"]){if(!o[i(433)]("fdTlF","fdTlF"))return e.error(f.red(i(571)+i(491)+i(585)+i(562)+"nstall dependencies")),!1;{let t=path[i(628)](this[i(535)+"r"],s);if(fs["exists"+i(472)](t))try{let e=fs.statSync(t);if(e["isDire"+i(587)]()){if(o.TRkwu(i(678),i(600)))return j.error(k.red("[AutoUpdate] Failed to apply u"+i(645)+" "+l[i(467)+"e"])),m[i(533)+"Sync"](n)&&q.rmSync(r,{recursive:!0,force:!0}),!1;fs[i(532)](t,{recursive:!0,force:!0})}else fs[i(715)+i(472)](t)}catch(e){console.error(colors.yellow("[AutoUpdate] Could not remove "+s+": "+e.message))}}}}async["installDependencies"](){var t,s=P,n={rLdNW:function(e,t,r){return e(t,r)},jBjuB:"nPwuh"};try{return n[s(499)](execSync,"npm install",{cwd:this.rootDir,stdio:"pipe",timeout:3e5}),!0}catch(e){if("nPwuh"===n[s(415)])return console[s(475)](colors.red(s(571)+s(491)+s(585)+"d to install"+s(665)+"dencies")),!1;for(t of h.slice(i))p["unlink"+s(472)](t[s(563)]),q.log(r.gray(s(571)+"pdate] Removed old backup: "+t[s(484)]))}}[P(559)+"pdateComplete"](e,t,r=!1){var s=P,t=t?s(657)+"ngelog: "+t:"",r=r?" | Restarting...":s(650)+s(706)+s(648)+s(446)+s(410)+s(566);console[s(605)](colors[s(692)]("[AutoU"+s(491)+s(677)+s(482)+"v"+e+t+r))}[P(477)+"t"](){var e,t=P,r={uuFTO:function(e,t,r,s){return e(t,r,s)},MrJBv:"inherit"};"win32"===process[t(419)+"rm"]?console[t(605)](colors.yellow("[AutoUpdate] Auto-restar"+t(462)+"ot sup"+t(622)+t(614)+t(442)+t(542)+"e rest"+t(514)+t(528)+".")):(e=process.argv[t(720)](1),r[t(493)](spawn,process[t(649)+"th"],e,{detached:!0,stdio:r.MrJBv,cwd:this[t(535)+"r"]}).unref()),process.exit(0)}async[P(616)+"mUpdate"](e=null){var t=P;if(this[t(519)+"ting"])return!1;this[t(519)+"ting"]=!0;try{e=e||await this[t(464)+"pdateI"+t(449)](),console[t(605)](colors[t(581)](t(571)+t(491)+t(677)+"ing to v"+e.version+t(633)));var r=await this.downloadUpdate(e);return await this["applyU"+t(409)](r)?(await this.installDependencies(),this["autoRe"+t(569)]?(this["printU"+t(510)+t(682)+"e"](e.version,e["change"+t(605)],!0),this.restart()):(this[t(559)+t(510)+"omplete"](e.version,e.changelog,!1),this[t(519)+t(501)]=!1),!0):this[t(519)+"ting"]=!1}catch(e){return console.error(colors.red(t(571)+"pdate] Update fail"+t(664)+e.message)),this[t(519)+t(501)]=!1}}["isValidLicenseKey"](e){var t=P;return!!e&&/^[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{4}$/[t(592)](e)}async["start"](){let s=P,o={mMpsC:function(e,t){return t<e},xacqd:function(e,t){return e===t},ZCPwk:s(695),QLhMe:s(571)+s(491)+" Invalid license key format detected",KfVqW:s(490)};if(this[s(536)+"d"])if(this["licens"+s(583)])if(this.isValidLicenseKey(this[s(675)+s(583)])){console[s(605)](colors.cyan("[AutoUpdate] Enabled - checking for "+s(700)+"s every hour"));var e=await this[s(439)+"orUpdates"]();if(e)if(o.KfVqW!=o.KfVqW){if(!m.existsSync(this.backupDir))return;var a=n.readdirSync(this.backupDir)[s(674)](e=>e["starts"+s(712)]("backup-")&&e[s(403)+"th"](s(670)))[s(660)](e=>({name:e,path:w[s(628)](this[s(504)+"Dir"],e),time:x.statSync(y.join(this["backup"+s(708)],e))[s(637)][s(424)+"e"]()})).sort((e,t)=>t.time-e[s(466)]);if(o[s(687)](a.length,r)){let t=a.slice(w);for(let e of t)D[s(715)+"Sync"](e[s(563)]),E[s(605)](F.gray("[AutoU"+s(491)+" Removed old backup: "+e.name))}}else await this["perfor"+s(548)+"e"](e);this[s(468)+s(432)]=setInterval(async()=>{var e=s,t=await this.checkForUpdates();t&&(o[e(557)](o[e(492)],e(695))?await this[e(616)+e(548)+"e"](t):this["makeRe"+e(597)](g.headers.location,h).then(i).catch(j))},this[s(689)+s(458)+"l"])}else console.log(colors[s(567)](o[s(549)])),console.log(colors[s(567)]("[AutoUpdate]"+s(542)+s(425)+"r a va"+s(686)+"cense key to use auto-up"+s(509)));else console.log(colors[s(567)](s(571)+s(491)+s(447)+s(642)+s(553)+"licens"+s(416)+"configured")),console.log(colors[s(567)](s(571)+"pdate]"+s(398)+s(588)+s(471)+"valid license key to use auto-updates"))}[P(573)](){var e=P;this[e(468)+e(432)]&&("CFOEH"===e(517)?(clearInterval(this[e(468)+e(432)]),this["interv"+e(432)]=null):k.createHash("sha256")[e(700)](l[e(463)+"leSync"](m)).digest(e(558))!==n.checksum&&(s[e(715)+e(472)](t),u(new v(e(606)+"um verification failed"))))}async["forceU"+P(409)](){var e=P,t={gYgns:"[AutoUpdate] ⚠ Invalid l"+e(414)+e(617)+"ormat"};if(!this[e(421)+e(478)+e(486)](this[e(675)+e(583)]))throw console[e(605)](colors.yellow(t[e(406)])),new Error(e(696)+e(431)+e(663)+e(694)+"ase en"+e(471)+"valid "+e(675)+"e key "+e(546)+" auto-updates.");console[e(605)](colors[e(581)](e(571)+"pdate]"+e(652)+"ng update ch"+e(676)));t=await this[e(439)+e(547)+e(572)]();return t?"qSqRl"===e(523)?t:await this.performUpdate(t):(console[e(605)](colors[e(692)]("[AutoUpdate]"+e(679)+e(430)+"latest version")),!1)}}let updaterInstance=null;function initAutoUpdater(e){return updaterInstance=updaterInstance?updaterInstance:new AutoUpdater(e)}function getAutoUpdater(){return updaterInstance}module[P(456)+"s"]={AutoUpdater:AutoUpdater,initAutoUpdater:initAutoUpdater,getAutoUpdater:getAutoUpdater};