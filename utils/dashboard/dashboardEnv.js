let aG=b;function b(o,r){let s=a();return(b=function(r,e){r-=383;let n=s[r];void 0===b.vnNOYj&&(b.ZggxiP=function(a){let o="",n="";for(let r=0,e,n,t=0;n=a.charAt(t++);~n&&(e=r%4?64*e+n:n,r++%4)&&(o+=String.fromCharCode(255&e>>(-2*r&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(let r=0,e=o.length;r<e;r++)n+="%"+("00"+o.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)},o=arguments,b.vnNOYj=!0);var r=r+s[0],t=o[r];return t?n=t:(n=b.ZggxiP(n),o[r]=n),n})(o,r)}(()=>{for(var r=b,e=a();;)try{if(122542==-parseInt(r(420))+-parseInt(r(464))/2+parseInt(r(383))/3*(-parseInt(r(513))/4)+-parseInt(r(484))/5+parseInt(r(461))/6+-parseInt(r(500))/7*(-parseInt(r(434))/8)+parseInt(r(455))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}})();let fs=require("fs"),path=require("path"),colors=require(aG(485)+aG(454)),crypto=require(aG(488)),getConfig=require("../cor"+aG(400)+"igLoader").getConfig;function ensureDirectoryExists(r){var e=aG;fs["exists"+e(452)](r)||fs["mkdirS"+e(521)](r,{recursive:!0})}function updateDashboardEnv(){let o=aG,s={EVGPI:function(r,e){return r!==e},IAkIj:"[ENV] "+o(449)+"cleaning up "+o(389)+o(425),vrure:"config"+o(531),GHvpM:function(r,e){return e<r},JEbJT:"aXYQu",QzBoP:"dRval",clnpZ:o(411),OCLSa:o(520),zaKvr:function(r,e){return r+e},yUhKz:function(r,e){return r===e},nvJcW:o(462),OOOeu:o(473)+"Error updati"+o(439)+o(431)+o(386)+"gurati"+o(472)};try{const g=getConfig(),D=path[o(426)](process.cwd(),o(496)+o(519)),d=path.join(D,".env"),h=path.join(D,"public"),S=path[o(426)](D,o(440)),b=path[o(426)](h,"config.js"),p=path.join(S,s.vrure);ensureDirectoryExists(h),ensureDirectoryExists(S);var e={mongoURI:g[o(529)+"RI"],BotToken:g[o(491)+"en"],"Dashboard.ClientID":g["Dashbo"+o(519)]?.[o(424)+"ID"],"Dashboard.ClientSecret":g.Dashboard?.[o(424)+o(490)],"Dashboard.Url":g[o(518)+"ard"]?.Url,"Dashboard.Port":g[o(518)+o(519)]?.Port,"Dashboard.Auth.JWTSecret":g.Dashboard?.[o(506)]?.["JWTSec"+o(480)],Timezone:g.Timezone},n=Object.entries(e)[o(502)](([,r])=>!r).map(([r])=>r);if(s.GHvpM(n[o(515)],0)){if(s[o(453)]!==s.QzBoP)return console[o(418)](colors.red(o(473)+"Error: Missi"+o(438)+"uired values in dashboard.yml:")),n.forEach(r=>console[o(418)](colors.red(o(429)+r))),!1;var t=d[o(525)+o(427)](h,o(511))[o(393)](/^SESSION_SECRET=(.+)$/m);t&&(b=t[1][o(514)]())}var a,i=g.Dashboard[o(444)],c=i+(o(499)+o(482)+"llback"),u=i+o(388);let r=null;r=(r=fs[o(432)+o(452)](d)&&(a=fs[o(525)+"leSync"](d,o(511))[o(393)](/^SESSION_SECRET=(.+)$/m))?a[1][o(514)]():r)||crypto[o(410)+"Bytes"](64).toString(s.clnpZ);var f=o(421)+"B_URI="+g.mongoURI+o(517)+"RD_GUI"+o(397)+o(403)+o(401)+g.BotToken+"\nDISCO"+o(479)+"ENT_ID="+g[o(518)+o(519)][o(424)+"ID"]+(o(517)+o(479))+"ENT_SECRET="+g[o(518)+"ard"].ClientSecret+"\nDISCO"+o(392)+o(441)+"URI="+c+"\nAPP_U"+o(390)+i+(o(469)+o(433))+"L="+i+o(481)+g.Dashboard[o(503)]+(o(493)+o(505))+g["Dashbo"+o(519)][o(506)]["JWTSec"+o(480)]+(o(489)+o(405)+o(459))+r+(o(450)+o(445))+g[o(467)+"ne"]+"\nDASHB"+o(495)+o(423)+o(492)+(g[o(518)+o(519)]?.Permissions?.[o(518)+"ard"]?.Login||[])[o(502)](r=>r).join(",")+"\nDASHBOARD_SETTINGS_ROLES="+(g["Dashbo"+o(519)]?.[o(407)+o(428)]?.Dashboard?.Settings||[])[o(502)](r=>r).join(",")+"\nDASHBOARD_EMBED_R"+o(492)+(g[o(518)+o(519)]?.Permissions?.Dashboard?.[o(430)]||[])[o(502)](r=>r)[o(426)](","),v=o(475)+o(466)+o(470)+o(496)+o(474)+o(487)+" NOT E"+o(457)+"RECTLY"+o(476)+o(402)+o(412)+o(406)+" = {\n    API"+o(394)+"'"+u+(o(414)+o(497))+"T_URL: '"+i+"',\n   "+o(527)+"ONE: '"+g[o(467)+"ne"]+o(414)+" DISCO"+o(463)+o(494)+o(486)+o(507)+" '"+g.Dashboard[o(424)+"ID"]+"',\n   "+o(385)+"EDIRECT_URI: '"+c+(o(414)+o(435)+o(417))+"D: ''\n"+o(408)+"\n    PERMISS"+o(471)+o(436)+o(528)+o(437)+o(395)+"           L"+o(384)+JSON["string"+o(526)](g["Dashbo"+o(519)]?.[o(407)+o(428)]?.[o(518)+"ard"]?.[o(416)]||[])+",\n    "+o(494)+"  Sett"+o(443)+JSON[o(522)+"ify"](g["Dashbo"+o(519)]?.["Permis"+o(428)]?.[o(518)+"ard"]?.[o(483)+"gs"]||[])+o(456)+"        Embed: "+JSON[o(522)+"ify"](g[o(518)+"ard"]?.Permissions?.[o(518)+"ard"]?.Embed||[])+"\n        }\n    },\n    TI"+o(478)+" {\n        TYPES: "+JSON[o(522)+"ify"](g.TicketTypes?Object.entries(g[o(468)+"Types"])[o(502)](([,r])=>r&&r[o(523)+"d"]).reduce((r,[e,n])=>({...r,[e]:{name:n[o(516)],channelName:n[o(524)+o(451)],supportRoles:n[o(442)+o(512)],userRoles:n.UserRole,claiming:n.Claiming?.Enabled?{enabled:!0,restrictResponse:n[o(387)+"ng"][o(398)+"ctResp"+o(448)],announceClaim:n[o(387)+"ng"][o(465)+"ceClaim"],button:n.Claiming[o(460)]}:null,button:n[o(460)],questions:n["Questi"+o(399)]||[]}}),{}):{},null,2)+(o(509)+o(422));try{let e=d+s.OCLSa,n=b+o(520),t=s.zaKvr(p,o(520)),a=[];try{return fs["writeF"+o(391)+"c"](e,f),a[o(419)](e),fs.writeFileSync(n,v),a[o(419)](n),fs.existsSync(path.dirname(p))&&(fs[o(409)+o(391)+"c"](t,v),a[o(419)](t)),fs[o(458)+"Sync"](e,d),a=a[o(502)](r=>r!==e),fs[o(458)+"Sync"](n,b),a=a[o(502)](r=>r!==n),fs[o(432)+"Sync"](path[o(404)+"e"](p))&&(fs[o(458)+o(452)](t,p),a=a.filter(r=>r!==t)),!0}catch(r){console[o(418)](colors[o(498)](o(473)+o(449)+"writing conf"+o(477)+o(508)+o(504)),r);for(var l of a){if(!s.yUhKz(s.nvJcW,o(462)))return d[o(418)](h[o(498)]("[ENV] "+o(449)+"updating das"+o(431)+" configurati"+o(472)),S),!1;try{fs[o(432)+o(452)](l)&&fs[o(446)+o(452)](l)}catch(r){console.error(colors[o(501)](o(473)+o(449)+"cleaning up temp f"+o(415)+l+":"),r)}}return!1}}catch(r){return console.error(colors[o(498)](o(473)+"Error "+o(510)+o(396)+"iguration files:"),r),[d+".tmp",b+s[o(413)],p+o(520)].forEach(r=>{var e=o;if(s.EVGPI(e(447),"RSBrf"))try{fs.existsSync(r)&&fs.unlinkSync(r)}catch(r){console.error(colors[e(501)](s.IAkIj),r)}else D["mkdirS"+e(521)](d,{recursive:!0})}),!1}}catch(r){return console[o(418)](colors.red(s.OOOeu),r),!1}}function a(){let r=["BgvtEw5J","C2LVBNm","icaTia","rw1Izwq","AgjVyxjK","zxHPC3rZ","qvbqx1vs","odHpC1buAeu","icaGicbh","EWOGicaG","C2HIB2fY","BMCGCMvX","BMCGzgfZ","zgLZDa","svjfq1rF","u3vWCg9Y","Aw5NCZOG","vxjS","t05fpq","Dw5SAw5R","uwLNBhi","B25Zzq","rxjYB3iG","cLrjtuvA","Be5HBwu","u3LUyW","sKvIsLq","B2XVCNm","mtq4mdK1ovD2qLDmwq","laOGicaG","reLuierj","CMvUyw1L","uKvupq","qNv0Dg9U","mti4nty5oef0wezvwa","AKjtu3y","uKq6ihSk","mZG3mZHzwfbpEwS","qw5UB3vU","zxjHDgvK","vgLTzxPV","vgLJA2v0","cLzjvevF","igzYB20G","su9ouZOG","B246","w0vovL0G","yxjKlNLT","lY8Gr2vU","cNDPBMrV","AwD1CMf0","q0Tfvfm6","uKrFq0Xj","CMv0","cLbpuLq9","DxrOl2nH","u2v0DgLU","mte5nty2merOr0rNyq","yw5ZAs1J","icbdteLf","BcaTierp","y3j5ChrV","cLnfu1nj","u2vJCMv0","qM90vg9R","t0XfuZ0","cKPxvf9t","icaGicaG","t0fsrf9m","zgfZAgjV","ienmsuvo","CMvK","l2fWAs9H","mZa5mZnkyKDqrNu","EwvSBg93","zMLSDgvY","ug9YDa","BgvZoG","runsrvq9","qxv0Aa","tLrFsuq6","Aw9UigzP","cIaGicb9","D3jPDgLU","DxrMoa","DfjVBgu","mtjNAfbnB2K","DhjPBq","BgvUz3rO","tMfTzq","cKrju0np","rgfZAgjV","yxjK","lNrTCa","Ew5J","C3rYAw5N","rw5HyMXL","q2HHBM5L","CMvHzezP","Awz5","ifrjtuvA","icaGierH","Bw9Uz29v","zxHWB3j0","lMPZ","nde5nZbLvuDADeW","B2DPBJOG","icaGicbs","ignVBMzP","q2XHAw1P","l2fWAq","DgvTCcbM","uKW9","AwXLu3LU","uKrFuKve","Bwf0y2G","x1vstdOG","zdOGEWOG","zYbJB25M","terFsuq9","uMvZDhjP","B25Z","zs9JB25M","t0TftJ0","DY5eqvni","cKjpvf9u","zgLYBMfT","t05Fu0vd","q09orKLh","ugvYBwLZ","icaGih0S","D3jPDgvg","CMfUzg9T","Agv4","qK9buKrF","t0nmu2e","jYWkicaG","AwXLia","tg9NAw4","vuLmrf9j","zxjYB3i","ChvZAa","ndqZmenNuMTWAW","tu9or09e","cN07","t0DjtL9s","q2XPzw50","AwXLoG","AM9PBG"];return(a=function(){return r})()}module[aG(530)+"s"]={updateDashboardEnv:updateDashboardEnv};