let D=b,getConfig=((()=>{for(var e=b,n=a();;)try{if(765255==+parseInt(e(526))*(-parseInt(e(499))/2)+-parseInt(e(480))/3+-parseInt(e(493))/4+parseInt(e(497))/5+-parseInt(e(488))/6*(parseInt(e(463))/7)+-parseInt(e(562))/8+-parseInt(e(485))/9*(-parseInt(e(445))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}})(),require("../cor"+D(487)+"igLoader.js")).getConfig,{AuditLogEvent,PermissionFlagsBits}=require(D(476)+D(494)),config=getConfig();function b(i,e){let o=a();return(b=function(e,n){e-=438;let t=o[e];void 0===b.RGhqYs&&(b.xzVuLB=function(a){let i="",t="";for(let e=0,n,t,r=0;t=a.charAt(r++);~t&&(n=e%4?64*n+t:t,e++%4)&&(i+=String.fromCharCode(255&n>>(-2*e&6))))t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(t);for(let e=0,n=i.length;e<n;e++)t+="%"+("00"+i.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(t)},i=arguments,b.RGhqYs=!0);var e=e+o[0],r=i[e];return r?t=r:(t=b.xzVuLB(t),i[e]=t),t})(i,e)}let actions={};function parseDuration(e){const n=function(e,n){return e*n},t=e.match(/(\d+)([smhd])/);if(!t)return 0;var r=parseInt(t[1]);switch(t[2]){case"s":return 1e3*r;case"m":return 60*r*1e3;case"h":return 1e3*n(60*r,60);case"d":return 60*n(r,24)*60*1e3;default:return 0}}async function canTakeAction(r,a,i){let o=D,s={BOxFk:function(e,n){return e!==n},KVYeo:o(534)};try{if(i.id===a.ownerId){if(s[o(481)](s[o(457)],o(498)))return!1;e.error(o(518)+o(439)+"move r"+o(448)+o(538)+(n[o(550)]||t[o(524)+"me"])+": "+j.message)}let e=await a[o(492)+"s"][o(556)](r[o(537)].id),n=await a.members[o(556)](i.id),t=config[o(513)+"ke"].WhitelistedRoles||[];return n.roles[o(462)].some(e=>t[o(508)+"es"](e.id))?!1:n.roles.highest[o(500)+o(510)+"ionTo"](e[o(438)].highest)<0}catch(e){return!1}}async function checkAntiNuke(n,t,r,a){let i=D,o={FSTsw:function(e,n){return e(n)},NfPNX:function(e,n){return e*n},Wdaju:function(e,n){return e*n},mRbSA:function(e,n){return e*n},KKYib:function(e,n){return e*n},iFJVQ:i(490),FeRjc:function(e,n){return e-n},YruLd:function(e,n){return e===n},MwaUt:"undefi"+i(446),xggHs:function(e,n){return n<=e},ZXWzv:function(e,n){return e!==n}},e=config.AntiNuke;if(e.Enabled&&a.id!==n.user.id&&a.id!==t.ownerId){var s=e[i(475)+"t"][i(454)],c=Date.now(),u=a.id;if(!actions[u])if(o[i(548)]!==o.iFJVQ){var l=r.match(/(\d+)([smhd])/);if(!l)return 0;var f=o.FSTsw(a,l[1]);switch(l[2]){case"s":return o.NfPNX(f,1e3);case"m":return o[i(501)](o[i(503)](f,60),1e3);case"h":return 1e3*o.NfPNX(o.NfPNX(f,60),60);case"d":return o[i(512)](o[i(516)](24*f*60,60),1e3);default:return 0}}else actions[u]={kickThreshold:0,banThreshold:0,channelDeleteThreshold:0,roleDeleteThreshold:0,lastAction:c,lastTier:null};var h=actions[u],l=o.FeRjc(c,h.lastAction);if(Math[i(469)](...Object.values(s).map(e=>parseDuration(e.Protection[i(552)+"on"])))<l){var d=("1|4|3|"+i(449))[i(479)]("|");let e=0;for(;;){switch(d[e++]){case"0":h[i(561)+"er"]=null;continue;case"1":h["kickTh"+i(533)+"d"]=0;continue;case"2":h["roleDe"+i(470)+"reshold"]=0;continue;case"3":h["channe"+i(474)+"eThres"+i(473)]=0;continue;case"4":h[i(559)+i(482)]=0;continue}break}}o.YruLd(typeof h[r],o.MwaUt)&&(h[r]=0),h[r]+=1,h.lastAction=c;u=Object[i(536)](s)[i(460)](e=>parseInt(e.replace("Tier","")));for(let e=Math.max(...u);1<=e;e--){var g=s[i(547)+e];if(g&&o[i(489)](h[r],g.Protection[r])&&o.ZXWzv(h.lastTier,"Tier"+e)){await applyActions(n,t,a,g,r,h[r]),h.lastTier=i(547)+e;break}}}}function findLogsChannel(e,n){var t,r=D,a={TBsnh:function(e,n){return e===n},kVxMw:function(e,n){return e===n}};if(n)for(t of Array.isArray(n)?n:[n])if(t&&!a.TBsnh(t,"")&&!a[r(447)](t,r(563)+"L_ID")){var i=e.channels[r(462)].get(t);if(i)return i}return null}async function applyActions(n,e,t,r,a,i){let o=D,s={TzsAZ:o(520)+"3|0",VXerY:"{thres"+o(554)+"mount}",wnWFT:function(e,n){return n<e},aUUHk:function(e,n){return e===n},gfPwE:o(440),gymGB:o(557),KChWH:function(e,n){return e!==n},lCVCT:o(551),maxXu:function(e,n){return e===n},SevVU:"QurAi",TzxtK:function(e,n){return e===n}},c=findLogsChannel(e,r.Logs["LogsCh"+o(531)+"D"]),u={title:r[o(545)][o(540)][o(456)],description:r.Logs.Embed[o(553)+"ption"].join("\n")[o(451)+"e"](o(539),"<@"+t.id+">").replace("{thres"+o(522),a)[o(451)+"e"](s.VXerY,i).replace("{timestamp}",(new Date)["toLoca"+o(450)+"ng"]()),color:parseInt(r.Logs[o(540)][o(484)][o(451)+"e"]("#",""),16),footer:{text:r[o(545)][o(540)].Footer},thumbnail:r.Logs[o(540)][o(532)+"ail"]?{url:t["displa"+o(521)+o(442)]()}:null};if(s.wnWFT(r.Actions[o(477)].length,0))for(let e of r[o(527)+"s"][o(477)]){var f=n.users[o(462)].get(e);if(f){if(s.aUUHk("uLxZf",o(544)))return!1;try{await f.send({embeds:[u]})}catch(e){50007===e[o(461)]&&console[o(444)](o(509)+" send messages to "+o(441)+"ser (A"+o(535)+"e)")}}}if(r[o(527)+"s"][o(515)+o(496)])if(s.gfPwE!==s[o(564)])try{if(s.KChWH("lophf",s[o(478)]))return!1;var h=await e[o(492)+"s"][o(556)](t.id);if(h){var d=h[o(438)].cache.filter(e=>e[o(519)+o(464)].has(PermissionFlagsBits[o(468)+o(507)]));if(s[o(514)](d[o(560)],0))for(var g of d[o(546)]())await h.roles[o(515)](g)}}catch(e){console.error(o(518)+" to re"+o(458)+o(448)+"rom "+(t[o(550)]||t.username)+": "+e.message)}else{var v=s.TzsAZ.split("|");let e=0;for(;;){switch(v[e++]){case"0":l.lastTier=null;continue;case"1":i[o(504)+o(533)+"d"]=0;continue;case"2":c["channe"+o(474)+"eThreshold"]=0;continue;case"3":u["roleDeleteTh"+o(533)+"d"]=0;continue;case"4":s[o(559)+"eshold"]=0;continue}break}}if(r.Actions.mute)try{var w=await e.members[o(556)](t.id);w&&await w[o(517)+"t"](6e5)}catch(e){50013===e.code?s[o(486)](s[o(455)],"kaxnm")?50007===t.code&&a.error("Cannot send "+o(549)+"es to this u"+o(555)+"ntiNuke)"):console[o(444)](o(518)+o(466)+o(465)+"r "+(t[o(550)]||t.username)+": Miss"+o(543)+o(502)+"ons (M"+o(528)+o(558)+o(459)+"er or "+o(467)+o(483)+o(511)+o(525)):s[o(523)](o(505),"dpzzs")?console[o(444)]("Failed"+o(466)+"te user "+(t.tag||t[o(524)+"me"])+": "+e.message):a.error("Failed to mute user "+(i.tag||s[o(524)+"me"])+": "+c.message)}if(r[o(527)+"s"].ban)try{await e[o(492)+"s"].ban(t.id,{reason:"Anti-N"+o(542)+"stem"})}catch(e){s.TzxtK(o(565),o(565))?console.error("Failed"+o(443)+"n user "+(t[o(550)]||t.username)+": "+e[o(549)+"e"]):r[a]={kickThreshold:0,banThreshold:0,channelDeleteThreshold:0,roleDeleteThreshold:0,lastAction:i,lastTier:null}}if(c)try{await c.send({embeds:[u]})}catch(e){console[o(444)]("Failed to send log message to "+c[o(506)]+": "+e[o(549)+"e"])}}async function handleKickEvent(e,n,t){var r=D;t&&await canTakeAction(e,n.guild,t[r(541)+"or"])&&await checkAntiNuke(e,n.guild,"kickTh"+r(533)+"d",t.executor)}async function handleBanEvent(e,n,t){var r=D,a={WlRkN:function(e,n,t,r){return e(n,t,r)},uLkem:function(e,n,t,r,a){return e(n,t,r,a)}};t&&await a[r(453)](canTakeAction,e,n[r(471)],t.executor)&&await a[r(491)](checkAntiNuke,e,n.guild,"banThreshold",t[r(541)+"or"])}function a(){let e=["A1z4txC","B2XLCYbM","mNWW","BgvtDhjP","CMvWBgfJ","zvrOCMvZ","v2XsA04","vgLLCNm","u2v2vLu","vgL0Bgu","s1zzzw8","Bw92zsbY","zsbOAwDO","BwfW","y29Kzq","y2fJAgu","ntK3nJa4mLLoD2vdzq","C2LVBNm","DguGDxnL","ihrVig11","DgHLEsbO","twfUywDL","Bwf4","Bgv0zvrO","z3vPBgq","C0vqBfe","Ag9Sza","BerLBgv0","rgvMyxvS","zgLZy29Y","BM90Awz5","Benwq1q","C3bSAxq","mtG1odu3ofDerurxBG","qK94rMS","zxnOB2XK","yxzLigfK","q29SB3i","mZiYoduXmZnHy1bnvgi","Bwf4whu","zs9JB25M","nK9WyuHyCa","EgDNshm","rLnABNm","DuXRzw0","BwvTyMvY","mtqZmdK4ohHkt25orW","zc5QCW","y2HHBM5L","uM9Szq","mZC4nZC0nxjjruDRra","wgXJD20","mJy0nZi1ofr4wevhwa","y29TCgfY","v2rHANu","CM1PC3nP","tMzqtLG","A2LJA1rO","BennrLq","BMfTzq","r3vPBgq","Aw5JBhvK","q2fUBM90","zvbVC2L0","BwLUihbL","BvjIu0e","qw50Au51","D25xrLq","CMvTB3zL","s0TzAwi","DgLTzw91","rMfPBgvK","CgvYBwLZ","mxW0Fdj8","Euf2yxrH","Ag9Szh0","s0nOv0G","DxnLCM5H","CM1Zkq","mwfUwvfmsq","qwn0Aw9U","B3zLigjV","EMzlywy","zxHWB3j0","yw5UzwXj","vgH1BwjU","CMvZAg9S","A3PYwgC","BNrPtNvR","A2v5CW","DxnLCG","CM9Tia","E3vZzxj9","rw1Izwq","zxHLy3v0","DwTLifn5","Aw5NifbL","EvHXDeG","tg9NCW","DMfSDwvZ","vgLLCG","AuzkvLe","BwvZC2fN","DgfN","Bg9WAgy","zhvYyxrP","rgvZy3jP","Ag9Szf9H","C2vYicHb","zMv0y2G","B1jOCMK","DhmGCM9S","yMfUvgHY","C2L6zq","BgfZDfrP","mZm5otiYng9hDKDhDW","q0HbtK5f","z3LTr0i","tLLiANO","CM9Szxm","ihrVihjL","tgLksva","DgHPCYb1","CLvsta","ihrVigjH","zxjYB3i","mtbiy1zgz3a","BMvK"];return(a=function(){return e})()}async function handleChannelDeleteEvent(e,n,t){var r=D;t&&await canTakeAction(e,n.guild,t.executor)&&await checkAntiNuke(e,n.guild,r(495)+r(474)+r(452)+"hold",t[r(541)+"or"])}async function handleRoleDeleteEvent(e,n,t){var r=D,a={PkAmN:function(e,n,t,r){return e(n,t,r)},sEPlQ:function(e,n,t,r,a){return e(n,t,r,a)},zfKaf:"roleDe"+r(470)+r(533)+"d"};t&&await a.PkAmN(canTakeAction,e,n[r(471)],t.executor)&&await a[r(472)](checkAntiNuke,e,n[r(471)],a[r(529)],t.executor)}module[D(530)+"s"]={handleKickEvent:handleKickEvent,handleBanEvent:handleBanEvent,handleChannelDeleteEvent:handleChannelDeleteEvent,handleRoleDeleteEvent:handleRoleDeleteEvent};