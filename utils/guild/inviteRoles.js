let x=b,getConfig=((()=>{for(var e=b,r=a();;)try{if(544882==+parseInt(e(395))+parseInt(e(373))/2*(-parseInt(e(360))/3)+-parseInt(e(397))/4+parseInt(e(357))/5+parseInt(e(359))/6*(-parseInt(e(383))/7)+-parseInt(e(356))/8+-parseInt(e(378))/9*(-parseInt(e(365))/10))break;r.push(r.shift())}catch(e){r.push(r.shift())}})(),require(x(390)+"e/configLoader.js")).getConfig,Invite=require("../../"+x(380)+x(361)+"eSchema"),config=getConfig();async function getUserInviteCount(e,r){var t;let n=0;for(t of await Invite.find({guildID:e,inviterID:r}))n+=t.uses;return n}async function checkAndAssignInviteRoles(r){var t=x,n={YfhNi:"gKxav",jbDPQ:"QpJFL"};try{if(config[t(375)+t(385)].Enabled){const g=r.guild.id,l=r.id,v=!1!==config["Invite"+t(385)][t(369)],I=await getUserInviteCount(g,l),d=Object[t(370)+"s"](config[t(375)+t(385)].Tiers)[t(400)](([,e],[,r])=>r.Amount-e.Amount);let e=!1;for(var[i,o]of d){var a=o[t(385)][t(371)](e=>"ROLE_ID"!==e&&""!==e.trim());if(I>=o.Amount&&!e){e=!0;for(var s of a){var c=r.guild[t(399)].cache.get(s);if(c&&!r[t(399)][t(386)][t(392)](s))if("xpOOp"===n[t(364)])g+=l[t(367)];else try{await r.roles[t(382)](c)}catch(e){console[t(384)]("[INVITE ROLES] Err"+t(363)+"ing role "+c.name+t(354)+r[t(389)][t(374)]+":",e)}}}else if(!v&&e)for(var f of a)if(t(355)===n[t(403)])g.error("[INVITE ROLES] Error in checkA"+t(358)+t(372)+t(398)+"s:",l);else{var u=r.guild.roles.cache.get(f);if(u&&r.roles[t(386)].has(f))try{await r.roles.remove(u)}catch(e){console.error(t(394)+t(366)+"S] Err"+t(377)+t(368)+"role "+u[t(381)]+t(387)+r.user.tag+":",e)}}}}}catch(e){console.error(t(394)+"E ROLES] Error in "+t(388)+t(358)+t(372)+t(398)+"s:",e)}}function b(i,e){let o=a();return(b=function(e,r){e-=354;let t=o[e];void 0===b.xyzYRo&&(b.BrwNNJ=function(i){let o="",t="";for(let e=0,r,t,n=0;t=i.charAt(n++);~t&&(r=e%4?64*r+t:t,e++%4)&&(o+=String.fromCharCode(255&r>>(-2*e&6))))t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(t);for(let e=0,r=o.length;e<r;e++)t+="%"+("00"+o.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(t)},i=arguments,b.xyzYRo=!0);var e=e+o[0],n=i[e];return n?t=n:(t=b.BrwNNJ(t),i[e]=t),t})(i,e)}async function updateInviteRolesForUser(e,t,n){var i=x;try{if(config[i(375)+i(385)][i(402)+"d"]){let r=e.guilds[i(386)].get(t);if(r){let e=await r.members[i(401)](n).catch(()=>null);e&&await checkAndAssignInviteRoles(e)}}}catch(e){"OEZdR"!==i(391)?console.error(i(394)+i(366)+"S] Error in "+i(376)+"Invite"+i(379)+i(362)+":",e):g.error("[INVIT"+i(366)+i(393)+"or adding ro"+i(396)+h.name+i(354)+e.user.tag+":",j)}}function a(){let e=["lI4Vy29Y","yMf1sMC","AgfZ","u10GrxjY","w0LovKLu","nde4ntuYz3zIvxfn","BguG","mtmXotq5mMT5qMTvrq","DgvsB2XL","CM9Szxm","C29YDa","zMv0y2G","rw5HyMXL","AMjeufe","ihrVia","uu5dtgi","ntKXmtCYofnkq2jdua","mJeYmdKZnu9Sz3nuta","BMrbC3nP","nKHmvxv0tW","mtG5m1P1AgrAAa","l2LUDML0","B3jvC2vY","B3iGywrK","wwzOtMK","mtbcCw5cALK","rsbst0Xf","DxnLCW","B3zPBMCG","u3rHy2S","zw50CMLL","zMLSDgvY","z25jBNzP","mZK4BxPuvgPd","DgfN","sw52AxrL","DxbKyxrL","B3iGCMvT","mtC1nZi4nZHYBfbcy1m","uM9Szxng","Bw9KzwXZ","BMfTzq","ywrK","nZm5mtKZn1LbC2LmwG","zxjYB3i","uM9Szxm","y2fJAgu","igzYB20G","y2HLy2Tb","DxnLCG"];return(a=function(){return e})()}module.exports={getUserInviteCount:getUserInviteCount,checkAndAssignInviteRoles:checkAndAssignInviteRoles,updateInviteRolesForUser:updateInviteRolesForUser};