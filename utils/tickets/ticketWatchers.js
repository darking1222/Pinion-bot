let u=b;function a(){let e=["v3rnCK8","CMvTB3zL","y2XVC2vK","8j+oQYbuAwnR","y2HHBMDL","BgrZ","BMfTzq","8j+rPcbvC2vY","C29UoIOQ","mJaZmdG0t3LSv2TM","y2TLDcb3","DgvUDcO","cIOQuMvH","8j+uKIbuAwnR","yxrJAgvK","zc5QCW","v3ftrwO","BM93","mJfQsgfhsvu","zvvZzxi","vgLJA2v0","Cg9Uzw50","iZaWrKyW","Aw5NihDH","zxHJBhvK","CvDqveO","zxqGqwXL","zej5","C3vIC3rY","igzPBguO","lI4VlI4V","zMv0y2G","BwvZC2fN","Ahr0Chm6","DgLmr2e","zxqGvw5J","D2f0y2HL","y3rPDML0","ifjLBw92","ywXLCNq","4PQG77IpifrPy2S","AgfUz2vK","y2HHBM5L","ihrPy2TL","t25L","BgvHBG","BwvUDhm","C2v0vgL0","twvKAxvT","z3vPBgrj","DxnLCL9Y","BwvYswq","vgHLihrP","igLZigjL","mtbPA3Pyzuq","nKLTsejcrW","B2XKuhjP","y2XHAw1L","z2v0","mta0nZy4nJj4s2roCxG","zMLUze9U","C3bVBNnL","8j+tJIbbDhrH","ufrgsxK","lY9KAxnJ","zxjYB3i","DxnLCNm","i0zgrKyW","B3jPDhK","wvfMDNe","rKvXwge","BgfPBwvK","uePVAKu","qKLTD1m","wM1xzMq","zsbPBIbx","i0zgmdaW","zxqGq2XH","ifrPy2TL","kK5VihrL","BMv3uhjP","ngrqyKv5yW","y2f0y2G","mJK1mZmYmfjSzMXtta","r0XTwuS","uhjPB3jP","kIPbDxrO","z3vPBgrZ","CMvHC29U","yNKGpea","8j+tIYbqCMLV","BMDLzcbM","DcbIEsa8","Esa8qa","B3jKlMnV","BKvNEey","mta0nJm2D2DUq3Ls","EhqGy29U","igHHCYbI","s0HQsfK","CML0Esbd","EsbHBgvY","Aw1Lza","BeLK","ndy5ntqYnKnHB3vRDq","C2vUDc4G","lI4U","iefKzgvK","mJm0odi3nufbCfPkBq","AwnRzxqG","CM9TicOQ","rxjYB3iG","AwnVBLvs","C2v0q29S","zwvUihvU","ywrKzwrv","q2nIwxi","C2v0rgvZ","DgLJA2v0","y3jPChrP","BM90Awz5","mJm2ntntvhj0Afu","zxqGq2XV"];return(a=function(){return e})()}(()=>{for(var e=b,t=a();;)try{if(265346==+parseInt(e(430))*(parseInt(e(415))/2)+-parseInt(e(475))/3*(parseInt(e(466))/4)+parseInt(e(442))/5+parseInt(e(389))/6*(parseInt(e(455))/7)+parseInt(e(417))/8+-parseInt(e(438))/9*(-parseInt(e(388))/10)+-parseInt(e(393))/11)break;t.push(t.shift())}catch(e){t.push(t.shift())}})();let{EmbedBuilder,ButtonBuilder,ButtonStyle,ActionRowBuilder}=require("discor"+u(472)),Ticket=require(u(487)+"models/tickets"),notificationCooldowns=new Map,COOLDOWN_MS=3e4;function b(i,e){let s=a();return(b=function(e,t){e-=387;let r=s[e];void 0===b.eNMfHU&&(b.cEfIDx=function(a){let i="",r="";for(let e=0,t,r,n=0;r=a.charAt(n++);~r&&(t=e%4?64*t+r:r,e++%4)&&(i+=String.fromCharCode(255&t>>(-2*e&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(let e=0,t=i.length;e<t;e++)r+="%"+("00"+i.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(r)},i=arguments,b.eNMfHU=!0);var e=e+s[0],n=i[e];return n?r=n:(r=b.cEfIDx(r),i[e]=r),r})(i,e)}async function notifyWatchers(e,t,r,n={}){var a=u,i={FEqXa:a(489)+"e",eFpqX:function(e,t){return e===t},qMOFt:"NYjsy",WtMrO:a(445)+a(454)+a(480)+"tchers:"};try{if(t[a(493)+"rs"]&&0!==t.watchers.length){var s=t["channe"+a(437)]+"-"+r,o=Date[a(474)](),c=notificationCooldowns.get(s);if(!(r===i.FEqXa&&c&&o-c<COOLDOWN_MS)){notificationCooldowns.set(s,o);var d=e[a(421)].cache[a(392)](t[a(506)+"d"]);if(d){var v=createWatcherEmbed(r,n,t,d);if(v){var l,h=(new ButtonBuilder).setLabel("Go to Ticket").setStyle(ButtonStyle.Link).setURL(a(490)+a(398)+a(428)+"m/channels/"+t.guildId+"/"+t[a(499)+a(437)]).setEmoji("ðŸŽ«"),f=(new ActionRowBuilder)["addCom"+a(478)+"s"](h);for(l of t[a(493)+"rs"])if(!(i.eFpqX(r,i[a(404)])&&n.authorId===l||i.eFpqX(n[a(481)+a(476)],l)))try{var w=await e[a(400)][a(488)](l)[a(416)](()=>null);if(w){if(i.qMOFt===a(406))return n.updateOne({channelId:i},{$pull:{watchers:s}});await w.send({embeds:[v],components:[f]})[a(416)](()=>{})}}catch(e){}}}}}}catch(e){console[a(399)](i[a(457)],e)}}function createWatcherEmbed(e,t,r,n){var a=u,i={GLmYK:"#5865F2",ZmWfd:"ðŸ’¬ New Messag"+a(409)+a(471)+a(412)+"t",BImwS:function(e,t){return t<e},nEgxF:a(440),LABzI:function(e,t){return t<e},KHjHY:"afKye",tiLGa:"ðŸ”“ Tick"+a(492)+a(405),WqSEj:a(424)+a(434)+a(498),oXJuJ:"High",PTFIy:function(e,t){return e===t},zGqUB:a(401)+"0",WGORO:"ðŸ‘¤ User"+a(441),CcbYr:a(464)+a(495)+"ed",YQfvq:"#FF0000",qWPTJ:a(470)+a(456)+"sing"},s=(new EmbedBuilder)[a(447)+"or"](i[a(418)]).setFooter({text:a(477)+" #"+r[a(452)+"Id"]+" â€¢ "+n[a(463)],iconURL:n[a(446)+"L"]()}).setTimestamp();switch(e){case a(489)+"e":if(s.setTitle(i[a(408)]).setDescription(a(420)+"or:** <@"+t.authorId+">\n**Message:** "+(t.content?.[a(485)+"ing"](0,200)||a(413)+a(431)+a(468))+(i[a(407)](t.content?.length,200)?i[a(429)]:"")),i.LABzI(t["attach"+a(503)],0)){if(i.KHjHY!==i[a(433)])return n["update"+a(501)]({channelId:i},{$addToSet:{watchers:s}});s["addFie"+a(462)]({name:a(396)+"chments",value:t.attachments+(a(486)+"s)"),inline:!0})}break;case a(391)+"d":s[a(504)+"le"](a(460)+a(411)+a(436)).setColor(a(479)+"0")[a(451)+a(453)+"on"](a(477)+a(432)+"een claimed by <@"+t[a(391)+"rId"]+">.");break;case"unclaimed":s.setTitle(i[a(491)])[a(447)+"or"]("#FFA500").setDescription(a(477)+" has b"+a(448)+a(391)+"d by <@"+t["unclai"+a(508)]+">.");break;case"priority":s.setTitle(i[a(473)])[a(447)+"or"](t[a(414)+a(402)]===i.oXJuJ?"#FF0000":i[a(397)](t[a(414)+"ority"],a(505))?i.zGqUB:a(479)+"0")[a(451)+a(453)+"on"](a(419)+"ty cha"+a(425)+a(444)+t[a(390)+a(402)]+"** to **"+t.newPriority+"** by <@"+t[a(461)+a(484)]+">.");break;case"user_added":s.setTitle(i.WGORO)[a(451)+a(453)+"on"]("<@"+t[a(449)+"ser"]+"> was added to the"+a(500)+a(426)+"@"+t.addedBy+">.");break;case a(507)+"emoved":s[a(504)+"le"](i[a(450)]).setColor(i[a(403)]).setDescription("<@"+t[a(458)+"dUser"]+"> was removed from the t"+a(443)+a(423)+t["remove"+a(484)]+">.");break;case a(496):s.setTitle(a(497)+a(483)+"rt Sent").setColor(a(410)+"0").setDescription("An ina"+a(494)+a(435)+"t was "+a(439)+a(509)+a(467)+"ill close if no re"+a(395)+" is received.");break;case"closing":s[a(504)+"le"](i[a(482)]).setColor("#FF0000")[a(451)+a(453)+"on"](a(477)+a(387)+"ing closed b"+a(427)+t[a(459)+"By"]+">."+(t.reason?a(469)+a(465)+" "+t[a(422)]:""));break;default:return null}return s}async function addWatcher(e,t){var r=u;return Ticket["update"+r(501)]({channelId:e},{$addToSet:{watchers:t}})}async function removeWatcher(e,t){return Ticket.updateOne({channelId:e},{$pull:{watchers:t}})}async function getWatchers(e){var t=u;return(await Ticket[t(394)+"e"]({channelId:e}).select(t(493)+"rs")[t(502)]())?.watchers||[]}module.exports={notifyWatchers:notifyWatchers,addWatcher:addWatcher,removeWatcher:removeWatcher,getWatchers:getWatchers};