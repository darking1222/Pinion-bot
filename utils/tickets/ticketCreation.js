let ae=b,{ActionRowBuilder,EmbedBuilder,ButtonBuilder,ButtonStyle,ModalBuilder,TextInputBuilder,TextInputStyle,LabelBuilder,StringSelectMenuBuilder,StringSelectMenuOptionBuilder,PermissionFlagsBits,MessageFlags}=((()=>{for(var e=b,t=a();;)try{if(435031==-parseInt(e(385))+-parseInt(e(454))/2*(parseInt(e(417))/3)+-parseInt(e(641))/4*(-parseInt(e(636))/5)+-parseInt(e(544))/6*(-parseInt(e(634))/7)+parseInt(e(383))/8*(parseInt(e(659))/9)+-parseInt(e(333))/10+parseInt(e(286))/11)break;t.push(t.shift())}catch(e){t.push(t.shift())}})(),require(ae(496)+"d.js")),moment=require(ae(289)+ae(633)+"one"),{getConfig,getLang}=require(ae(487)+"e/configLoad"+ae(635)),{replacePlaceholders,deferIfNeeded,getUserPriority,generateUniqueTicketId,parseDuration}=require(ae(357)+ae(292)+ae(588)),Ticket=require(ae(448)+ae(595)+"/tickets"),Blacklist=require(ae(448)+"models/blacklist"),config=getConfig(),lang=getLang();async function handleTicketCreate(a,s){const l=ae,u={hpudU:l(518)+"n}",EJzEN:function(e,t){return e===t},yMXNT:"StringSelect",zXxOi:function(e,t){return e<t},EUWlD:l(314),cChjj:"ooSVi",HXdoW:l(297),HTLzS:function(e,t){return e!==t},GLcxk:"N/A",TPvOM:function(e,t){return e(t)},LSvxx:"{workinghours_end}",JwSXS:function(e,t){return t<e},qyhOT:"Create"+l(395)+l(517)};try{let i;if(s[l(438)+"Id"]){let e=s.customId.split("-");i=e[1]||s.values[0]}else"VxfNu"!==l(605)?10008!==i.code&&t[l(404)](l(524)+l(356)+l(625)+" message:",e):i=s[l(644)][0];if(i==="nothin"+l(455)+l(638))return await s.reply({content:l(384)+" select a valid ticket t"+l(572)+" creat"+l(428)+"cket.",flags:MessageFlags["Epheme"+l(556)]});var g=config.TicketTypes[i];if(!g)throw console.error(l(559)+l(306)+l(449)+'y "'+i+'" not '+l(663)+"in configuration."),new Error("Ticket"+l(306)+"not fo"+l(611));var c=await Blacklist[l(339)+"e"]({userId:s[l(390)].id});if(c){let e=lang[l(559)+"s"][l(578)+"isted"].Embed,t=new EmbedBuilder;return e[l(469)]&&t.setTitle(e.Title),e[l(458)+"ption"]&&0<e[l(458)+"ption"][l(521)]&&t[l(515)+"cription"](e[l(458)+l(586)][l(509)]("\n").replace(l(479),"<@"+s.user.id+">").replace("{reason}",c.reason)[l(596)+"e"](l(576),l(525)+Math.floor(new Date(c.addedAt)[l(468)+"e"]()/1e3)+":F>")),e[l(669)]&&t[l(651)+"or"](e[l(669)]),e[l(664)]&&e[l(664)][l(554)]&&t["setFoo"+l(585)]({text:e[l(664)].Text||null,iconURL:e[l(664)][l(592)]||null}),e[l(545)]&&e[l(545)][l(554)]&&t["setAut"+l(510)]({name:e.Author[l(554)]||null,iconURL:e[l(545)].Icon||null}),e.Image&&t.setImage(e[l(325)]),e.Thumbnail&&t.setThumbnail(e.Thumbnail),void await s.reply({embeds:[t],flags:MessageFlags.Ephemeral})}let t=s.member[l(570)][l(418)].map(e=>e.id),e=g[l(598)+"le"][l(484)](e=>e&&t[l(560)+"es"](e));if(!e&&g[l(598)+"le"][l(484)](e=>e))await s.reply({content:"You do"+l(617)+l(302)+l(298)+"ired roles to crea"+l(398)+"s type"+l(477)+l(528),flags:MessageFlags[l(443)+"ral"]});else{var d,f,w=await Ticket[l(440)]({userId:s[l(390)].id,guildId:s.guild.id,status:{$in:["open","closed"]}}),v=[];for(let e of w){if(!e[l(637)+"lId"]){if(u[l(670)](u[l(653)],l(470))){await Ticket["update"+l(432)]({_id:e._id},{$set:{status:"deleted",deletedAt:new Date}});continue}i.setFooter({text:g[l(664)][l(554)],iconURL:c[l(664)][l(592)]||null})}let t=null;try{l(465)===l(382)?u+=l(445)+i[l(390)].id+">":t=await s[l(662)][l(637)+"ls"][l(621)](e[l(637)+l(301)],{force:!0})}catch(e){t=null}t?v.push({ticket:e,channel:t}):await Ticket[l(547)+"One"]({_id:e[l(361)]},{$set:{status:"deleted",deletedAt:new Date}})}if(v[l(521)]>=config[l(559)+"Settings"].MaxTickets)d=v.map(e=>"<#"+e.channel.id+">")[l(509)](", "),f=lang[l(559)+"s"][l(493)+"yOpen"]+("\n\nYour open "+l(530))+(1<v[l(521)]?"s":"")+": "+d,await s[l(396)]({content:f,flags:MessageFlags["Epheme"+l(556)]});else{if(config[l(437)+l(349)]&&config[l(437)+l(349)][l(620)+"d"]){var y,B=moment().tz(config[l(437)+"gHours"].Timezone),L=B.format(u.HXdoW);if(config["Workin"+l(349)].NonWorkingDays&&config["Workin"+l(349)][l(558)+l(460)+"ys"].includes(L))if(u.HTLzS(l(300),"SwRQK")){if(!config["Workin"+l(349)][l(283)+"penTic"+l(287)])return y=lang.Tickets.WorkingHours[l(596)+"e"](l(462)+l(536)+l(335)+"t}",u.GLcxk)[l(596)+"e"](l(462)+l(536)+l(548),"N/A"),void await s[l(396)]({content:y,flags:MessageFlags["Epheme"+l(556)]})}else e[l(515)+l(353)+"on"](w[l(458)+"ption"].join("\n").replace(l(479),"<@"+v[l(390)].id+">").replace(u.hpudU,m[l(311)])[l(596)+"e"](l(576),"<t:"+n[l(604)](new o(p.addedAt).getTime()/1e3)+":F>"));else{var h=config[l(437)+"gHours"].Schedule[L];if(h){var C,M,T,z,[x,b]=h[l(338)]("-"),[D,S]=x.split(":"),[k,A]=b.split(":"),I=B.clone().hour(parseInt(D))[l(619)](u[l(649)](parseInt,S))[l(549)](0)["millis"+l(488)](0),P=B.clone()[l(388)](parseInt(k)).minute(parseInt(A))[l(549)](0)[l(606)+l(488)](0);if(!B.isBetween(I,P)&&!config.WorkingHours[l(283)+"penTic"+l(287)]){if("HBlRg"!==l(374))return C=lang[l(559)+"s"][l(437)+l(349)][l(596)+"e"]("{worki"+l(536)+"s_start}","<t:"+I[l(657)]()+":t>").replace(u[l(360)],"<t:"+P.unix()+l(281)),void await s[l(396)]({content:C,flags:MessageFlags.Ephemeral});(M=t[l(639)+"s"][l(440)](e=>e.Value===o))?(T=M.Emoji||"",z=M.Label||o,p=(T+" "+z)[l(435)]()):q=r}}}}if(Array[l(494)+"y"](g[l(369)+l(332)])&&u[l(622)](g[l(369)+"ons"].length,0))if(g[l(369)+l(332)][l(484)](e=>{var t=l,e=e[Object.keys(e)[0]];return u[t(670)](e.Type,u.yMXNT)})){let e=(new ModalBuilder)["setCus"+l(355)]("ticket"+l(516)+"-"+i).setTitle(g[l(562)]||u.qyhOT),a=[];g.Questions[l(546)+"h"]((e,t)=>{let r=l;if(u.zXxOi(t,5)){var t=Object.keys(e)[0],e=e[t];if(u[r(670)](e.Type,u[r(293)])){let i=(new StringSelectMenuBuilder)[r(542)+r(355)](t).setPlaceholder(e[r(426)+"older"]||"Select"+r(471)+"tion...")["setMin"+r(319)](e.Required?1:0)[r(324)+r(319)](1);e.Options[r(546)+"h"](e=>{var t=r,n=(new StringSelectMenuOptionBuilder)[t(607)+"el"](e[t(587)])[t(514)+"ue"](e[t(582)]);e["Descri"+t(586)]&&n["setDes"+t(353)+"on"](e["Descri"+t(586)]),e[t(467)]&&n.setEmoji(e.Emoji),i[t(403)+t(671)](n)});var n=(new LabelBuilder)[r(607)+"el"](e.Question)["setStr"+r(304)+r(416)+r(459)+r(399)](i);e[r(458)+"ption"]&&n.setDescription(e["Descri"+r(586)]),a.push(n)}else u.EJzEN(u.EUWlD,"kDATf")?(n={Short:TextInputStyle[r(569)],Paragraph:TextInputStyle.Paragraph},t=(new TextInputBuilder)[r(542)+r(355)](t)[r(344)+r(567)+"er"](e[r(426)+r(386)]||"")[r(505)+"le"](n[e[r(391)]]||TextInputStyle[r(569)])[r(439)+r(457)](e.Required||!1)[r(324)+"Length"](e.maxLength||1e3),n=(new LabelBuilder).setLabel(e.Question||"").setTextInputComponent(t),a[r(451)](n)):u[r(628)+"le"](i.Title)}}),e[l(642)+l(513)+l(580)](...a),await s.showModal(e)}else{let r=(new ModalBuilder)[l(542)+"tomId"]("ticket"+l(516)+"-"+i)[l(628)+"le"](g[l(562)]||u.qyhOT);g[l(369)+l(332)].forEach(e=>{var t=l,n=Object.keys(e)[0],e=e[n],i={Short:TextInputStyle[t(569)],Paragraph:TextInputStyle[t(328)+t(290)]},n=(new TextInputBuilder).setCustomId(n).setLabel(e[t(369)+"on"]||"")[t(344)+t(567)+"er"](e.Placeholder||"")[t(505)+"le"](i[e[t(391)]]||TextInputStyle[t(569)])["setReq"+t(457)](e[t(506)+"ed"]||!1)["setMax"+t(508)](e[t(541)+t(337)]||1e3),i=(new ActionRowBuilder).addComponents(n);r[t(334)+"ponents"](i)}),await s[l(533)+"dal"](r)}else s[l(345)+"ed"]||s.replied||await s[l(336)+l(640)]({flags:MessageFlags[l(443)+"ral"]}),await createTicket(a,s,i,[],g.Panel)}}}catch(e){console[l(404)](l(524)+l(630)+"ng tic"+l(466),e),s[l(500)+"d"]||s[l(345)+"ed"]||await s["deferR"+l(640)]({flags:MessageFlags[l(443)+l(556)]}),await s.followUp({content:l(597)+l(645)+l(531)+l(285)+"creati"+l(601)+" ticket. Please tr"+l(631)+l(519)+"r.",flags:MessageFlags["Epheme"+l(556)]})[l(450)](e=>console.error(l(524)+l(343)+"g foll"+l(543),e))}}async function createTicket(p,y,B,L,h){let C=ae,M={ZQhrw:"Select an op"+C(648)+".",wAjiy:"Error sending tag message:",aUdJU:C(456),lJFPa:function(e,t){return e===t},HeSFT:function(e,t){return t<=e},KbeyW:function(e,t){return e===t},IHySc:function(e,t){return e!==t},HFcAj:function(e,t){return e(t)},Svjzc:function(e,t){return e<t},FrsaN:"Invali"+C(412)+C(474)+"generated:",bOmnn:"Failed to generate valid"+C(511)+C(499),pOCUa:C(348)+"t-id}",llaVq:C(394),afPfE:function(e,t){return e+t},IelDm:"CZMDb",YuApm:function(e,t){return e===t},gYgZf:"CATEGO"+C(291),LdTeJ:C(310),jLiNn:C(431),hlVAF:C(296),QCtFe:C(647),HetAK:function(e,t){return e!==t},JKfyH:C(550),ygXJE:function(e,t){return e===t},zNoWT:function(e,t){return e!==t},nMVVj:"{priority}",HDZEM:C(615)+"er}",brvOk:"EdDUJ",FNYnu:function(e,t,n){return e(t,n)},gbLUY:C(408),FYaDG:function(e,t,n,i){return e(t,n,i)},BwzWO:C(597)+C(645)+C(531)+C(285)+C(630)+"ng the ticket. Please try agai"+C(519)+"r."};try{y.deferred||y.replied||await y[C(336)+"eply"]({flags:MessageFlags["Epheme"+C(556)]});const H=config.TicketTypes[B],j=y[C(538)],Y=await getUserPriority(j);if(config.TicketSettings["Delaye"+C(312)+C(430)]&&config["Ticket"+C(316)+"gs"][C(406)+"dResponse"][C(620)+"d"])if(C(520)===C(502))h=M.map(t=>Y[C(369)+C(380)+"at"].map(e=>t(e,{question:t.question,answer:t[C(299)]}))[C(509)]("\n"))[C(509)]("\n\n");else{var T=await Ticket["countD"+C(279)+"ts"]({guildId:y.guild.id,status:C(564)});if(M[C(371)](T,config.TicketSettings["DelayedRespo"+C(430)][C(559)+C(568)+C(327)]))if(M[C(526)]("DBdbT","DBdbT")){var z=config[C(559)+C(316)+"gs"][C(406)+C(312)+C(430)].Embed,x=new EmbedBuilder;if(z.Title){if(C(372)===C(577))return L(h,M);x[C(628)+"le"](z.Title)}var b=z[C(458)+"ption"][C(509)]("\n")[C(596)+"e"]("{openT"+C(284)+"}",T[C(534)+"ng"]());x[C(515)+C(353)+"on"](b)[C(651)+"or"](z[C(669)]),z.Footer&&z.Footer[C(554)]&&x[C(482)+"ter"]({text:z.Footer[C(554)],iconURL:z.Footer[C(592)]||null}),z[C(410)+"ail"]&&x["setThu"+C(303)](z[C(410)+"ail"]),z.Image&&x[C(655)+"ge"](z[C(325)]),x["setTim"+C(351)](),await y.followUp({embeds:[x],flags:MessageFlags[C(443)+C(556)]})}else{var D=L[C(491)].components[C(557)+"p"](e=>e[C(308)+C(551)]||[]).find(e=>e[C(438)+"_id"]===H);D&&D.values&&0<D.values[C(521)]&&(H=D[C(644)][0])}}var S,k=await generateUniqueTicketId();if(M[C(381)](typeof k,C(341))||M.HFcAj(isNaN,k)||M[C(317)](k,1))throw console[C(404)](M[C(350)],k),new Error(M[C(414)]);let t=H["Channe"+C(419)].replace(M.pOCUa,k)[C(596)+"e"](C(479),y[C(390)].username)[C(596)+"e"](C(401)+"ity}",Y),e=y.guild[C(637)+"ls"].cache.find(e=>e[C(352)]===t);if(e){if(M.llaVq!==C(379))return void await y[C(532)+"Up"]({content:lang.Tickets["Alread"+C(590)],flags:MessageFlags.Ephemeral});{let i=(new e).setCustomId(r)["setPla"+C(567)+"er"](a[C(426)+"older"]||M[C(342)])[C(583)+"Values"](s[C(506)+"ed"]?1:0)["setMax"+C(319)](1);o[C(639)+"s"][C(546)+"h"](e=>{var t=C,n=(new f)[t(607)+"el"](e[t(587)]).setValue(e[t(582)]);e[t(458)+t(586)]&&n[t(515)+t(353)+"on"](e[t(458)+"ption"]),e[t(467)]&&n.setEmoji(e.Emoji),i["addOpt"+t(671)](n)});var A=(new l)[C(607)+"el"](u[C(369)+"on"])["setStringSelectMen"+C(459)+C(399)](i);g["Descri"+C(586)]&&A[C(515)+"cription"](f[C(458)+"ption"]),d.push(A)}}let r=new Ticket({ticketId:k,userId:y.user.id,guildId:y.guild.id,ticketType:B,priority:Y,questions:L,messageCount:0,alertTime:H["AutoAl"+C(278)]&&M[C(381)](H[C(473)+C(278)],"0")?new Date(M[C(523)](Date[C(423)](),parseDuration(H["AutoAl"+C(278)]))):null,claimed:!1,claimedBy:null}),a=[{id:y[C(662)].roles[C(573)+"ne"].id,deny:[PermissionFlagsBits[C(608)+"annel"],PermissionFlagsBits["SendMe"+C(436)],PermissionFlagsBits[C(433)+"ssageH"+C(393)]]},{id:y.user.id,allow:[PermissionFlagsBits.ViewChannel,PermissionFlagsBits.SendMessages,PermissionFlagsBits[C(433)+C(370)+C(393)],PermissionFlagsBits["Attach"+C(594)],PermissionFlagsBits[C(575)+C(574)]]},{id:p.user.id,allow:[PermissionFlagsBits[C(608)+C(555)],PermissionFlagsBits["SendMe"+C(436)],PermissionFlagsBits.ReadMessageHistory,PermissionFlagsBits.ManageChannels,PermissionFlagsBits[C(501)+"Messages"],PermissionFlagsBits[C(368)+"Files"],PermissionFlagsBits[C(575)+"inks"]]}];if(H.SupportRole&&Array[C(494)+"y"](H["Suppor"+C(658)]))for(var I of H.SupportRole)"DjZsZ"===C(602)?I&&(S=y[C(662)].roles[C(418)][C(481)](I))&&(M.IHySc("cVPhR","cVPhR")?B.error("Error sending ticket creation message:",L):a[C(451)]({id:S.id,allow:[PermissionFlagsBits[C(608)+C(555)],PermissionFlagsBits.SendMessages,PermissionFlagsBits[C(433)+C(370)+C(393)],PermissionFlagsBits["Attach"+C(594)],PermissionFlagsBits[C(575)+"inks"]]})):B[C(404)](M[C(627)],L);let s={name:t,type:0,permissionOverwrites:a},o=null,i=null,l=H[C(358)+"ryID"];if(Array.isArray(l))if("LZOIn"!==C(566))for(var P of l){if("ndYjm"===M.IelDm)return typeof M===M[C(610)]?t(e,r):k;if(P&&""!==P&&!M.YuApm(P,M.gYgZf)&&y.guild.channels.cache.get(P)){o=P;break}}else Y["addCom"+C(446)+"s"]((new k)[C(542)+"tomId"](C(530)+C(377)+t)[C(607)+"el"](e.Claiming[C(603)][C(562)]||"Claim Ticket").setStyle(r[a.Claiming[C(603)][C(391)]]||s["Second"+C(282)]).setEmoji(o[C(365)+"ng"].Button.Emoji||"ðŸŽ«"));else l&&M.IHySc(l,"")&&M.IHySc(l,"CATEGO"+C(291))&&("oSBRd"!==M[C(330)]?B=L:o=l);if(o){var q=y[C(662)].channels[C(418)][C(481)](o);if(q&&M[C(371)](q[C(504)+"en"].cache[C(434)],50)&&config[C(559)+"Settings"][C(295)+"ow"])for(var E of config.TicketSettings.overFlow)if(M[C(429)]!==M[C(599)]){if(E&&!M.KbeyW(E,"")&&E!==M[C(421)]){var U=y.guild[C(637)+"ls"][C(418)][C(481)](E);if(U&&U.children[C(418)][C(434)]<50){if(C(647)===M[C(529)]){o=E,i=U;break}y=null}}}else B=L.values[0];else q&&(M[C(424)](M[C(411)],C(550))?B[C(364)]=L.id:i=q)}i&&("IOSKK"!==C(654)?s.parent=i.id:""!==h[C(664)].Text&&Y[C(482)+C(585)]({text:k.Footer.Text,iconURL:t[C(664)].Icon||null}));let u;try{if(M[C(571)](C(624),"KXJUd")){if(u=await y.guild[C(637)+"ls"].create(s),r[C(637)+"lId"]=u.id,r["channe"+C(419)]=u[C(352)],await r[C(329)](),global["addonL"+C(497)])if(M[C(593)]("yKlpi",C(492)))global.addonLoader["getEventMana"+C(498)]()[C(584)+"fe"](C(530)+":created",{ticket:r[C(397)+"ct"](),ticketType:H,channel:u,user:y[C(390)],guild:y.guild,questions:L,priority:Y});else{let t=h.SupportRole[C(656)](e=>t[C(662)][C(570)].cache.has(e)?C(413)+e+">":null)[C(540)](H)[C(509)](" ");j+=t}}else L[C(482)+C(585)]({text:h.Footer[C(554)],iconURL:M.Footer[C(592)]||null})}catch(e){if(!M[C(424)](C(376),"bZZBh"))return console[C(404)]("Error "+C(630)+C(535)+C(475),e),await y[C(532)+"Up"]({content:"Failed to create the ticket channel. Please contact an"+C(472)+C(375)+C(563),flags:MessageFlags.Ephemeral});L["setFoo"+C(585)]({text:h.Footer.Text,iconURL:M.Footer.Icon||null})}let g=H[C(359)+"lTopic"][C(596)+"e"]("{ticke"+C(489),H[C(562)])[C(596)+"e"](C(646)+"d}",C(629)+y[C(390)].id+">").replace(M.nMVVj,Y).replace(M.HDZEM,r.claimed?"<@"+r["claime"+C(277)]+">":"Unclaimed"),c=(r["channe"+C(323)]=g,await r.save(),await u[C(402)+"ic"](g),config.TicketCreation[B]||config[C(559)+"Creation"][C(626)+"t"]),d=c.Embed,f="",w=(0<L.length&&(f=L[C(656)](t=>c[C(369)+"onFormat"][C(656)](e=>replacePlaceholders(e,{question:t.question,answer:t.answer})).join("\n"))[C(509)]("\n\n")),{ticketType:H[C(562)],user:"<@"+y.user.id+">",guild:y[C(662)].name,questions:f,claimer:r.claimed?"<@"+r[C(347)+C(277)]+">":C(307)+"med",userIcon:y[C(390)]["displayAvata"+C(652)]({dynamic:!0})}),n=JSON.parse(JSON.stringify(d),(e,t)=>{var n=C;if("spgKQ"!==n(405))return M.lJFPa(typeof t,n(456))?replacePlaceholders(t,w):t;t={Short:r[n(569)],Paragraph:a["Paragr"+n(290)]},t=(new s)[n(542)+"tomId"](o).setPlaceholder(i.Placeholder||"").setStyle(t[l[n(391)]]||u.Short)[n(439)+n(457)](g.Required||!1)[n(324)+n(508)](c["maxLen"+n(337)]||1e3),t=(new d).setLabel(f.Question||"")["setTex"+n(346)+n(320)+"ent"](t);w[n(451)](t)}),v=(new EmbedBuilder).setTitle(n[C(469)])[C(515)+C(353)+"on"](n["Descri"+C(586)].join("\n")).setColor(n[C(669)]);Array[C(494)+"y"](n[C(614)])&&(C(340)===M[C(507)]?h.setThumbnail(M(H[C(410)+"ail"],j)):n.Fields[C(546)+"h"](e=>{var t=C;e[t(562)]&&e[t(582)]&&v[t(464)+t(321)]({name:e.Name,value:e.Value,inline:!0===e.Inline})})),n[C(545)]&&n[C(545)][C(554)]&&v.setAuthor({name:n[C(545)][C(554)],iconURL:n[C(545)][C(592)]?M.FNYnu(replacePlaceholders,n.Author.Icon,w):null}),n.Footer&&n[C(664)][C(554)]&&v[C(482)+"ter"]({text:n[C(664)][C(554)],iconURL:n[C(664)].Icon?replacePlaceholders(n[C(664)].Icon,w):null}),n.Image&&v[C(655)+"ge"](n[C(325)]),n[C(410)+"ail"]&&v.setThumbnail(replacePlaceholders(n[C(410)+C(632)],w));var F=new ActionRowBuilder;if(F[C(334)+C(446)+"s"]((new ButtonBuilder).setCustomId(C(530)+"close-"+k)[C(607)+"el"](lang[C(559)+"s"][C(527)+"icketB"+C(447)])[C(505)+"le"](ButtonStyle.Danger)[C(503)+"ji"]("ðŸ”’")),H.Claiming&&H.Claiming[C(620)+"d"])if("mYLRL"!==M.gbLUY)F[C(334)+C(446)+"s"]((new ButtonBuilder)[C(542)+C(355)](C(530)+C(377)+k).setLabel(H.Claiming[C(603)][C(562)]||"Claim Ticket").setStyle(ButtonStyle[H.Claiming[C(603)].Style]||ButtonStyle.Secondary).setEmoji(H[C(365)+"ng"].Button[C(467)]||"ðŸŽ«"));else{let n={yDbFd:function(e,t){return M.lJFPa(e,t)}};B[C(614)][C(546)+"h"](e=>{var t=C;e[t(562)]&&e.Value&&M[t(464)+"lds"]({name:e[t(562)],value:e.Value,inline:n.yDbFd(e[t(613)],!0)})})}let m;try{m=await u[C(579)]({embeds:[v],components:[F]}),r["firstM"+C(313)+"Id"]=m.id,await r[C(329)]()}catch(e){console.error(C(524)+"sending ticket creation "+C(600)+"e:",e)}config["Workin"+C(349)].Enabled&&await sendWorkingHoursEmbed(u),(H["TagSup"+C(552)]||H[C(442)+C(331)])&&await M[C(643)](sendTagMessage,u,y,H),await sendFollowupMessage(m,w,B)[C(450)](e=>console[C(404)](C(524)+"sendin"+C(667)+C(463)+C(600)+"e:",e)),await sendTicketCreatedResponse(y,u)}catch(e){console.error("Error "+C(630)+C(589)+C(466),e),y[C(500)+"d"]||y.deferred||await y[C(336)+C(640)]({flags:MessageFlags[C(443)+"ral"]}),await y.followUp({content:M.BwzWO,flags:MessageFlags[C(443)+"ral"]})[C(450)](e=>console[C(404)]("Error "+C(343)+"g foll"+C(543),e))}}async function sendWorkingHoursEmbed(e){let t=ae,n={fuRCz:t(661),woYUf:function(e,t){return e(t)}},i=moment().tz(config["Workin"+t(349)][t(366)+"ne"]),r=i.format("dddd");var a,s,o,l;config[t(437)+t(349)][t(558)+t(460)+"ys"]&&config[t(437)+"gHours"]["NonWor"+t(460)+"ys"].includes(r)?(a=config["Workin"+t(522)].Embed,o=new EmbedBuilder,a[t(469)]&&o.setTitle(a.Title),a[t(458)+"ption"]&&o[t(515)+t(353)+"on"](a.Description[t(509)]("\n").replace(t(462)+"nghour"+t(335)+"t}","N/A")[t(596)+"e"]("{workinghours_end}",n.fuRCz)),a.Color&&o[t(651)+"or"](a[t(669)]),a.Footer&&a[t(664)].Text&&""!==a[t(664)].Text&&o.setFooter({text:a.Footer[t(554)],iconURL:a.Footer.Icon||null}),a[t(325)]&&o.setImage(a.Image),a.Thumbnail&&o.setThumbnail(a[t(410)+t(632)]),await e.send({embeds:[o]})[t(450)](e=>console.error(t(524)+t(343)+t(476)+"ing hours em"+t(461),e))):(a=config.WorkingHours.Schedule[r])&&([o,a]=a.split("-"),[o,l]=o.split(":"),[a,s]=a.split(":"),o=i[t(650)]().hour(n[t(623)](parseInt,o))[t(619)](parseInt(l))[t(549)](0)[t(606)+"econd"](0),l=i[t(650)]().hour(parseInt(a)).minute(parseInt(s)).second(0)[t(606)+t(488)](0),i[t(315)+"een"](o,l)||(a=config.WorkingEmbed[t(354)],s=new EmbedBuilder,a.Title&&s[t(628)+"le"](a[t(469)]),a[t(458)+"ption"]&&(o=t(525)+o[t(657)]()+":t>",l=t(525)+l.unix()+":t>",s[t(515)+t(353)+"on"](a[t(458)+t(586)][t(509)]("\n")[t(596)+"e"]("{worki"+t(536)+"s_start}",o).replace("{worki"+t(536)+t(548),l))),a[t(669)]&&s[t(651)+"or"](a.Color),a.Footer&&a.Footer[t(554)]&&""!==a.Footer[t(554)]&&s.setFooter({text:a.Footer[t(554)],iconURL:a.Footer[t(592)]||null}),a[t(325)]&&s[t(655)+"ge"](a.Image),a.Thumbnail&&s.setThumbnail(a[t(410)+t(632)]),await e.send({embeds:[s]})[t(450)](e=>console[t(404)]("Error sending work"+t(407)+"urs embed:",e))))}function b(r,e){let s=a();return(b=function(e,t){e-=277;let n=s[e];void 0===b.lQriLG&&(b.HYmGOE=function(r){let a="",n="";for(let e=0,t,n,i=0;n=r.charAt(i++);~n&&(t=e%4?64*t+n:n,e++%4)&&(a+=String.fromCharCode(255&t>>(-2*e&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(let e=0,t=a.length;e<t;e++)n+="%"+("00"+a.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(n)},r=arguments,b.lQriLG=!0);var e=e+s[0],i=r[e];return i?n=i:(n=b.HYmGOE(n),r[e]=n),n})(r,e)}async function sendTagMessage(e,t,n){let i=ae,r="";var a;if(n[i(452)+"port"]&&(a=n[i(581)+i(658)].map(e=>t[i(662)][i(570)][i(418)].has(e)?"<@&"+e+">":null).filter(Boolean)[i(509)](" "),r+=a),n["TagCre"+i(331)]&&(r+=" <@"+t[i(390)].id+">"),r)try{await(await e[i(579)]({content:r.trim()}))[i(425)]()[i(450)](e=>{var t=i;10008!==e.code&&console.error("Error "+t(356)+t(625)+" messa"+t(294),e)})}catch(e){console[i(404)]("Error "+i(343)+i(609)+i(600)+"e:",e)}}async function sendFollowupMessage(e,t,n){var i=ae,n=(config["Ticket"+i(512)+"on"][n]||config.TicketCreation.Default).Followup;n[i(537)+"e"]&&""!==n[i(537)+"e"]&&(n=replacePlaceholders(n.Message,t),await e[i(396)](n))}async function sendTicketCreatedResponse(e,t){const n=ae,i={hGMuM:function(e,t){return t<e},RQMsQ:function(e,t){return e!==t},jQKJb:n(427)},r=lang[n(559)+"s"].TicketCreated.Embed,a=new EmbedBuilder;r.Title&&a.setTitle(r.Title),r[n(458)+"ption"]&&i.hGMuM(r["Descri"+n(586)][n(521)],0)&&a[n(515)+n(353)+"on"](r.Description[n(509)]("\n").replace(n(480),"["+lang[n(559)+"s"]["Ticket"+n(362)+"d"][n(389)+"xt"]+n(409)+"s://di"+n(415)+n(280)+"annels/"+e[n(662)].id+"/"+t.id+")")),r.Color&&a[n(651)+"or"](r[n(669)]),r[n(664)]&&r[n(664)][n(554)]&&i.RQMsQ(r[n(664)][n(554)],"")&&a[n(482)+n(585)]({text:r[n(664)][n(554)],iconURL:r[n(664)].Icon||null}),r[n(545)]&&r[n(545)].Text&&""!==r[n(545)][n(554)]&&("yISrH"!==i.jQKJb?a[n(665)+"hor"]({name:r[n(545)].Text,iconURL:r[n(545)][n(592)]||null}):i=r),r[n(325)]&&a.setImage(r.Image),r.Thumbnail&&a[n(495)+"mbnail"](r[n(410)+n(632)]);var s=lang.Tickets[n(559)+"Created"][n(603)],t=(new ActionRowBuilder)[n(334)+"ponents"]((new ButtonBuilder).setLabel(s.Text)[n(505)+"le"](ButtonStyle[n(666)])[n(668)](n(322)+"//discord.co"+n(392)+"nels/"+e[n(662)].id+"/"+t.id)[n(503)+"ji"](s[n(467)]||null));await e.followUp({embeds:[a],components:[t],flags:MessageFlags[n(443)+"ral"]})}async function handleModalSubmitTicketCreation(e,r){let a=ae,s={KLCvt:function(e,t){return e===t},MbbfW:function(e,t){return t<e},HhQUs:"N/A",MYDTn:a(478)+"Select",sPMUN:"QkSog",tnPRd:a(387),aWvkE:a(453)};try{r.deferred||r.replied||await r[a(336)+a(640)]({flags:MessageFlags.Ephemeral});var[t,o]=r[a(438)+"Id"][a(338)]("-");if(s[a(305)](t,"ticket"+a(516))){var l,u,g=config[a(559)+a(309)][o],c=[];if(Array.isArray(g[a(369)+a(332)])&&s[a(373)](g.Questions.length,0)){for(var d of g.Questions){let n=Object.keys(d)[0],e=d[n],t=e.Question,i=s.HhQUs;try{if(s[a(305)](e.Type,s[a(612)])){let t;if(r[a(308)+"ents"])for(var f of r[a(308)+a(551)]){if(f[a(308)+"ents"])if(s.sPMUN!==a(490)){for(var w of f[a(308)+a(551)])if(w.customId===n){if(w[a(644)]&&0<w[a(644)][a(521)]){t=w[a(644)][0];break}if(w.value){t=w.value;break}}}else o.error(a(524)+"gettin"+a(378)+"e for "+g+":",c),d="N/A";if(t)break}if(!t){var v=global[a(444)+a(367)+a(422)]?.[a(481)](r.id);if(v&&v["originalComp"+a(580)])for(var m of v[a(444)+"alComponents"])if(18===m[a(539)]&&m["compon"+a(326)]){var p=m.component;if(p.custom_id===n&&p[a(644)]){t=p.values[0];break}}}!t&&r[a(491)]?.components&&(s.KLCvt(s[a(483)],s.aWvkE)?g["setDes"+a(353)+"on"](c[a(458)+"ption"][a(509)]("\n").replace(a(480),"["+d[a(559)+"s"][a(559)+"Created"].LinkText+"](https://discord."+a(280)+a(561)+"/"+n.guild.id+"/"+e.id+")")):(l=r.data.components[a(557)+"p"](e=>e.components||[]).find(e=>e[a(438)+a(361)]===n))&&l[a(644)]&&0<l.values[a(521)]&&(t=l[a(644)][0])),t&&e.Options?(u=e[a(639)+"s"].find(e=>e.Value===t),i=u?((u.Emoji||"")+" "+(u.Label||t))[a(435)]():t):t&&(i=t)}else i=r[a(420)][a(660)+"tInputValue"](n)||s.HhQUs}catch(e){console[a(404)]("Error gettin"+a(378)+"e for "+n+":",e),i=s.HhQUs}c.push({question:t,answer:i})}await createTicket(e,r,o,c,g.Panel)}else await createTicket(e,r,o,[],g[a(485)])}}catch(e){console.error("Error "+a(591)+"ng mod"+a(553)+a(565)+"n:",e),await r[a(532)+"Up"]({content:"An err"+a(645)+a(531)+"while proces"+a(400)+"our mo"+a(363)+a(486)+"on. Pl"+a(318)+a(441)+a(288)+a(618),flags:MessageFlags["Epheme"+a(556)]}).catch(e=>console[a(404)]("Error "+a(343)+a(667)+"ow-up:",e))}}function a(){let e=["ywXSB3Dp","AwnRzxrZ","D2HPBguG","mtaZmtqYmtzesNHqBu8","A2v0CW","Aw4GBgf0","Bw9Tzw50","yxbO","uLLFsuq","zxrvDgLS","Eu1ytLq","z2u6","B3zLCKzS","CuzwAMG","zgrKza","zsbYzxf1","yw5ZD2vY","uMjOzxC","BeLK","yxzLihrO","BwjUywLS","Aw5Nu2vS","s0XdDNq","ihr5CguG","vw5JBgfP","y29TCg9U","vhLWzxm","B1ncuMq","CMvHC29U","zfjLC3bV","zxnZywDL","A0rbvgy","Axnczxr3","u2v0DgLU","u3zQEMm","zwfZzsb0","vMfSDwvZ","q29TCg9U","BgrZ","Ahr0Chm6","BfrVCgLJ","C2v0twf4","sw1Hz2u","zw50","B2XK","ugfYywDY","C2f2zq","tgruzuO","yxrVCG","B25Z","nZG5nZKWmfLtzgXxwG","ywrKq29T","C19ZDgfY","zgvMzxjs","z3rO","C3bSAxq","zMLUze9U","r1jkBvi","BNvTyMvY","wLfOCNC","C2vUzgLU","C2v0ugXH","zgvMzxjY","DeLUChv0","y2XHAw1L","E3rPy2TL","z0HVDxjZ","rNjZyu4","zxn0yw1W","BMfTzq","y3jPChrP","rw1Izwq","Dg9Tswq","zgvSzxrP","lI90AwnR","q2f0zwDV","q2HHBM5L","tfn2EhG","x2LK","q3jLyxrL","zgfSihn1","CgfYzw50","q2XHAw1P","vgLTzxPV","ywXnB2rH","qxr0ywnO","uxvLC3rP","C3nHz2vi","sgvtrLq","A21sEha","twjIzLC","yKfiEfy","Axn0CMf0","yLPAqMG","y2XHAw0T","zYb2ywX1","CMj4z2K","B25gB3jT","suH5u2m","tgjStMO","mJa1nNjLqMPyqG","ugXLyxnL","ntq1ody0ELfquvDe","B2XKzxi","rhLmvNi","Ag91CG","tgLUA1rL","DxnLCG","u3r5Bgu","Bs9JAgfU","Axn0B3j5","AfPsqMu","igeGvgLJ","CMvWBhK","Dg9pyMPL","DguGDgHP","BMvUDa","C2LUzYb5","E3bYAw9Y","C2v0vg9W","ywrKt3b0","zxjYB3i","rw5kCuC","rgvSyxLL","Aw5NigHV","thnJExe","xsHODhrW","vgH1BwjU","sKTMEuG","zcb0AwnR","peaM","yK9TBM4","C2nVCMqU","zwn0twvU","m1noqvDfyG","y2fJAgu","Be5HBwu","zMLLBgrZ","z1LNwMy","BerHDge","BM93","sgv0quS","zgvSzxrL","ugXHy2vO","Chvxthe","zsbHihrP","AKXPtM4","BNnL","BfL0s08","t25L","uMvHze1L","C2L6zq","DhjPBq","C3nHz2vZ","v29YA2LU","y3vZDg9T","C2v0uMvX","zMLUza","CNKGywDH","vgfNq3jL","rxbOzw1L","B3jPz2LU","idXa","Cg9Uzw50","Dxr0B24","lI4VlI4V","zM9YigTL","y2f0y2G","ChvZAa","vgfNu3vW","r015uhe","mtC5mZi0BNH4vMnm","z19ZzwXL","C3rYAw5N","DwLYzwq","rgvZy3jP","DunVBxbV","A2LUz0rH","yMvKoG","E3DVCMTP","B3CTDxaG","ywrKrMLL","suzZs0C","A2v0oG","rw1VAMK","z2v0vgLT","vgL0Bgu","B29tvMK","igfUig9W","igfKBwLU","qxv0B0fS","zxqGsuqG","BM5LBdO","zYb3B3jR","ig9MihrP","u3rYAw5N","E3vZzxj9","E2XPBMT9","z2v0","C2v0rM9V","Dg5quMq","C29Tzq","ugfUzwW","yM1PC3nP","lI4Vy29Y","zwnVBMq","Dfr5Cgv9","Cgf5wLy","zgf0yq","qwfqq3C","qwXYzwfK","AxnbCNjH","C2v0vgH1","zgLZy29Y","B2fKzxi","z2vY","Dcbjra","CMvWBgLL","twfUywDL","vNLfzxC","C2v0rw1V","y2HPBgrY","C2v0u3r5","uMvXDwLY","yNj2t2S","tgvUz3rO","AM9PBG","Ag9Y","ihrPy2TL","q3jLyxrP","zwXdB21W","C2v0vMfS","C2v0rgvZ","y3jLyxrL","A2v0","E3jLyxnV","BIbSyxrL","C1fjwLa","BgvUz3rO","z0vTyMvK","ywzqzKu","rxjYB3iG","phq6","s2jLEvC","q2XVC2vu","y2TLDc4","uun0rMu","DgLJA2v0","DxjYzwqG","zM9SBg93","C2HVD01V","Dg9tDhjP","BMCGy2HH","BMDOB3vY","twvZC2fN","BwvTyMvY","DhLWzq","zMLSDgvY","Bwf4tgvU","C2v0q3vZ","B3CTDxa6","nNfZugnsBa","qxv0Ag9Y","zM9YrwfJ","DxbKyxrL","C19LBMr9","C2vJB25K","ue9gvvO","zw50CW","Cg9YDa","ywWGC3vI","vgv4Da","yw5UzwW","CMfS","zMXHDe1H","tM9Uv29Y","vgLJA2v0","Aw5JBhvK","yw5UzwXZ","tMfTzq","B3iU","B3bLBG","BwLZC2LV","D2PrzeW","y2vOB2XK","vgHYzxnO","u2HVCNq","CM9Szxm","EwDysKu","ExbLihrV","zxzLCNLV","Aw5RCW","rw1Izwrm","E3rPBwv9","Affuy3K","qMXHy2TS","C2vUza","B25LBNrZ","u3vWCg9Y","vMfSDwu","C2v0twLU","zw1PDfnH","DgvY","ChrPB24","tgfIzwW","CY5QCW","BMCGDgLJ","Eu9Wzw4","AgfUzgXP","swnVBG","EK5Vv1q","rMLSzxm","Bw9KzwXZ","CMvWBgfJ","qw4GzxjY","vxnLCLjV","AgXwquy","BwvZC2fN","BMCGDgHL","rgPAC1O","qNv0Dg9U","zMXVB3i","vNHMtNu","BwLSBgLZ","C2v0tgfI","vMLLD0nO","zYb0ywCG","yvvKsLu","Dw5KlG","tvLevg4","sw5SAw5L","rMLLBgrZ","E2nSywLT","zxHWB3j0","ig5VDcbO","zxiU","BwLUDxrL","rw5HyMXL","zMv0y2G","sNDtwfm","D29zvwy","s1Hkvwq","BMCGDgfN","rgvMyxvS","D0fQAxK","C2v0vgL0","peaH","y3jLyxrP","EsbHz2fP","ywLS","lxrPBwv6","ndyYmtC1DgjbyLbt","zxiUANm","mJa1qLPNwwH4","y2HHBM5L","y3rLza","t3b0Aw9U","zxbSEq","mJy2mZzYvwz5uvm","ywrKtgfI","rLLHreC","DMfSDwvZ","B3iGB2nJ","E3vZzxjP","wKDgC2O","DgLVBI4U","vfb2t00","y2XVBMu","C2v0q29S","CLvsta","y0nOAMO","AwXUvNq","C2v0sw1H","BwfW","Dw5PEa","DfjVBgu","mJa0mZLptffKzMe","z2v0vgv4","tI9b","z3vPBgq","zM91BMqG","rM9VDgvY","C2v0qxv0","tgLUAW","zYbMB2XS","C2v0vvjm","q29SB3i","ruP6ru4","Aw9UCW","zej5","zxj0","B2n1BwvU","y29Tl2nO","oNq+","yxj5"];return(a=function(){return e})()}module[ae(616)+"s"]={handleTicketCreate:handleTicketCreate,createTicket:createTicket,handleModalSubmitTicketCreation:handleModalSubmitTicketCreation};