function b(i,e){let o=a();return(b=function(e,t){e-=126;let n=o[e];void 0===b.DcITbM&&(b.YxIAJg=function(a){let i="",n="";for(let e=0,t,n,r=0;n=a.charAt(r++);~n&&(t=e%4?64*t+n:n,e++%4)&&(i+=String.fromCharCode(255&t>>(-2*e&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(let e=0,t=i.length;e<t;e++)n+="%"+("00"+i.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(n)},i=arguments,b.DcITbM=!0);var e=e+o[0],r=i[e];return r?n=r:(n=b.YxIAJg(n),i[e]=n),n})(i,e)}function a(){let e=["sw1Hz2u","C2v0tgfI","mteXnZiWyLfhC3jp","zgf0zq","vgH1BwjU","Du9qvMu","vgXXExK","mJa3mdreAKHlv3y","CMvWBgfJ","tMfTzq","E3vZzxjj","ywLS","l3rPy2TL","rM9VDgvY","u3r5Bgu","y2XVC2vK","zxjYB3i","y2HHBM5L","uhjPBwfY","u2vJB25K","C2v0qxv0","ntGZmdjtBgvZs3e","zs9JB25M","mJK4mtmXzKnHv2DA","mteWBefkruTT","z3vPBgq","mMDTzKPvAa","vgL0Bgu","nKfNCuLMCW","qNv0Dg9U","C2v0q29S","DxnLCG","zgLZCgXH","AM9PBG","mJy5nJuXmLj4ANPJua","zc5QCW","C2v0vgH1","C2v0rM9V","rxjYB3iG","EvvNtw0","C2v0q3vZ","wuXTEKC","rw1VAMK","y3jPChrP","Cg5N","CLvsta","u3vJy2vZ","DgvY","C2v0rw1V","y29UFq","Euf2yxrH","mZuXodzVwgTlwgS","ota0mdq1quLXs0zW","AwDmB2fK","BwjUywLS","C2v0vgL0","vgv4Da","E3vZzxj9","yxj5","B3boyva","DK1Rwfu","vxnLCKXL","Cg9Uzw50","DxnLCM5H","AgfUzgXP","zufUzfvW","q29SB3i"];return(a=function(){return e})()}let v=b,{EmbedBuilder,ButtonBuilder,ButtonStyle,ActionRowBuilder}=((()=>{for(var e=b,t=a();;)try{if(208776==+parseInt(e(152))+-parseInt(e(127))/2*(-parseInt(e(191))/3)+parseInt(e(175))/4+-parseInt(e(153))/5*(parseInt(e(129))/6)+-parseInt(e(170))/7+parseInt(e(135))/8+parseInt(e(189))/9*(-parseInt(e(192))/10))break;t.push(t.shift())}catch(e){t.push(t.shift())}})(),require("discor"+v(136))),Ticket=require("../../models"+v(180)+"ts"),getConfig=require("../cor"+v(190)+v(154)+"er").getConfig,config=getConfig();async function handleUserTickets(e,t){var n=v,r={aGxaR:n(178)+"d}",buSLG:"{userI"+n(150),Tlqyy:"png",yUgMm:function(e,t){return e===t},opNaP:function(e,t){return e!==t},OJRUJ:function(e,t){return e!==t},YLmzG:n(173),WOSCP:function(e,t){return e!==t}};try{var a,i,o,u,c,s=await Ticket.find({userId:t.id,guildId:t[n(126)].id,status:{$in:["open",n(183)]}}),d=config[n(162)+"ftDesign"].Embed,l=config[n(162)+"ftDesign"][n(130)];for(a of s){let e=null;try{e=await t[n(126)][n(185)+"ls"].fetch(a[n(185)+"lId"],{force:!0})}catch(e){await Ticket["findOn"+n(166)+n(171)]({ticketId:a.ticketId},{status:"deleted",deletedAt:new Date});continue}e&&(r[n(140)]("vMkXU",n(161))?(i=(new EmbedBuilder)[n(131)+"or"](d[n(167)])["setDes"+n(144)+"on"](d.Description[n(134)]("\n").replace("{userId}",t.id)[n(176)+"e"]("{user}","<@"+t.id+">")[n(176)+"e"](n(178)+"con}",t[n(132)]["displayAvata"+n(146)]({format:"png",dynamic:!0,size:4096}))),d.Title&&""!==d[n(128)]&&i[n(156)+"le"](d.Title.replace(n(178)+"d}",t.id).replace("{user}","<@"+t.id+">").replace(n(178)+"con}",t.user.displayAvatarURL({format:n(145),dynamic:!0,size:4096}))),d.Footer&&d.Footer.Text&&r[n(160)](d.Footer[n(157)],"")&&i[n(138)+n(148)]({text:d[n(181)][n(157)].replace(n(178)+"d}",t.id).replace(n(158),t.user[n(164)+"me"])[n(176)+"e"]("{userIcon}",t[n(132)][n(133)+n(151)+"rURL"]({format:n(145),dynamic:!0,size:4096})),iconURL:d[n(181)].Icon&&""!==d[n(181)].Icon?d.Footer.Icon.replace("{userIcon}",t[n(132)]["displa"+n(151)+"rURL"]({format:n(145),dynamic:!0,size:4096})):null}),d.Author&&d.Author.Text&&r.OJRUJ(d.Author[n(157)],"")&&("bXqnA"===r[n(142)]?l[n(156)+"le"](a.Title.replace(r.aGxaR,e.id)[n(176)+"e"]("{user}","<@"+k.id+">").replace(r.buSLG,i[n(132)][n(133)+"yAvatarURL"]({format:n(145),dynamic:!0,size:4096}))):i[n(188)+"hor"]({name:d.Author[n(157)].replace(n(178)+"d}",t.id).replace(n(158),t[n(132)][n(164)+"me"]).replace("{userIcon}",t.user["displa"+n(151)+"rURL"]({format:"png",dynamic:!0,size:4096})),iconURL:d.Author.Icon&&r.opNaP(d.Author.Icon,"")?d.Author.Icon[n(176)+"e"](n(178)+"con}",t[n(132)]["displayAvata"+n(146)]({format:"png",dynamic:!0,size:4096})):null})),d.Image&&r.WOSCP(d[n(168)],"")&&i.setImage(d.Image),d[n(172)+"ail"]&&""!==d[n(172)+n(179)]&&i[n(137)+"mbnail"](d.Thumbnail[n(176)+"e"](n(178)+n(150),t.user["displa"+n(151)+"rURL"]({format:"png",dynamic:!0,size:4096}))),l&&l[n(177)]&&l[n(143)]&&l.Style?(o={PRIMARY:ButtonStyle[n(186)+"y"],SECONDARY:ButtonStyle["Second"+n(159)],SUCCESS:ButtonStyle[n(147)+"s"],DANGER:ButtonStyle.Danger,LINK:ButtonStyle.Link},u=(new ButtonBuilder)[n(141)+"tomId"]("ticketdelete-"+a.ticketId)[n(169)+"el"](l.Name)[n(149)+"ji"](l[n(143)]).setStyle(o[l[n(182)].toUpperCase()]||ButtonStyle[n(187)+n(159)]),c=(new ActionRowBuilder)["addCom"+n(163)+"s"](u),await e.send({embeds:[i],components:[c]})):await e.send({embeds:[i]})):s[n(137)+n(155)](d.Thumbnail[n(176)+"e"](r.buSLG,l[n(132)]["displa"+n(151)+n(146)]({format:r[n(174)],dynamic:!0,size:4096}))))}}catch(e){console[n(184)](n(139)+n(165)+"ng user tickets:",e)}}module.exports={handleUserTickets:handleUserTickets};