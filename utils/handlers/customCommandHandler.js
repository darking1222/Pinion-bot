let U=b;function b(r,e){let m=a();return(b=function(e,t){e-=382;let n=m[e];void 0===b.kcdBsE&&(b.rEZEoq=function(r){let a="",n="";for(let e=0,t,n,o=0;n=r.charAt(o++);~n&&(t=e%4?64*t+n:n,e++%4)&&(a+=String.fromCharCode(255&t>>(-2*e&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(let e=0,t=a.length;e<t;e++)n+="%"+("00"+a.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(n)},r=arguments,b.kcdBsE=!0);var e=e+m[0],o=r[e];return o?n=o:(n=b.rEZEoq(n),r[e]=n),n})(r,e)}(()=>{for(var e=b,t=a();;)try{if(843809==-parseInt(e(476))+parseInt(e(538))/2+parseInt(e(559))/3+-parseInt(e(412))/4*(parseInt(e(529))/5)+-parseInt(e(460))/6*(parseInt(e(526))/7)+parseInt(e(430))/8+-parseInt(e(517))/9*(-parseInt(e(569))/10))break;t.push(t.shift())}catch(e){t.push(t.shift())}})();let{EmbedBuilder,ActionRowBuilder,ButtonBuilder,ButtonStyle,MessageFlags}=require("discor"+U(487)),moment=require(U(539)+U(514)+U(424)),getConfig=require("../core/configLoader").getConfig,CustomCommand=require(U(410)+U(562)+U(549)+"mCommand"),config=getConfig();function removeTags(e){var t=U,n={DxjwC:t(458)};return e=(e=(e=e.replace(/@everyone/gi,"everyone")[t(453)+"e"](/@here/gi,n[t(567)]))[t(453)+"e"](/<@&\d+>/g,"(role mention removed)"))[t(453)+"e"](/@(?!everyone|here)(\w+)/gi,"$1")}function a(){let e=["zgvSzxrL","y29TBwfU","vhjPz2DL","CMfS","BgrZ","r05cDNu","Dg9mB3DL","zw1Izwq","AM9PBG","tu1ntsbe","y2HHBM5L","BMfTzq","rxbOzw1L","zxjYB3i","B1vZzxi","lI4VlI4V","Dg9Tswq","mJa0mdKWmgjNEez5yq","A1LZrNi","yxrPB24","zM9VDgvY","DgvUDcbH","zM9SBg93","CMvWBhK","zw1IzwrZ","sKvPuMm","q3vZDg9T","Bw1HBMqG","swnVBG","B25L","z2rWD2G","B3iGB2nJ","C29Tzq","zM9YBwf0","zYbJB21T","nZeYodi0oen2s3foCq","uMvWBhK","CK1LC3nH","x2LK","uK9mrv9j","C2v0vvjm","vgv4Da","swjTsLe","whzvz2m","ru1cruq","yw5KihbH","t3b0Aw9U","zxn0yw1W","ywrKq29T","AwTYA1i","C2v0rgvZ","BgvK","B24GBM90","y29SB3i","teLosW","vgLTzxPV","rMLLBgrZ","zhnqCMvM","CMvWBgfJ","sw5SAw5L","B3b0Aw9U","v2L0Aa","uhjPBwfY","AgvYzq","rxvezhe","nKXrvwncwG","sgXoyMi","zM9YrwfJ","zMLLBgrZ","C2v0q3vZ","vgL0Bgu","ywrKrMLL","yNv0Dg9U","y29TCg9U","yxv0Ag9Y","uKvqtfK","rxjYB3iG","igzVDw5K","zw50CW","vMfSDwu","DgLVBJO","ntC1mJKWwLvJDNj2","sgLMsNG","vNnYsve","rgvZy3jP","BMzPz3vY","vgH1BwjU","qxv0Ag9Y","BguGzM9Y","C2vUza","y29UDgvU","zxHWB3j0","zc5QCW","zgjF","sw1Hz2u","C2XPy2u","ChrPB24","z05QuK4","BYbzwvLz","zxbOzw1L","CKnHC2u","DgLVBIbH","AgfUzgXP","BMCGy3vZ","ChjVy2vZ","z3vPBgq","uM9Szxm","D3vlqKG","tM8Gy29U","C2v0vgH1","CMvWBhLu","DNvSyLC","C3rHCNrZ","B24Gy29U","yML2uuO","C2v0u3r5","C3bSAxq","BMCGyNv0","zcbMB3iG","lxrPBwv6","ihrOAxmG","qw4GzxjY","oxLfBhbfCW","tgLUAW","BwjUywLS","DgL0Bgu","BgvUz3rO","Dxn0B20G","DhLWzq","sw52ywXP","CeHbvxa","mteXmJC4mJnkDwLrre0","zMLUze9U","C3r5Bgu","mtvPC0XyveC","BwvTyMvY","C0zZAxm","CMvWBgLL","r2rbDLK","rM9VDgvY","zKnergy","zcbIDxr0","DgzSy2W","mtCWmdy4mLDMu0fAva","Bw9Tzw50","uuLQvK0","ywLS","Aw5JBhvK","q291BNq","uvbUAvi","Axn0","qNv0Dg9U","vhLWzq","C2v0tgfI","l0n1C3rV","Cg9W","uKnos1G","rvbmEMq","zhnfBMfI","rw1VAMK","wK9xBgu","C2HPzNq","tvLVsu0","C2v0rw1V","mti3otq0owf0ELjoAG","Dg9tDhjP","vgLTzxn0","Bw9KzwXZ","BMCGzgiG","Dg9UigLU","rw1Izwq","C2vUzgLU","rhHQD0m","q29TBwfU","mJm3mtyWodbmCLDZCxm","u3r5Bgu","BgLUAW","CMvWBhLF","BIbIDxr0","AwD1CMf0","y3jPChrP","Dgv4Da","DxjYzwqG","DMfSDwu","BwfW","Du9crKG","Aw5SAw5L","ueHzu24","tMfTzq"];return(a=function(){return e})()}function replaceCustomCommandPlaceholders(e,t,n={}){let o=U,r={HlNbb:function(e,t){return e===t},bdqhs:function(e){return e()},VsrIQ:"HH:mm"};if(!e)return"​";let a={guildName:t.guild.name,guildId:t.guild.id,userName:t[o(469)].username,userId:t.author.id,userMention:t.author.toString(),channelName:t.channel[o(406)],channelId:t.channel.id,channelMention:t[o(405)+"l"][o(560)+"ng"](),commandName:n[o(396)+"dName"]||"",longTime:r.bdqhs(moment).tz(config[o(450)+"ne"])[o(428)](o(404)+o(493)),shortTime:r.bdqhs(moment).tz(config[o(450)+"ne"]).format(r[o(478)]),memberCount:t[o(500)][o(530)+o(543)]},m={...a,...n};return Object.keys(m).reduce((t,n)=>{var e=o;if(r[e(461)]("CaiHB","CaiHB")){let e=new RegExp("{"+n+"}","gi");return t.replace(e,m[n]||"")}t=m.isArray(t[e(565)][e(479)+"ption"])?n[e(565)][e(479)+"ption"].join("\n"):k.Embed.Description;l[e(445)+e(386)+"on"](t)},e)}function createButtons(e,c){let a=U,d={bivQJ:function(e,t){return e===t}},g=[];return e.forEach((e,a)=>{var m=b,i={GNBvu:function(e,t,n,o){return e(t,n,o)},WEIaf:function(e,t,n,o){return e(t,n,o)}},l=(new ButtonBuilder)[m(548)+"el"](e.Name);e[m(554)]&&l[m(558)+"ji"](e[m(554)]),d[m(509)](e.Type,m(470))?(l["setCus"+m(411)](m(383)+c+"_"+a),l[m(510)+"le"](ButtonStyle[e[m(570)]]||ButtonStyle[m(457)+"y"])):e.Type===m(449)?"IZwXR"===m(537)?(a=i[m(400)](n,o.Embed.Footer[m(436)],p,{commandName:q}),i=r[m(565)].Footer.Icon?i.WEIaf(s,t.Embed.Footer.Icon,u,{commandName:v}):w,x.setFooter({text:a,iconURL:i})):l[m(510)+"le"](ButtonStyle.Link)[m(435)](e[m(518)]):console.error("Unknow"+m(384)+"on type: "+e[m(547)]),g.push(l)}),0<g.length?(new ActionRowBuilder)[a(443)+"ponents"](g):null}function normalizeDbCommand(e){let t=U;return{type:e[t(523)],text:e.text,Embed:{Title:e.embed?.[t(520)],Description:e[t(402)]?.description||[],Color:e.embed?.[t(448)],Footer:{Text:e[t(402)]?.[t(415)]?.[t(387)],Icon:e.embed?.[t(415)]?.icon},Author:{Text:e.embed?.[t(469)]?.text,Icon:e.embed?.[t(469)]?.icon},Thumbnail:e[t(402)]?.thumbnail,Image:e.embed?.image,Fields:(e.embed?.[t(463)]||[])[t(390)](e=>({Name:e.name,Value:e[t(389)],Inline:e[t(392)]}))},Roles:{Whitelist:e.roles?.whitelist||[]},Options:{DeleteTriggerMessage:e.options?.["delete"+t(397)+t(432)+"ge"],ReplyToUser:e[t(455)+"s"]?.[t(505)+t(409)]},Buttons:(e[t(467)+"s"]||[])[t(390)](e=>({Type:e.type,Name:e.name,Emoji:e.emoji,Style:e[t(528)],Link:e[t(382)],Reply:e[t(418)]?{Ephemeral:e[t(418)][t(494)+"ral"],Text:e[t(418)].text,Embed:e[t(418)][t(402)]?{Title:e.reply[t(402)][t(520)],Description:e[t(418)][t(402)].description||[],Color:e.reply.embed[t(448)],Footer:{Text:e[t(418)].embed[t(415)]?.text,Icon:e[t(418)].embed.footer?.icon},Author:{Text:e.reply[t(402)].author?.[t(387)],Icon:e[t(418)].embed.author?.icon},Thumbnail:e.reply[t(402)]["thumbn"+t(541)],Image:e.reply[t(402)].image,Fields:(e.reply.embed[t(463)]||[])[t(390)](e=>({Name:e[t(406)],Value:e[t(389)],Inline:e[t(392)]}))}:null}:null})),_isFromDb:!0,_id:e[t(433)]}}async function processCustomCommands(e,s){let c=U,u={ikrkR:function(e,t,n,o){return e(t,n,o)},SAUcP:c(506),HifJx:function(e,t){return e(t)},SAcQt:c(439),gNjRN:"cJoDj",fnaIX:c(425),EePPQ:function(e,t){return e===t},GdAvY:c(502),Yqsrm:"XvUgc",MYoIM:function(e,t){return e===t},QGIJx:"QheYa",kFISE:"Error "+c(499)+"sing c"+c(522)+c(396)+"ds:"};try{if(!config)return;if(s.author.bot||!s.content[c(507)+c(456)](config.CommandsPrefix))return;const b=s.content[c(490)](config[c(568)+c(452)+"ix"][c(521)]).trim().split(/ +/),B=b[c(556)]()[c(401)+"rCase"]();let t=null;if(!(t=config["Comman"+c(553)+c(446)]?config[c(421)+c(568)+"ds"]?.[B]:t))if(u.SAUcP===c(391)){let e=a._isFromDb?c(488)+i._id+"_"+l:e,t=t(o.Buttons,e);t&&(q[c(468)+c(473)]=[t])}else try{let e=await CustomCommand[c(527)+"e"]({guildId:s[c(500)].id,name:B["toLowe"+c(495)](),enabled:!0}).lean();e&&(t=u[c(477)](normalizeDbCommand,e))}catch(e){console[c(408)](c(471)+"fetchi"+c(498)+"tom co"+c(422)+"from database:",e)}if(!t)return;let r=s[c(530)].roles.cache[c(390)](e=>e.id),a=!0;if(t[c(501)]&&Array.isArray(t[c(501)]["Whitel"+c(545)])&&0<t[c(501)].Whitelist[c(521)]){let e=t.Roles["Whitel"+c(545)].filter(e=>e&&e!==c(434)+"D");0<e.length&&(a=e.some(e=>r[c(542)+"es"](e)))}if(!a)return;let i={};if(t[c(523)]===u.SAcQt||"BOTH"===t[c(523)]){let r=(new EmbedBuilder).setColor(t[c(565)]?.Color||null);if(t.Embed?.Title&&r.setTitle(replaceCustomCommandPlaceholders(t[c(565)][c(465)],s,{commandName:B})),t[c(565)]?.["Descri"+c(491)]&&0<t[c(565)].Description[c(521)]){let e=t[c(565)].Description[c(390)](e=>replaceCustomCommandPlaceholders(e,s,{commandName:B}))[c(403)]("\n");r["setDes"+c(386)+"on"](e)}var d,g,f,C;if(t.Embed?.Footer&&t[c(565)][c(534)].Text&&(d=replaceCustomCommandPlaceholders(t[c(565)].Footer.Text,s,{commandName:B}),g=t.Embed[c(534)][c(423)]?replaceCustomCommandPlaceholders(t.Embed[c(534)].Icon,s,{commandName:B}):void 0,r.setFooter({text:d,iconURL:g})),t[c(565)]?.Author&&t.Embed[c(482)].Text){if("UkJiV"===u[c(492)])return;var h=replaceCustomCommandPlaceholders(t.Embed.Author[c(436)],s,{commandName:B}),v=t[c(565)].Author[c(423)]?replaceCustomCommandPlaceholders(t.Embed[c(482)].Icon,s,{commandName:B}):void 0;r.setAuthor({name:h,iconURL:v})}t.Embed?.[c(481)+"ail"]&&r.setThumbnail(u.ikrkR(replaceCustomCommandPlaceholders,t.Embed[c(481)+"ail"],s,{commandName:B})),t[c(565)]?.[c(489)]&&r.setImage(replaceCustomCommandPlaceholders(t[c(565)][c(489)],s,{commandName:B})),t.Embed?.Fields&&t[c(565)].Fields.forEach(e=>{var t,n,o=c;e.Name&&e[o(474)]&&(t=replaceCustomCommandPlaceholders(e[o(394)],s,{commandName:B}),n=u[o(444)](replaceCustomCommandPlaceholders,e.Value,s,{commandName:B}),r[o(466)+o(399)]({name:t,value:n,inline:e[o(454)]??!1}))}),i[c(419)]=[r],t.Buttons&&Array.isArray(t.Buttons)&&(f=t._isFromDb?c(488)+t[c(433)]+"_"+B:B,C=createButtons(t[c(546)+"s"],f))&&(i.components=[C])}if("TEXT"!==t[c(523)]&&"BOTH"!==t.type||!t[c(387)]||(u.fnaIX===c(425)?i.content=replaceCustomCommandPlaceholders(t[c(387)],s,{commandName:B}):b=B[c(427)](e=>r[c(542)+"es"](e))),i.content||i[c(419)]&&!u.EePPQ(i[c(419)][c(521)],0))try{if(u[c(533)]!==u[c(533)])t[c(504)+"mbnail"](u.ikrkR(r,a[c(565)]["Thumbn"+c(541)],i,{commandName:l}));else if(t[c(441)+"s"]?.ReplyToUser?await s.reply(i):c(438)===u.Yqsrm?await s.channel[c(484)](i):(a[c(464)+c(411)]("reply_"+i+"_"+l),m[c(510)+"le"](n[o.Style]||p[c(457)+"y"])),t[c(441)+"s"]?.["DeleteTrigge"+c(432)+"ge"])try{await s[c(395)]()}catch(e){if(u[c(557)]("xFFwa",u.QGIJx))return"​";console[c(408)](c(471)+"deleting message: "+e)}}catch(e){console[c(408)]("Error "+c(566)+"g message:",e)}}catch(e){console[c(408)](u.kFISE,e)}}async function handleButtonInteraction(m){let l=U,c={ZOWle:l(552),idgFa:function(e,t){return e(t)},QIjVM:"PHYSn",ZaWkp:l(471)+"fetchi"+l(563)+"comman"+l(513)+"button:",pHAUp:l(568)+"d not found:",lwMKy:function(e,t){return e<t},JEiRc:l(418),fJQQs:l(524)+l(536)+l(508)+"figuration",IbmJQ:"xebiA",fCDDf:function(e,t){return t<e},kYsFr:"Error "+l(497)+l(512)+l(564)+"teraction:"};if(m.isButton()){const[t,...w]=m.customId[l(511)]("_");if(t===l(418))if(l(544)!==c[l(555)])try{let o=c.idgFa(parseInt,w[l(550)]()),a=w;if(a[l(521)]){let n,t="db"===a[0];if(t){let t=a[1];try{let e=await CustomCommand.findById(t).lean();if(!e){if(c[l(540)]===l(393))return void await m[l(418)]({content:"Command configuration not found",flags:MessageFlags[l(407)+"ral"]});w=o.CustomCommands?.[a]}n=normalizeDbCommand(e),a.splice(0,3)}catch(e){return console[l(408)](c.ZaWkp,e),void await m.reply({content:"Error loadin"+l(429)+"and",flags:MessageFlags[l(407)+l(398)]})}}else if(!(n=config["Custom"+l(568)+"ds"][a[0]]))return console[l(408)](c[l(525)],a[0]),void await m[l(418)]({content:"Command conf"+l(385)+"ion not found",flags:MessageFlags["Epheme"+l(398)]});for(let e=t?0:1;c.lwMKy(e,a.length);e+=2)if(a[e]===c[l(420)]){var u=parseInt(a[e+1]);if(!n.Buttons?.[u]?.Reply)return console[l(408)]("Invali"+l(536)+l(508)+"figura"+l(496)+"t depth:",e),void await m.reply({content:c.fJQQs,flags:MessageFlags[l(407)+l(398)]});n=n[l(546)+"s"][u].Reply}var e=n[l(546)+"s"]?.[o];if(e&&"REPLY"===e[l(547)]&&e.Reply){var d,f,C,v=e[l(431)],b={ephemeral:v.Ephemeral??!1};if(v.Embed){let n=new EmbedBuilder;v[l(565)].Color&&n.setColor(v.Embed.Color),v.Embed[l(465)]&&n.setTitle(v.Embed[l(465)]),v.Embed["Descri"+l(491)]&&(l(459)===c[l(437)]?i.text&&(b[l(485)+"t"]=p(q.text,r,{commandName:s})):(d=Array.isArray(v[l(565)].Description)?v.Embed[l(479)+l(491)].join("\n"):v[l(565)][l(479)+"ption"],n["setDes"+l(386)+"on"](d))),v.Embed[l(534)]?.Text&&n.setFooter({text:v[l(565)][l(534)][l(436)],iconURL:v.Embed[l(534)][l(423)]}),v[l(565)].Author?.[l(436)]&&n.setAuthor({name:v.Embed.Author.Text,iconURL:v[l(565)].Author.Icon,url:v.Embed.Author.URL}),v.Embed.Image&&n.setImage(v.Embed.Image),v[l(565)][l(481)+"ail"]&&n[l(504)+l(519)](v[l(565)].Thumbnail),v.Embed[l(561)+"amp"]&&n.setTimestamp(),c[l(535)](v.Embed[l(451)]?.[l(521)],0)&&v[l(565)].Fields[l(462)+"h"](e=>{var t=l;e.Name&&e[t(474)]&&n[t(466)+t(399)]({name:e[t(394)],value:e[t(474)],inline:e.Inline??!1})}),b.embeds=[n]}v.Text&&(b[l(485)+"t"]=v.Text),0<v.Buttons?.length&&(f=[...w,l(418),o][l(403)]("_"),C=createButtons(v[l(546)+"s"],f))&&(b["compon"+l(473)]=[C]),b[l(485)+"t"]||b[l(419)]&&0!==b.embeds.length||(b[l(485)+"t"]=l(503)+l(416)+"vailab"+l(483)+l(515)+"option."),m[l(532)+"d"]?await m[l(417)+"Up"](b):await m[l(418)](b)}else console[l(408)](l(524)+"d button configura"+l(475),{buttonIndex:o,config:e}),await m.reply({content:l(546)+" configurati"+l(447)+l(472),flags:MessageFlags[l(407)+"ral"]})}else console[l(408)]("Invalid comm"+l(440)+"th"),await m.reply({content:"Invalid command co"+l(480)+l(414),flags:MessageFlags["Epheme"+l(398)]})}catch(n){if(console[l(408)](c[l(413)],n),!m.replied)if(l(531)!==l(551))await m[l(418)]({content:l(516)+l(426)+l(388)+"while "+l(499)+"sing your request.",flags:MessageFlags[l(407)+l(398)]});else if(o[l(394)]&&p.Value){let e=n(B[l(394)],e,{commandName:t}),t=E(F.Value,G,{commandName:H});I[l(466)+l(399)]({name:e,value:t,inline:J.Inline??!1})}}else w=g(h)}}module[U(486)+"s"]={processCustomCommands:processCustomCommands,handleButtonInteraction:handleButtonInteraction,createButtons:createButtons,removeTags:removeTags,replaceCustomCommandPlaceholders:replaceCustomCommandPlaceholders};