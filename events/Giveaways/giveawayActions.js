let a8=b;function b(i,e){let r=a();return(b=function(e,a){e-=442;let n=r[e];void 0===b.AKKPXm&&(b.qLWwOg=function(i){let r="",n="";for(let e=0,a,n,t=0;n=i.charAt(t++);~n&&(a=e%4?64*a+n:n,e++%4)&&(r+=String.fromCharCode(255&a>>(-2*e&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(let e=0,a=r.length;e<a;e++)n+="%"+("00"+r.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(n)},i=arguments,b.AKKPXm=!0);var e=e+r[0],t=i[e];return t?n=t:(n=b.qLWwOg(n),i[e]=n),n})(i,e)}(()=>{for(var e=b,n=a();;)try{if(695218==-parseInt(e(455))*(parseInt(e(769))/2)+-parseInt(e(523))/3*(-parseInt(e(476))/4)+-parseInt(e(683))/5+parseInt(e(699))/6+parseInt(e(551))/7*(parseInt(e(800))/8)+-parseInt(e(684))/9*(-parseInt(e(633))/10)+parseInt(e(714))/11*(-parseInt(e(771))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}})();let{EmbedBuilder,ButtonBuilder,ActionRowBuilder,ButtonStyle,MessageFlags}=require(a8(467)+a8(459)),fs=require("fs"),yaml=require(a8(682)+"l"),client=require(a8(565)+a8(656)+"js"),Giveaway=require("../../models/Giveaway.js"),UserData=require("../../models/UserD"+a8(469));function a(){let e=["Buvbrfm","rw1Izwrg","DxjYzwqG","ChjPEMu","iZaWrKyW","ywrKq29T","C0zPzwXK","C2v0u3r5","yxLtDgfY","zgfUz2vY","B3vUDefN","C2fNzvv0","Cg9Uzw50","zw50CMfU","yxDHEtOG","y2HHBM5L","zMv0y2G","tgLZDa","qNLgAwvS","Bwf0y2G","A2v5CW","CYbKzwXL","zYbetsb0","uhjPEMu","ywrKrMLL","Dg9Tswq","CMvOz1a","yxKGsuq6","C24NDcbL","yxrPBMCG","igHHCYbL","zwrPDa","AxrLCW","y0fYsK8","CM9SzuLK","ndeYmJjlv2Pwt1m","y29SBgvJ","mtj1EgL4yxO","CxvLC3qU","Ag91Dcb3","v2L0Aa","B290zxjj","zxnZywDL","sw5JB3jY","qwDL","DgvgAwvS","zMLUze9U","yxrUy0y","t3rpzeW","peaM","BKrHDgu","CMvWBgfJ","BgrZ","pIaO","B1ngCwm","CgvYy2vU","s1Lkwhy","DwT1q2y","BeLK","zxjYB3i","sxblC0u","BNrnyw5H","E2vUDhjH","CNn9","zxHUvMi","rMLLBgrZ","ntzlt1n2sw4","E2n1CNjL","uuLzwKO","DwnJzxnZ","Bs83u2XT","zM9SBg93","BwLUsw52","CKLJB259","igzVDw5K","rM9VDgvY","s3v5weK","Aw11BufJ","BYb3Aw5U","Aw5UzxjZ","DM1oDM8","v2LUBMvY","B3f0wvu","BMLTDw1t","zvDPBM5L","C2vUza","y291BNrb","AxzLyxDH","Axn0uM9S","z0LXy1e","DhrVBG","zMHnD3q","uvvNB0S","igzVCM1H","BM90igzV","BwjUywLS","u2HVD1rO","DfjVBgvZ","B2XVCG","DgvK","BMfTzq","rw1Izwrj","C2v0vgL0","oLi+","BgvUz3rO","DgXQyxm","ChvZAa","uLjHlNbU","rw1Izwru","z3rpvLy","yxLoB3rg","y3jPChrP","rxjYB3iG","qgv2zxj5","zxLNuNq","BcbUB3qG","B3rWuwq","DeLK","BwfNzq","sMvSDNO","BwLUu2vY","yxK6y3jL","BgXLy3rV","yxLjza","C2v0","ywDLihDH","A1fcrKK","ENf6DMS","u2HVD0HV","y29U","icHTzxnZ","C2vUzgLU","C3fdyuy","rvPVqvK","Ehzqq3O","C2v0sw1H","ywjSzwq","r2L2zwf3","zxi6","rxbOzw1L","Dg9pyMPL","zsbNAxzL","zNjVBq","DxzwDwm","zwrPDfjL","D2LUBMvY","ieLeoG","B3iGB2nJ","y2f0y2G","C2HVD19L","q29SB3i","ownyqLjrDa","yxr1Bgf0","ywDL","qNv0Dg9U","zc5QCW","zcbZDwnJ","zufUzfvW","CMvWBgLL","sw52ywXP","CgPMqKG","uvDszxy","BwLU","zgLZy29Y","vxbIDey","yxrHlMPZ","BMvKr2L2","Bg9Nz2LU","ihrVihvW","B3vUza","C29Tzq","C2v0tgfI","mZq0zwrxs1Pq","u0vdt05e","wun1r0G","B25MAwDm","Dfrwvvm","Du1bsMi","BgX5lG","weTMAgO","qvjz","BMv4Da","BgXLza","ywnRBgLZ","y2fSy3vS","BgfZDa","yLnqDKK","zxH0","phq6","zxbSBhy","z2v0vgLT","u2vJB25K","C3vJy2vZ","y29Yzs9J","q2HHBM5L","CMvWBhK","lIa8qa","yw5UzwXj","twvZC2fN","AwvKihvZ","ugTNEvC","lY9PlMLT","sK55y3a","zxj2zxjk","rw50CMLL","Ag9ZDgvK","zw50CMLL","rgvZy3jP","C2fNzq","BNrYAwvZ","z3vPBgrj","zuvouhu","Dg9gAxHL","BwfW","C2f2zq","zuzPzwXK","B3rLCG","v2HPDgvS","DhjPzxm","ntm0m2rZsMDKEa","zu1LC3nH","ywLSvxjS","rw1IzwrZ","Aw9UoG","q2PhvKG","rw5Kzwrh","BNrYyw50","rhbUyNq","vgHPCYbN","zw5KAw5N","wMnju2S","BfjPzLi","y2fJAgu","CMvYB2XS","yxrPB25f","qw4GzxjY","yMXHy2TS","z2v0","C2v0rgLZ","q0fhrw0","rgfUz2vY","y1vguLK","wevfALq","tg9NC0nO","u2HVD1DO","ihTNAxzL","zw1IzwrZ","mtmYote5nurAzMDREG","CM9Szxm","q2fSy3vS","u2HVD01P","B290zxju","y3vZDg9T","zw1LBNrZ","rgLYzwn0","r1fRyMq","AwvSza","r3vPBgqG","u2HVD0vU","BMvYCYbZ","wevJDgK","lI4VlI4V","rhrwvwy","CMfS","u3vJy2vZ","AwnPCgf0","zfrPBwvZ","BYb0AguG","yxLmB2DZ","yxLZ","ChjLDG","DgfTCa","y2vZC2z1","tM8GB25L","AgfUzgXP","vKHoAxK","shfvCLK","DxnLCW","z2L2zwf3","DgvY","Dgn3sM8","DhjHBNrZ","C2v0rw1V","rMfPBgvK","B2yGDgHL","vvPLuMy","zMXVB3i","zw5KzwqG","zgvMzxjY","zhnAywy","z3vPBgrZ","s1DnDKi","Bw9KzwXZ","AwXZlMPZ","q2HLy2Tq","yxLfBMrL","zwXLy3rL","rLrvAu8","yNbuy2q","yxDHEuLK","EKDiy2i","BwvTyMvY","AhvTyM5H","BMrLzdO","C3qU","u2HVD0LT","ihrOAxmG","Du9huw0","E3bYAxPL","qwn0AxzL","zgf0zq","BwLUqwnJ","ENb4DhK","icHJAgfU","BfDdqLa","Aw91CYb3","yxj5","yxKGywXY","BMLTDw1b","zw50CW","q291BNq","A3zyv1e","rw5KC0LU","vgv4Da","rw1Izwq","Dw5KoG","sg9ZDgvK","CKnHC2u","zuzeuwG","nJC3nZeZmhbTwhnnEq","uhjPBwfY","EgLZDc4","tgvHDMvt","B2fKzxi","BsbjBNzP","zMLUza","C2v0q3vZ","twLUAw11","rxH0CMff","zYbNAxzL","AM9PBG","C2fNzxm","CgX5","Aw5JBhvK","zxjVBgW6","u3r5Bgu","zwn0uM9S","Aw9UtwvZ","zxnZzNvS","yxLszxjV","y2HHBMnL","zMv0y2HP","Aw5KzxGU","Aw9UCYb0","qMXHy2TS","ywLS","zhnjBG","BwvZC2fN","t3zKzKG","C2v0vgH1","vhzsuxi","CfLMzKi","Dhn9","B3vYihjL","Aw5NihrO","tM9qyxj0","vgH1BwjU","sM9PBKrH","C2v0rM9V","zxmP","yxKGzw5K","ChrPB24","rw5HyMXL","swXpq0u","svvjqw8","DMvYsM9P","vNPrCgm","BvLrt1O","ANmTEwfT","mZyYmZC1nuLWDMnRuW","oxnZA3zWtW","C2v0rgvZ","zMLSDgvY","u2HVD1rP","qK9jz2G","Dw1IBMfP","y29TCg9U","rw1Izwrd","DxnLCG","yxDHEsb3","zLjmt0S","BNrZtgLZ","C3rHCNrZ","u2HVD0jS","DgXL","nJqWode2mLzSyMXVCG","ChjVy2vZ","D2HPBguG","Aw5eyxrL","AfL1BMO","EsbOyxmG","zMLYC3q","AgfUzgXL","DuzPAxO","Dw50twvZ","BufJy291","z3vPBgq","zxH0CMff","rw1VAMK","E3DPBM5L","mtC4ndG5nJnQCLnvq2O","yxDHEs4","C3bSAwnL","D2HPDgvS","ywrKB25m","BvnLDMvY","zIb0AguG","B3iGzg9L","qM9SzfO","vgL0Bgu","igvUDhjP","ChjPBwfY","BNrbz2vg","BvrNC2y","zw5K","C2v0q29S","C19JB3vU","DxrPBhmV","BM93","yxKGD2LU"];return(a=function(){return e})()}function getButtonStyle(e){var a=a8;switch(e["toLowe"+a(631)]()){case a(725)+"y":return ButtonStyle[a(634)+"y"];case"second"+a(620):return ButtonStyle[a(495)+a(620)];case a(496)+"s":return ButtonStyle[a(568)+"s"];case{KYJXv:"danger"}[a(790)]:return ButtonStyle[a(544)];default:return ButtonStyle[a(568)+"s"]}}function parseColor(e){var a=a8;return"string"==typeof e&&e[a(696)+a(774)]("#")?{tljas:function(e,a,n){return e(a,n)}}[a(839)](parseInt,e[a(785)+"e"]("#",""),16):e}function replacePlaceholders(e,r={}){let s=a8,a={bfvRy:function(e,a){return e===a},mTgsf:s(664)};if(!e){if(!a.bfvRy(a[s(727)],"zqXqf"))return"​";h.set(i.entrantId,j.get(k[s(747)+s(851)])+l)}return Object[s(754)](r).reduce((e,a)=>{var n=s,t=new RegExp("{"+a+"}","gi");return e[n(785)+"e"](t,r[a]||"")},e)}function parseDuration(e){var a,n=a8,t={PEYcb:function(e,a){return e(a)},sqCaF:function(e,a){return e*a},OFffY:function(e,a){return e*a},XaUJP:function(e,a){return e*a},eFDQh:function(e,a){return e*a},JeAcA:function(e,a){return e*a}},e=e[n(753)](/^(\d+)([mhdwy])$/);return e?(a=t.PEYcb(parseInt,e[1]),e=e[2],a*{m:6e4,h:t[n(866)](t.OFffY(60,60),1e3),d:t.XaUJP(86400,1e3),w:1e3*t[n(632)](60*t.XaUJP(7,24),60),y:60*t.sqCaF(t.JeAcA(365,24),60)*1e3}[e]):null}let Invite=require(a8(565)+a8(596)+"/inviteSchema"),{getConfig,getLang}=require("../../"+a8(731)+a8(497)+a8(479)+"oader.js"),getLogChannel=require(a8(565)+a8(731)+a8(706)+"rs/mes"+a8(745)+a8(597)).getLogChannel,config=getConfig(),lang=getLang();async function getUserInviteCount(e,a){var n,t=a8;let i=0;for(n of await Invite[t(639)]({guildID:e,inviterID:a}))i+=n.uses;return i}let giveawayActions={handleButtonInteraction:async a=>{const n=a8,e=n(453)+n(530)+"s";try{var t;a.customId==="check_"+n(789)+"t"?(t=await Giveaway.findOne({messageId:a[n(661)+"e"].id,channelId:a[n(749)+"lId"],ended:!1}))?await giveawayActions[n(488)+"ateChance"](a,t):await a[n(499)]({content:n(532)+"iveawa"+n(704)+n(591)+n(721)+n(762)+n(635),flags:MessageFlags[n(443)+"ral"]}):a[n(556)+"Id"]===e&&await giveawayActions.showEntrants(a)}catch(e){console[n(793)]("Error "+n(578)+"ng button interact"+n(527),e),await a[n(499)]({content:n(539)+n(451)+n(736)+n(701)+n(700)+"sing y"+n(667)+n(772),flags:MessageFlags["Epheme"+n(567)]})}},startGiveaway:async(e,a)=>{const n=a8,t={BnIYa:"primary",uvVuc:n(796)+n(695)+"t}",epllv:function(e,a){return e+a},uFiiz:function(e,a){return e+a},dsZaf:function(e,a){return e!==a},tdWyN:function(e,a,n){return e(a,n)},BoldZ:function(e,a){return e/a},bVgxs:function(e,a){return e+a},fhMwt:function(e,a){return a<e},njzmL:function(e,a,n){return e(a,n)},HqUrY:n(681),zrKWG:"pauCm",fCutJ:"check_percent",IpKsE:"NhRwt",hrBDV:"cwRPg",KWMvB:function(e,a){return e(a)},ovfnz:n(477)+n(484),QgoMk:n(453)+"ntrants",iJjkm:n(510)+"s_count",cArJO:n(515),shRKA:function(e,a){return e===a},Dpnbt:n(738)+"0"},{giveawayId:i,time:r,prize:s,channel:o,winnerCount:l,whitelistRoles:c,blacklistRoles:w,minServerJoinDate:g,minAccountAge:v,minInvites:d,minMessages:u,hostedBy:y,notifyUsers:f}=a,m="string"==typeof r?parseDuration(r):r;if(null===m)throw new Error(n(463)+"d time"+n(827)+"t");var h=e[n(710)][n(834)],B="<t:"+Math.floor(t[n(493)](Date.now(),m)/1e3)+n(837),G=t[n(707)](Date.now(),m),p=c[n(517)](e=>n(783)+e+">").join(", "),E=w[n(517)](e=>n(783)+e+">")[n(644)](", "),h={prize:s,serverName:h,hostedBy:y,whitelistRoles:p,blacklistRoles:E,channel:""+o,winnerCount:l,endsIn:B,minInvites:d},p=new EmbedBuilder,E=replacePlaceholders(lang.Giveaways.Embeds.ActiveGiveaway[n(757)],h),B=(config.Giveaways[n(628)][n(613)+n(871)+"ay"][n(687)+"tle"]&&p[n(685)+"cription"](E),p.setColor(config.Giveaways.Embed["Active"+n(871)+"ay"][n(691)+n(832)]),[]);let z=0;if(config[n(871)+n(573)].Embed.ActiveGiveaway.ShowHostedBy&&(t.dsZaf(n(694),"PlTdx")?B.push({name:t.tdWyN(replacePlaceholders,lang[n(871)+n(573)].Embeds.ActiveGiveaway[n(630)+n(752)+"d"],h),value:""+y,inline:!0}):i.Giveaways[n(628)].ActiveGiveaway[n(835)+"mage"]&&o.setImage(l["Giveaw"+n(573)][n(628)]["Active"+n(871)+"ay"].EmbedImage)),config[n(871)+"ays"][n(628)].ActiveGiveaway["ShowEn"+n(660)]&&B[n(840)]({name:replacePlaceholders(lang["Giveaw"+n(573)][n(526)]["Active"+n(871)+"ay"][n(626)+"Field"],h),value:"<t:"+Math[n(590)](t[n(722)](t.bVgxs(Date[n(732)](),m),1e3))+n(837),inline:!0}),config[n(871)+n(573)][n(628)]["Active"+n(871)+"ay"].ShowEntries&&B.push({name:replacePlaceholders(lang[n(871)+n(573)][n(526)]["Active"+n(871)+"ay"][n(508)+"sField"],h),value:"**0**",inline:!0}),config["Giveaw"+n(573)][n(628)][n(613)+n(871)+"ay"].ShowWhitelistRoles&&c&&t[n(825)](c.length,0)&&(E=c.map(e=>"<@&"+e+">")[n(644)]("\n"),B[n(840)]({name:replacePlaceholders(lang[n(871)+"ays"][n(526)][n(613)+"Giveaway"][n(521)+n(822)+n(519)],h),value:E,inline:!0}),z++),config[n(871)+n(573)][n(628)][n(613)+n(871)+"ay"][n(697)+n(487)+"tRoles"]&&w&&0<w[n(838)]&&(E=w.map(e=>"<@&"+e+">").join("\n"),B[n(840)]({name:t.njzmL(replacePlaceholders,lang[n(871)+"ays"][n(526)]["Active"+n(871)+"ay"][n(658)+"istRol"+n(519)],h),value:E,inline:!0}),z++),config["Giveaw"+n(573)].Embed["Active"+n(871)+"ay"][n(554)+n(817)+n(507)+"oinDate"]&&g&&(E=new Date(g),E=n(492)+Math.floor(E[n(494)+"e"]()/1e3)+":D>",B.push({name:replacePlaceholders(lang[n(871)+"ays"].Embeds.ActiveGiveaway["Minimu"+n(719)+n(671)+n(779)+"d"],h),value:E,inline:!0}),z++),config[n(871)+n(573)][n(628)].ActiveGiveaway[n(554)+n(622)+"ccount"+n(778)]&&("atMVv"===n(566)?(E=(r["Giveaw"+n(573)][n(628)][n(529)+"iveaway"][n(735)+"ooterText"]||n(871)+"ay ID: {give"+n(603)+"}")[n(785)+"e"](/{giveawayId}/g,s["giveaw"+n(857)]),o["setFoo"+n(583)]({text:E,iconURL:l.Giveaways[n(628)].EndedGiveaway[n(735)+n(775)+n(863)]})):v&&("kvXWQ"===n(625)?(E=new Date(v),E="<t:"+Math[n(590)](E[n(494)+"e"]()/1e3)+":D>",B.push({name:replacePlaceholders(lang[n(871)+n(573)].Embeds["Active"+n(871)+"ay"][n(641)+n(709)+n(726)+"ield"],h),value:E,inline:!0}),z++):t.setEmoji(i.Giveaways.Embed[n(613)+"Giveaway"].Button[n(562)+"trantsList"]["Button"+n(712)]))),0<d&&(B[n(840)]({name:n(641)+n(638)+"tes",value:""+d,inline:!0}),z++),t[n(825)](u,0)&&(n(678)===t[n(580)]?t.setThumbnail(i["Giveaw"+n(572)]["Giveaw"+n(742)+n(833)][n(628)].ThumbnailUrl):(B.push({name:n(641)+"m Messages",value:""+u,inline:!0}),z++)),2===z&&B.push({name:"​",value:"​",inline:!0}),p[n(758)+n(786)](B),config[n(871)+n(573)].Embed.ActiveGiveaway.ShowImage&&config.Giveaways.Embed[n(613)+"Giveaway"]["EmbedI"+n(852)]&&(t[n(593)](n(589),"UZeRf")?(i[n(840)]({name:"Minimu"+n(638)+"tes",value:""+r,inline:!0}),s++):p.setImage(config[n(871)+"ays"].Embed[n(613)+n(871)+"ay"]["EmbedI"+n(852)])),config[n(871)+n(573)].Embed.ActiveGiveaway.ShowThumbnail)if("pauCm"!==t.zrKWG)switch(o.toLowerCase()){case t.BnIYa:return d.Primary;case"secondary":return u[n(495)+n(620)];case n(496)+"s":return y[n(568)+"s"];case n(743):return f[n(544)];default:return m[n(568)+"s"]}else config.Giveaways[n(628)][n(613)+"Giveaway"]["EmbedT"+n(606)+"il"]&&p[n(663)+n(829)](config[n(871)+n(573)][n(628)][n(613)+n(871)+"ay"][n(842)+n(606)+"il"]);config["Giveaw"+n(573)].Embed[n(613)+n(871)+"ay"]["ShowFo"+n(520)]&&config[n(871)+"ays"][n(628)].ActiveGiveaway[n(735)+"ooterIcon"]&&(E=(config[n(871)+n(573)].Embed[n(613)+"Giveaway"]["EmbedF"+n(555)+n(491)]||n(871)+"ay ID: {give"+n(603)+"}")[n(785)+"e"](/{giveawayId}/g,i),p["setFoo"+n(583)]({text:E,iconURL:config[n(871)+"ays"][n(628)][n(613)+"Giveaway"]["EmbedF"+n(775)+"con"]})),config["Giveaw"+n(573)][n(628)][n(613)+"Giveaway"][n(687)+n(698)]||config["Giveaw"+n(573)][n(628)][n(613)+n(871)+"ay"]["ShowTh"+n(689)+"l"]||config.Giveaways[n(628)][n(613)+"Giveaway"][n(862)+"stedBy"]||config[n(871)+"ays"].Embed.ActiveGiveaway["ShowEn"+n(660)]||config[n(871)+n(573)][n(628)]["Active"+n(871)+"ay"][n(562)+n(522)]||config.Giveaways.Embed.ActiveGiveaway[n(548)+"itelis"+n(831)]||config.Giveaways[n(628)][n(613)+n(871)+"ay"]["ShowBl"+n(487)+"tRoles"]||config[n(871)+n(573)].Embed["Active"+n(871)+"ay"].ShowMinimumServerJoinDate||config["Giveaw"+n(573)][n(628)][n(613)+"Giveaway"].ShowMinimumAccountAge||config.Giveaways[n(628)].ActiveGiveaway[n(609)+n(457)]||config["Giveaw"+n(573)][n(628)][n(613)+n(871)+"ay"]["ShowFo"+n(520)]||p["addFie"+n(786)]({name:"​",value:"​"});B=[(new ButtonBuilder).setLabel(config.Giveaways.Embed[n(613)+"Giveaway"].Button["JoinBu"+n(824)][n(458)+"Text"]).setStyle(getButtonStyle(config[n(871)+n(573)][n(628)]["Active"+n(871)+"ay"][n(458)].JoinButton[n(458)+n(649)]))[n(640)+n(759)]("join_g"+n(821)+"y").setEmoji(config.Giveaways[n(628)][n(613)+n(871)+"ay"][n(458)].JoinButton[n(458)+"Emoji"]),(new ButtonBuilder)[n(475)+"el"](config["Giveaw"+n(573)].Embed.ActiveGiveaway[n(458)][n(598)+"ercent"]["Button"+n(627)])[n(741)+"le"](getButtonStyle(config["Giveaw"+n(573)][n(628)]["Active"+n(871)+"ay"][n(458)][n(598)+"ercent"][n(458)+"Style"]))["setCus"+n(759)](t.fCutJ)[n(586)+"ji"](config["Giveaw"+n(573)][n(628)][n(613)+n(871)+"ay"].Button[n(598)+"ercent"][n(458)+n(712)])],config.Giveaways[n(628)]["Active"+n(871)+"ay"][n(458)][n(562)+n(585)+"List"]&&(t[n(794)]===t.hrBDV?(E=i.Description.join("\n").replace(t[n(447)],r[n(644)]("\n")),s.setDescription(E)):(E=(new ButtonBuilder).setLabel(config[n(871)+"ays"].Embed[n(613)+"Giveaway"].Button["ShowEn"+n(585)+n(751)][n(458)+"Text"]||"Show Entrants").setStyle(t[n(595)](getButtonStyle,config["Giveaw"+n(573)].Embed["Active"+n(871)+"ay"].Button[n(562)+n(585)+"List"][n(458)+"Style"]||t.ovfnz))["setCus"+n(759)](t.QgoMk),config["Giveaw"+n(573)].Embed.ActiveGiveaway[n(458)][n(562)+n(585)+n(751)].ButtonEmoji&&E[n(586)+"ji"](config["Giveaw"+n(573)].Embed["Active"+n(871)+"ay"][n(458)][n(562)+"trants"+n(751)][n(458)+n(712)]),B.push(E))),config[n(871)+n(573)][n(628)][n(613)+"Giveaway"].Button["ShowEn"+n(522)]&&(E=(new ButtonBuilder)[n(475)+"el"](config[n(871)+n(573)][n(628)]["Active"+n(871)+"ay"].Button.ShowEntries[n(458)+"Text"]+": 0")[n(741)+"le"](getButtonStyle(config.Giveaways.Embed.ActiveGiveaway.Button[n(562)+n(522)][n(458)+"Style"]))["setCus"+n(759)](t.iJjkm)[n(542)+n(870)](!0),config["Giveaw"+n(573)][n(628)].ActiveGiveaway.Button[n(562)+"tries"].ButtonEmoji&&(t[n(767)]===t[n(767)]?E.setEmoji(config[n(871)+"ays"].Embed[n(613)+n(871)+"ay"].Button[n(562)+"tries"][n(458)+"Emoji"]):s.push({name:o(l[n(871)+"ays"].Embeds[n(613)+n(871)+"ay"].EntriesField,c),value:"**"+w+"**",inline:!0})),B.push(E)),E=(new ActionRowBuilder)[n(739)+"ponents"](B);let b="";!t.shRKA(typeof f,"string")||f!==n(847)+"one"&&""!==f?Array.isArray(f)&&t[n(825)](f[n(838)],0)&&(B=f.map(e=>"<@&"+e+">").join(" "),b=B):b=f;B=await o.send({content:b,embeds:[p],components:[E]}),p=(new EmbedBuilder).setAuthor({name:""+lang[n(568)+"sEmbedTitle"],iconURL:"https:"+n(505)+"gur.co"+n(804)+n(841)+"g"})[n(729)+"or"](config["SuccessEmbed"+n(454)]),E=new Giveaway({giveawayId:i,messageId:B.id,channelId:o.id,guildId:e.guildId,startAt:Date[n(732)](),endAt:G,ended:!1,winnerCount:l,hostedBy:y,prize:s,entries:0,messageWinner:!1,notifyEntrantOnEnter:!1,requirements:{whitelistRoles:c,blacklistRoles:w,minServerJoinDate:g,minAccountAge:v,minInvites:d,minMessages:u},winners:[],entrants:[],extraEntries:a.extraEntries||[]});await E[n(518)](),global[n(718)+"oader"]&&global["addonL"+n(637)]["getEve"+n(795)+"ger"]().emitSafe(n(582)+n(855)+"ated",{giveaway:E[n(444)+"ct"](),guild:e.guild,channel:o,prize:s,winnerCount:l,duration:G-Date[n(732)](),hostedBy:y,requirements:E.requirements}),config["Giveaw"+n(572)].Enabled&&(B=config[n(871)+"ayLogs"][n(871)+n(742)+"ted"].Embed,a=(new EmbedBuilder)[n(729)+"or"](parseColor(B.Color||t[n(531)]))[n(836)+"le"](replacePlaceholders(B[n(723)],h))[n(685)+"cription"](replacePlaceholders(B["Descri"+n(675)].join("\n"),h))["setFoo"+n(583)]({text:replacePlaceholders(B[n(809)],h)}),config.GiveawayLogs[n(871)+n(742)+n(833)][n(628)].Thumbnail&&config[n(871)+"ayLogs"]["Giveaw"+n(742)+n(833)].Embed[n(670)+n(525)]&&a[n(663)+"mbnail"](config["Giveaw"+n(572)]["Giveaw"+n(742)+"ted"][n(628)].ThumbnailUrl),G=t.njzmL(getLogChannel,e.guild,config.GiveawayLogs[n(547)+n(501)+"D"]))&&G.send({embeds:[a]}),await e.editReply({embeds:[p],flags:MessageFlags["Epheme"+n(567)]})},joinGiveaway:async(n,t,i,r,s,o,l)=>{let c=a8,w={OvdfH:function(e,a,n){return e(a,n)},UBNHk:function(e,a){return e*a},kQBFI:c(814),rvcsv:function(e,a){return a<e},vkxPY:function(e,a){return e!==a},uMAJb:function(e,a){return e===a},exnVb:c(816),rehgP:function(e,a){return e!==a},lRifR:function(e,a){return e(a)},pmYBn:c(510)+c(730)+"t",pjfBH:c(545),Olnfy:function(e,a){return e===a},dxbEy:"xytLp"};try{var e,a,g,v,d=await Giveaway.findOne({channelId:o,messageId:l});if(d){const x=s[c(710)].name,P=d.requirements,j=P[c(717)+c(822)+"es"][c(517)](e=>"<@&"+e+">").join(", "),S=P[c(540)+"istRoles"][c(517)](e=>c(783)+e+">").join(", "),q={prize:d.prize,serverName:x,hostedBy:d.hostedBy,whitelistRoles:j,blacklistRoles:S,channel:"<#"+d[c(749)+"lId"]+">",winnerCount:d[c(449)+c(624)],minInvites:P[c(806)+c(766)]||0};if(d.ended)I=replacePlaceholders(lang.Giveaways["EndMes"+c(512)],q),await s.reply({content:I,flags:MessageFlags[c(443)+c(567)]});else{if(P[c(717)+c(822)+"es"]&&0<P[c(717)+c(822)+"es"][c(838)]&&!P.whitelistRoles[c(474)](e=>r.roles[c(536)].has(e))){if("vmNvo"===w[c(860)])return e=replacePlaceholders(lang["Giveaw"+c(573)][c(777)+c(650)+c(524)+"ge"],q),void await s[c(448)+c(646)]({content:e,flags:MessageFlags["Epheme"+c(567)]});{let e=w[c(590)](d.random()*x[c(838)]),a=P[e];j=S.filter(e=>e[c(747)+c(851)]!==a["entran"+c(851)]),q[c(840)]({winnerId:a.entrantId})}}if(P["blackl"+c(822)+"es"]&&0<P[c(540)+"istRoles"][c(838)]&&P[c(540)+"istRoles"].some(e=>r[c(552)][c(536)].has(e))){if("CAGEm"===c(543))return a=w[c(662)](replacePlaceholders,lang["Giveaw"+c(573)][c(777)+"ectRoleMessage"],q),void await s.editReply({content:a,flags:MessageFlags[c(443)+"ral"]});o.addFields({name:w.OvdfH(l,w[c(871)+"ays"].Embeds[c(529)+"iveaway"].WinnersField,d),value:x,inline:!0})}if(P[c(854)+c(679)+c(784)]&&r.joinedTimestamp>new Date(P["minServerJoi"+c(784)])[c(494)+"e"]())g=replacePlaceholders(lang["Giveaw"+c(573)]["IncorrectMinimumServerJo"+c(702)+c(502)+"e"],q),await s[c(448)+"ply"]({content:g,flags:MessageFlags[c(443)+c(567)]});else if(P[c(615)+"ountAge"]&&r[c(692)]["create"+c(570)+c(575)]>new Date(P["minAcc"+c(744)+"e"]).getTime())v=replacePlaceholders(lang[c(871)+c(573)]["IncorrectMin"+c(811)+c(820)+"geMess"+c(457)],q),await s[c(448)+c(646)]({content:v,flags:MessageFlags[c(443)+"ral"]});else{var u,y,f,m,h,B,G,p,E,z,U=await getUserInviteCount(s.guild.id,t);if(w.rvcsv(P["minInv"+c(766)],0)&&U<P.minInvites)u=replacePlaceholders(lang[c(871)+"ays"].IncorrectInviteCountMessage,q),await s["editRe"+c(646)]({content:u,flags:MessageFlags.Ephemeral});else{if(0<P.minMessages){var b,K=await UserData.findOne({userId:t,guildId:s.guildId}),F=K?K["totalM"+c(776)+"s"]:0;if(F<P["minMes"+c(645)])return b=replacePlaceholders(lang.Giveaways[c(777)+"ectMessageCo"+c(708)+"sage"],{...q,required:P["minMes"+c(645)],current:F}),void await s[c(448)+c(646)]({content:b,flags:MessageFlags[c(443)+c(567)]})}if(d.entrants[c(474)](e=>e["entran"+c(851)]===t))d.entrants=d[c(747)+"ts"].filter(e=>e[c(747)+"tId"]!==t),d[c(510)+"s"]=d[c(747)+"ts"].length,await d.save(),f=(y=await n.channels.cache.get(o)[c(661)+"es"][c(750)](l))[c(550)][0],m=EmbedBuilder[c(446)](f).spliceFields(2,1,{name:replacePlaceholders(lang.Giveaways.Embeds.ActiveGiveaway[c(508)+"sField"],q),value:"**"+d.entrants[c(838)]+"**",inline:!0}),config[c(871)+"ays"][c(628)][c(613)+c(871)+"ay"][c(458)].ShowEntries?(B=(h=y[c(690)+c(623)][0][c(690)+c(623)]).findIndex(e=>"entries_count"===e.customId),w.vkxPY(B,-1)&&(G=(new ButtonBuilder).setLabel(config.Giveaways.Embed.ActiveGiveaway[c(458)][c(562)+"tries"].ButtonText+": "+d[c(747)+"ts"][c(838)]).setStyle(getButtonStyle(config.Giveaways[c(628)]["Active"+c(871)+"ay"][c(458)][c(562)+c(522)][c(458)+c(649)])).setCustomId(c(510)+"s_count")[c(542)+c(870)](!0),config[c(871)+"ays"].Embed[c(613)+"Giveaway"].Button["ShowEn"+c(522)][c(458)+"Emoji"]&&(c(564)!==c(564)?(p=100*o[c(466)](1,w.UBNHk(l/w,d["winner"+c(624)])),x=p):G[c(586)+"ji"](config[c(871)+"ays"][c(628)][c(613)+c(871)+"ay"].Button[c(562)+"tries"][c(458)+"Emoji"])),h[B]=G,E=(new ActionRowBuilder)[c(739)+"ponents"](h),await y.edit({embeds:[m],components:[E]}))):w[c(481)](w[c(798)],"gjQly")?i[c(729)+"or"](r[c(454)]):await y[c(765)]({embeds:[m]}),z=replacePlaceholders(lang[c(871)+"ays"][c(636)+c(803)+"Message"],q),s[c(462)+"d"]||s.deferred?await s.followUp({content:z,flags:MessageFlags["Epheme"+c(567)]}):await s[c(499)]({content:z,flags:MessageFlags[c(443)+"ral"]});else{let e=0;var L,H=r.roles[c(536)];for(L of d["extraE"+c(513)])H.has(L[c(768)])&&(e+=L[c(510)+"s"]);d[c(747)+"ts"].push({entrantId:t,entrantUsername:i,extraEntries:e}),d.entries=d[c(747)+"ts"][c(838)],await d[c(518)]();var C,M,D,Y,Z,A=await n.channels.cache.get(o).messages[c(750)](l),N=A[c(550)][0],T=EmbedBuilder[c(446)](N)[c(716)+c(799)](2,1,{name:w.OvdfH(replacePlaceholders,lang[c(871)+"ays"][c(526)][c(613)+c(871)+"ay"][c(508)+"sField"],q),value:"**"+d[c(747)+"ts"][c(838)]+"**",inline:!0});config.Giveaways[c(628)][c(613)+"Giveaway"][c(458)][c(562)+c(522)]?(M=(C=A.components[0]["compon"+c(623)]).findIndex(e=>e[c(556)+"Id"]===c(510)+"s_count"),w.rehgP(M,-1)&&(c(604)===c(604)?(D=(new ButtonBuilder)[c(475)+"el"](config[c(871)+"ays"][c(628)].ActiveGiveaway[c(458)][c(562)+"tries"][c(458)+c(627)]+": "+d[c(747)+"ts"][c(838)]).setStyle(w[c(535)](getButtonStyle,config[c(871)+c(573)].Embed["Active"+c(871)+"ay"][c(458)][c(562)+"tries"][c(458)+c(649)])).setCustomId(w.pmYBn)["setDis"+c(870)](!0),config[c(871)+c(573)].Embed.ActiveGiveaway[c(458)]["ShowEn"+c(522)][c(458)+"Emoji"]&&D[c(586)+"ji"](config[c(871)+"ays"].Embed[c(613)+c(871)+"ay"].Button[c(562)+"tries"].ButtonEmoji),C[M]=D,Y=(new ActionRowBuilder).addComponents(C),await A.edit({embeds:[T],components:[Y]})):(Z=i.map(e=>"<@&"+e+">").join(" "),r=Z))):await A.edit({embeds:[T]});let a=replacePlaceholders(lang["Giveaw"+c(573)].EntrySuccessMessage,q);if(0<e&&(a+="\n"+replacePlaceholders(lang[c(871)+c(573)][c(642)+"ntries"+c(502)+"e"],{extraEntries:e})),s.replied||s[c(592)+"ed"])w[c(760)](w[c(464)],c(545))?r[c(449)+"s"]=s[c(449)+"s"][c(686)](e=>!l[c(647)+"es"](e.winnerId)):await s[c(805)+"Up"]({content:a,flags:MessageFlags[c(443)+c(567)]});else{if(w.Olnfy("qHKsN",w.dxbEy))return l?w[c(754)](d).reduce((e,a)=>{var n=new S("{"+a+"}","gi");return e.replace(n,q[a]||"")},j):"​";await s.reply({content:a,flags:MessageFlags[c(443)+c(567)]})}}}}}}else{var O=replacePlaceholders(lang["Giveaw"+c(573)][c(871)+c(844)+"ound"],{});if(s.replied||s[c(592)+"ed"]){if("oSFqc"!==c(788))return void i[c(793)](c(871)+"ay not found:",r);await s[c(805)+"Up"]({content:O,flags:MessageFlags.Ephemeral})}else await s[c(499)]({content:O,flags:MessageFlags[c(443)+"ral"]})}}catch(e){console[c(793)]("Error joinin"+c(643)+"away: "+e);var I=w.OvdfH(replacePlaceholders,lang[c(871)+"ays"].EntryErrorMessage,{});await s[c(448)+c(646)]({content:I,flags:MessageFlags["Epheme"+c(567)]})}},endGiveaway:async u=>{let y=a8,f={EiJQY:function(e,a){return e===a},VHNiy:y(602),QIYZJ:y(848),gtOVV:"Giveaw"+y(621)+"eady e"+y(607),PzPHG:y(498)+y(849)+"found:",xvPCz:y(582)+"ay:ended",IlOCE:function(e,a,n){return e(a,n)},uMiKd:function(e,a,n){return e(a,n)},GEmuU:function(e,a,n){return e(a,n)},pYffB:"fjbxZ",zKSjn:function(e,a,n){return e(a,n)},APVXZ:function(e,a,n){return e(a,n)},tTVUS:"tcwJo",JNycp:"{winners}",QWRev:y(528)};try{var h=await Giveaway.findOne({giveawayId:u});if(h){let d=client[y(594)].cache.get(h[y(514)+"d"]);if(d){if(!h.ended){let r=client[y(749)+"ls"][y(536)][y(541)](h[y(749)+y(792)]);if(!r)return console.error(f.PzPHG,h["channe"+y(792)]),await Giveaway[y(780)+"eAndUp"+y(614)]({giveawayId:u},{$set:{winners:[],ended:!0}},{new:!0,runValidators:!0}),"Giveaw"+y(674)+"ed without winners"+y(617)+"nel wa"+y(755)+"ted).";let s=!0;try{await r[y(661)+"es"].fetch(h.messageId)}catch(e){s=!1}if(!s)return await Giveaway["findOneAndUp"+y(614)]({giveawayId:u},{$set:{winners:[],ended:!0}},{new:!0,runValidators:!0}),y(871)+"ay ended wit"+y(773)+y(813)+y(864)+y(859)+y(755)+"ted).";let o=d.name,e=h["requir"+y(557)],a=e[y(717)+y(822)+"es"].map(e=>"<@&"+e+">").join(", "),n=e[y(540)+y(822)+"es"][y(517)](e=>y(783)+e+">")[y(644)](", "),l={prize:h.prize,serverName:o,hostedBy:h.hostedBy,whitelistRoles:a,blacklistRoles:n,channel:"<#"+h[y(749)+y(792)]+">",winnerCount:h.winnerCount},t=h["winner"+y(624)],c=h.entrants,w=[],g=[];for(var B of c){var G=1+(B.extraEntries||0);for(let e=0;e<G;e++)g.push(B)}for(let e=0;e<t&&0<g[y(838)];e++){let e=Math.floor(Math.random()*g.length),a=g[e];g=g.filter(e=>e["entran"+y(851)]!==a[y(747)+"tId"]),w.push({winnerId:a["entran"+y(851)]})}var p,E,z=await Giveaway[y(780)+y(461)+"date"]({giveawayId:u},{$set:{winners:w,ended:!0}},{new:!0,runValidators:!0});if(global[y(718)+"oader"]&&global["addonL"+y(637)]["getEve"+y(795)+"ger"]().emitSafe(f[y(868)],{giveaway:z[y(444)+"ct"](),winners:w,guild:d,channel:r,prize:h[y(737)],totalEntries:h[y(747)+"ts"][y(838)],hostedBy:h[y(509)+"By"]}),!z)return y(601)!==y(468)?void console[y(793)](y(587)+y(472)+"date g"+y(821)+"y:",u):([p,E]=h,d+1+y(500)+p+y(787)+E+(" entri"+y(673)));var b=await r.messages[y(750)](h.messageId);let v=w.map(e=>"<@"+e[y(449)+"Id"]+">")[y(644)]("\n");0===v.length&&(v=f[y(677)](replacePlaceholders,lang.Giveaways["NoPart"+y(569)+y(651)+"sage"],l)),config.Giveaways[y(558)+y(502)+y(818)+"rs"]&&w.forEach(async a=>{var e,n,t=y,a=a[t(449)+"Id"];try{f.EiJQY(f[t(579)],f[t(802)])?(e=(r[t(871)+t(573)].Embed.ActiveGiveaway[t(735)+t(555)+"ext"]||t(871)+"ay ID:"+t(549)+t(603)+"}").replace(/{giveawayId}/g,s),i.setFooter({text:e,iconURL:o[t(871)+"ays"].Embed[t(613)+t(871)+"ay"][t(735)+"ooterI"+t(863)]})):(n=await d[t(605)+"s"].fetch(a))&&n.user&&await n[t(692)].send(replacePlaceholders(lang["Giveaw"+t(573)][t(815)+"DirectMessage"],l))}catch(e){console.error("Error "+t(865)+t(756)+t(812)+t(442),a,e)}});var L,C=w.map(e=>"<@"+e.winnerId+">").join(", "),M=(0===C[y(838)]?await r.send(replacePlaceholders(lang[y(871)+y(573)][y(669)+y(569)+y(651)+"sage"],l)):await r[y(819)](f.uMiKd(replacePlaceholders,lang[y(871)+y(573)].WinMessage,l).replace("{winne"+y(797),C)),EmbedBuilder[y(446)](b.embeds[0]).setColor(config["Giveaw"+y(573)][y(628)][y(529)+y(821)+"y"].EmbedColor).setDescription(f.GEmuU(replacePlaceholders,lang[y(871)+"ays"][y(526)]["EndedG"+y(821)+"y"][y(723)],l)));if(config[y(871)+y(573)][y(628)][y(529)+"iveaway"]["ShowFo"+y(520)]?(L=(config[y(871)+"ays"].Embed["EndedG"+y(821)+"y"][y(735)+y(555)+"ext"]||"Giveaw"+y(761)+" {giveawayId}").replace(/{giveawayId}/g,h[y(582)+y(857)]),M.setFooter({text:L,iconURL:config[y(871)+y(573)][y(628)][y(529)+"iveaway"][y(735)+"ooterI"+y(863)]})):M[y(672)+"ter"](null),M.setFields([]),config["Giveaw"+y(573)][y(628)][y(529)+y(821)+"y"].ShowTitle&&("fjbxZ"===f[y(665)]?M.setDescription(f.zKSjn(replacePlaceholders,lang["Giveaw"+y(573)][y(526)][y(529)+y(821)+"y"][y(723)],l)):h[y(586)+"ji"](d.Giveaways.Embed[y(613)+"Giveaway"].Button[y(562)+"tries"]["Button"+y(712)])),config.Giveaways.Embed["EndedG"+y(821)+"y"][y(830)+y(689)+"l"]&&M.setThumbnail(config[y(871)+y(573)][y(628)].EndedGiveaway.EmbedThumbnail),config[y(871)+y(573)].Embed.EndedGiveaway[y(609)+"age"]&&M[y(869)+"ge"](config["Giveaw"+y(573)][y(628)][y(529)+y(821)+"y"][y(835)+y(852)]),config[y(871)+"ays"].Embed[y(529)+"iveaway"].ShowWinnersField&&M[y(758)+y(786)]({name:replacePlaceholders(lang.Giveaways.Embeds[y(529)+"iveaway"]["Winner"+y(740)],l),value:v,inline:!0}),config.Giveaways[y(628)]["EndedG"+y(821)+"y"]["ShowEntriesF"+y(560)]&&M[y(758)+y(786)]({name:f.APVXZ(replacePlaceholders,lang[y(871)+"ays"].Embeds["EndedG"+y(821)+"y"][y(508)+y(740)],l),value:"**"+h[y(747)+"ts"].length+"**",inline:!0}),await b.edit({embeds:[M],components:[]}),config[y(871)+"ayLogs"][y(676)+"d"]){if(f[y(480)]!==y(584))return h(d.replace("#",""),16);var D=config[y(871)+y(572)][y(871)+"ayEnded"][y(628)],A=(new EmbedBuilder)[y(729)+"or"](parseColor(D[y(454)]||y(738)+"0")).setTitle(replacePlaceholders(D[y(723)],l)).setDescription(f.APVXZ(replacePlaceholders,D[y(511)+"ption"].join("\n"),l)[y(785)+"e"](f[y(506)],C)).setFooter({text:replacePlaceholders(D.Footer,l)}),I=(config["Giveaw"+y(572)]["Giveaw"+y(599)+"d"].Embed["Thumbn"+y(659)]&&config[y(871)+y(572)].GiveawayEnded[y(628)].ThumbnailUrl&&A["setThu"+y(829)](config["Giveaw"+y(572)].GiveawayEnded[y(628)][y(670)+"ailUrl"]),getLogChannel(d,config["Giveaw"+y(572)]["LogsCh"+y(501)+"D"]));I&&I.send({embeds:[A]})}return"Giveaway ended suc"+y(576)+y(482)}console.error(f[y(843)],u)}else console[y(793)](y(561)+y(828)+y(629),h[y(514)+"d"])}else console.error(y(871)+"ay not"+y(808)+":",u)}catch(e){if("HZDdQ"!==f[y(465)])throw console[y(793)](y(846)+"ending the giveaway with"+y(450),u,e),e;z=i.map(e=>y(783)+e+">")[y(644)]("\n");j[y(840)]({name:k(l["Giveaw"+y(573)][y(526)]["Active"+y(871)+"ay"]["WhitelistRol"+y(519)],m),value:z,inline:!0}),n++}},rerollGiveaway:async(s,o,c=[])=>{let w=a8,d={OGjlj:"Error "+w(533)+" the giveaway with ID:",zpxty:function(e,a,n){return e(a,n)},otpQd:function(e,a){return e===a},zqzvk:"None o"+w(720)+"specif"+w(503)+"ers are prev"+w(619)+"inners.",bgKaB:function(e,a){return a<e},vEpbS:"QBcrP",atncF:"xGSai",EZoAY:"kMztS",uULGd:function(e,a){return e!==a},KuyXI:"Cmkzw",jycVe:function(e,a){return e(a)},ICCUg:w(846)+w(471)+w(643)+"away r"+w(648),OYOpC:w(734)};try{let n=await Giveaway[w(780)+"e"]({giveawayId:o});if(!n)return await s[w(499)]({content:lang.Giveaways["GiveawayNotF"+w(473)],flags:MessageFlags[w(443)+w(567)]});if(!n.ended)return await s.reply({content:lang["Giveaw"+w(573)].GiveawayHasntEnded,flags:MessageFlags.Ephemeral});if(0<c[w(838)]&&!n.winners[w(474)](e=>c[w(647)+"es"](e[w(449)+"Id"]))){if(d[w(850)](w(559),w(559)))return await s[w(499)]({content:d[w(861)],flags:MessageFlags["Epheme"+w(567)]});c[w(663)+"mbnail"](d[w(871)+"ayLogs"].GiveawayEnded.Embed[w(670)+w(525)])}var y=n.entrants.filter(a=>!n.winners[w(474)](e=>e.winnerId===a.entrantId)),f=0<c[w(838)]?c.length:n.winnerCount;0===c.length?n[w(449)+"s"]=[]:"XEEjT"!==w(546)?c+=d[w(581)]:n[w(449)+"s"]=n[w(449)+"s"][w(686)](e=>!c.includes(e.winnerId));for(let e=0;e<f&&d.bgKaB(y[w(838)],0);e++){if("xkitn"===d.vEpbS)throw n[w(793)](d.OGjlj,y,e),f;var B=Math[w(590)](Math.random()*y[w(838)]);n[w(449)+"s"][w(840)]({winnerId:y[B].entrantId}),y.splice(B,1)}await n[w(518)]();let e=client.guilds[w(536)].get(n[w(514)+"d"]),a=e.channels[w(536)][w(541)](n[w(749)+"lId"]),t=await a[w(661)+"es"][w(750)](n[w(661)+"eId"]);var G,p,E=n[w(449)+"s"].map(e=>"<@"+e[w(449)+"Id"]+">").join(", "),b={prize:n[w(737)],serverName:e[w(834)],hostedBy:n[w(509)+"By"],channel:"<#"+n.channelId+">",winnerCount:n[w(449)+"Count"],winners:E};for(G of n[w(449)+"s"])try{d[w(781)]===w(703)?(p=(a[w(711)+w(513)]||0)+1,t.has(E[w(747)+"tId"])?u.set(v.entrantId,G[w(541)](x["entran"+w(851)])+p):p[w(858)](z[w(747)+w(851)],p)):await(await client.users.fetch(G.winnerId))[w(819)](d.zpxty(replacePlaceholders,lang["Giveaw"+w(573)].WinnerDirectMessage,b))}catch(e){}var L,C,M,D,A,I,P,S,q=EmbedBuilder.from(t.embeds[0]),U=(q.setFields([]),config["Giveaw"+w(573)].Embed[w(529)+w(821)+"y"]["ShowWinnersF"+w(560)]&&(d[w(867)]!==w(680)?(K=replacePlaceholders(lang[w(871)+w(573)].Embeds["EndedG"+w(821)+"y"].WinnersField,b),L=0<E[w(838)]?E:"No win"+w(563)+w(600)+"d",q.addFields({name:K,value:L,inline:!0})):c["setDes"+w(845)+"on"](d)),config["Giveaw"+w(573)].Embed[w(529)+"iveaway"].ShowEntriesField&&(d.uULGd(d[w(810)],"Cmkzw")?c["setThu"+w(829)](d[w(670)+"ail"]):(C=replacePlaceholders(lang[w(871)+w(573)][w(526)][w(529)+"iveaway"]["Entrie"+w(740)],b),M="**"+n[w(747)+"ts"].length+"**",q.addFields({name:C,value:M,inline:!0}))),await t[w(765)]({embeds:[q]}),"Giveaway rerolled! Congr"+w(456)+w(657)+w(571)+"new winners "+w(588)+' "'+b.prize+'" give'+w(748)+E);await a[w(819)](U),s[w(462)+"d"]||s[w(592)+"ed"]||(w(478)===w(483)?(D=new e(a),A="<t:"+t[w(590)](D[w(494)+"e"]()/1e3)+":D>",E.push({name:d[w(616)](b,q["Giveaw"+w(573)][w(526)][w(613)+"Giveaway"]["Minimu"+w(709)+w(726)+w(560)],U),value:A,inline:!0}),r++):await s.reply({content:"Giveaw"+w(733)+"ners rerolle"+w(460)+w(652)+"ly.",flags:MessageFlags["Epheme"+w(567)]}));try{config[w(871)+w(572)].Enabled&&(I=config[w(871)+"ayLogs"]["Giveaw"+w(653)+"lled"][w(628)],P=(new EmbedBuilder).setColor(d.jycVe(parseColor,I.Color||w(738)+"0"))[w(836)+"le"](replacePlaceholders(I[w(723)],b))["setDes"+w(845)+"on"](replacePlaceholders(I.Description.join("\n"),b).replace(w(713)+w(797),E))[w(672)+w(583)]({text:replacePlaceholders(I.Footer,b)}),config[w(871)+"ayLogs"].GiveawayRerolled[w(628)][w(670)+w(659)]&&config["Giveaw"+w(572)][w(871)+w(653)+w(486)][w(628)][w(670)+w(525)]&&P["setThu"+w(829)](config[w(871)+"ayLogs"]["Giveaw"+w(653)+w(486)].Embed.ThumbnailUrl),S=getLogChannel(e,config[w(871)+w(572)]["LogsCh"+w(501)+"D"]))&&S[w(819)]({embeds:[P]})}catch(e){console.error(d.ICCUg,e)}}catch(e){var K;d.OYOpC!=d.OYOpC?d[w(858)](g[w(747)+"tId"],h):(console[w(793)](w(846)+"reroll"+w(668)+w(445)+w(693)+"ith ID: "+o,e),s.replied||s.deferred||(w(534)!==w(534)?(K=i.map(e=>"<@&"+e+">").join("\n"),j[w(840)]({name:k(l.Giveaways.Embeds.ActiveGiveaway[w(658)+w(822)+"eField"],m),value:K,inline:!0}),n++):await s[w(499)]({content:"An error occurred while "+w(537)+w(668)+w(445)+w(715),flags:MessageFlags.Ephemeral})))}},calculateChance:async(t,i)=>{let r=a8,s={ukuCf:function(e,a){return e+a},BOIgh:function(e,a){return e===a}};try{let a=t[r(692)].id,n=i[r(747)+"ts"][r(639)](e=>e["entran"+r(851)]===a);if(n){let e=0;for(var o of i[r(747)+"ts"]){var l=s[r(791)](1,o[r(711)+r(513)]||0);e+=l}var c=1+(n["extraE"+r(513)]||0);let a;a=s[r(688)](i[r(449)+"Count"],1)?c/e*100:100*Math[r(466)](1,c/e*i.winnerCount);var w={user:t[r(692)],winChance:a[r(516)+"d"](2),userEntries:c,extraEntries:n["extraE"+r(513)]||0},g=replacePlaceholders(lang["Giveaw"+r(573)][r(654)+"Message"],w);await t.reply({content:g,flags:MessageFlags.Ephemeral})}else await t.reply({content:lang["Giveaw"+r(573)]["NotJoi"+r(470)+"eaway"],flags:MessageFlags.Ephemeral})}catch(e){console.error("Error "+r(488)+r(763)+r(654)+":",e),await t[r(499)]({content:lang[r(871)+"ays"][r(553)+r(538)+"rror"],flags:MessageFlags[r(443)+"ral"]})}},showEntrants:async a=>{let y=a8,f={WfDjJ:function(e,a){return e-a},bhEAf:function(e,a){return e+a},qUYEe:y(801)+"ntPage}",OtOdL:function(e,a){return e===a},Jelvz:"QUgoK",gIqcQ:y(532)+y(821)+"y has ended or doe"+y(762)+"xist.",smtlG:function(e,a){return e!==a},SaJyz:y(574),bSPvI:"next",aKege:function(e,a){return a<e},uOGQm:y(728)};try{await a.deferReply({flags:MessageFlags[y(443)+"ral"]});let r=await Giveaway.findOne({messageId:a[y(661)+"e"].id,channelId:a[y(749)+"lId"]});if(!r)return void await a[y(448)+y(646)]({content:f[y(823)],flags:MessageFlags[y(443)+y(567)]});if(0===r[y(747)+"ts"][y(838)]){if(!f.smtlG(y(504),"PkgyW"))return void await a["editRe"+y(646)]({content:y(577)+y(764)+"ntered"+y(610)+"giveaway yet!",flags:MessageFlags[y(443)+"ral"]});var e;g&&0<d.length&&(e=s.map(e=>"<@&"+e+">").join("\n"),t.push({name:u(v[y(871)+y(573)][y(526)][y(613)+"Giveaway"][y(658)+y(822)+"eField"],w),value:e,inline:!0}),x++)}const m=25,h=new Map;r.entrants.forEach(e=>{var a=y,n=(e["extraE"+a(513)]||0)+1;h.has(e.entrantId)?h.set(e[a(747)+a(851)],h[a(541)](e[a(747)+a(851)])+n):h[a(858)](e["entran"+a(851)],n)});let o=Array[y(446)](h[y(510)+"s"]()).sort((e,a)=>a[1]-e[1])[y(517)]((e,a)=>{var n=y,[e,t]=e;return a+1+n(500)+e+"> ("+t+(n(724)+n(673))}),l=Math.ceil(o.length/m),c=1,g=e=>{var a=y,n=f.WfDjJ(e,1)*m,t=f.bhEAf(n,m),n=o.slice(n,t),t=config[a(871)+"ays"][a(628)].ActiveGiveaway.Button[a(562)+a(585)+"List"].Embed,i=new EmbedBuilder;return t.Title&&i[a(836)+"le"](t[a(723)][a(785)+"e"](a(612)+"}",r.prize)),t.Description&&(n=t[a(511)+"ption"].join("\n").replace(a(796)+a(695)+"t}",n.join("\n")),i[a(685)+"cription"](n)),t[a(454)]&&("lWCBP"===a(618)?i[a(729)+"or"](t[a(454)]):o[a(758)+a(786)]({name:l(c.Giveaways[a(526)][a(529)+a(821)+"y"]["Entrie"+a(740)],g),value:"**"+d[a(747)+"ts"][a(838)]+"**",inline:!0})),t[a(670)+"ail"]&&i.setThumbnail(t.Thumbnail),t[a(809)]&&(n=t.Footer.Text.replace("{totalEntran"+a(666),h.size).replace(f.qUYEe,e)[a(785)+"e"]("{totalPages}",l),i[a(672)+"ter"]({text:n,iconURL:t.Footer.Icon[a(785)+"e"]("{foote"+a(807),config[a(871)+a(573)].Embed.ActiveGiveaway[a(735)+"ooterI"+a(863)])})),i},d=(new ActionRowBuilder)["addCom"+y(746)+"s"]((new ButtonBuilder)[y(640)+y(759)](y(705)).setLabel("≪").setStyle(ButtonStyle.Primary).setDisabled(!0),(new ButtonBuilder)[y(640)+y(759)](f.SaJyz)[y(475)+"el"]("◀")[y(741)+"le"](ButtonStyle[y(634)+"y"])[y(542)+"abled"](!0),(new ButtonBuilder)["setCus"+y(759)](f[y(490)])[y(475)+"el"]("▶").setStyle(ButtonStyle[y(634)+"y"])[y(542)+"abled"](1===l),(new ButtonBuilder).setCustomId(y(489))[y(475)+"el"]("≫")[y(741)+"le"](ButtonStyle[y(634)+"y"])[y(542)+y(870)](1===l)),n=await a[y(448)+"ply"]({embeds:[g(c)],components:1<l?[d]:[],flags:MessageFlags[y(443)+y(567)]});var i;f.aKege(l,1)&&((i=n["createMessageComponentCo"+y(856)+"r"]({filter:e=>e[y(692)].id===a[y(692)].id,time:3e5})).on(y(770)+"t",async e=>{var a=y;switch(e.customId){case a(705):c=1;break;case a(574):c--;break;case"next":c++;break;case a(489):c=l}a=(new ActionRowBuilder)[a(739)+a(746)+"s"]((new ButtonBuilder)["setCus"+a(759)](a(705))[a(475)+"el"]("≪")[a(741)+"le"](ButtonStyle[a(634)+"y"])[a(542)+"abled"](1===c),(new ButtonBuilder)[a(640)+a(759)]("prev").setLabel("◀")[a(741)+"le"](ButtonStyle.Primary)["setDis"+a(870)](1===c),(new ButtonBuilder)[a(640)+a(759)](a(485)).setLabel("▶")[a(741)+"le"](ButtonStyle[a(634)+"y"])["setDis"+a(870)](f[a(782)](c,l)),(new ButtonBuilder)[a(640)+a(759)]("last")[a(475)+"el"]("≫").setStyle(ButtonStyle[a(634)+"y"])["setDis"+a(870)](c===l));await e.update({embeds:[g(c)],components:[a]})}),i.on(f[y(611)],async()=>{let a=y;if(a(826)!==f[a(853)])return f;var e=(new ActionRowBuilder).addComponents(d.components.map(e=>ButtonBuilder.from(e)[a(542)+a(870)](!0)));await n.edit({components:[e]})[a(452)](()=>{})}))}catch(e){console.error(y(846)+"showing entrants:",e),await a[y(448)+y(646)]({content:y(539)+y(451)+"urred while "+y(655)+"ng the entrants li"+y(608),flags:MessageFlags[y(443)+y(567)]})}}};module.exports=giveawayActions;