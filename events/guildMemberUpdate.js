let aF=b,{EmbedBuilder,AuditLogEvent}=((()=>{for(var e=b,n=a();;)try{if(992983==+parseInt(e(256))+parseInt(e(250))/2+-parseInt(e(275))/3+parseInt(e(252))/4+-parseInt(e(327))/5*(-parseInt(e(245))/6)+-parseInt(e(260))/7+parseInt(e(307))/8*(-parseInt(e(364))/9))break;n.push(n.shift())}catch(e){n.push(n.shift())}})(),require(aF(288)+"d.js")),moment=require("moment"+aF(273)+"one"),{getConfig,getLang,getCommands,replacePlaceholders:globalReplacePlaceholders}=require(aF(268)+"ls/core/conf"+aF(294)+"er.js"),getLogChannel=require("../utils/han"+aF(296)+"messageUtils"+aF(298)).getLogChannel,lang=getLang(),config=getConfig(),recentRoleChanges=new Map,DEBOUNCE_TIME=1e3;function handleAntiHoist(e){var n=aF,l={osWZI:function(e,n){return n<e},ruhVw:function(e,n,l){return e(n,l)},GdDgy:"{oldDi"+n(240)+"ame}",qDksw:n(248)+"splayName}"};let r=e[n(291)+"yName"],t=r;for(;l[n(227)](r.length,0)&&(config[n(282)+"ist"][n(244)+"owedCharacters"][n(255)+"es"](r[n(377)](0))||" "===r[n(377)](0));)r=r[n(360)+"ing"](1);if((r=0===r[n(339)]?config["AntiHo"+n(278)][n(301)+"tDispl"+n(222)]:r)!==t)try{e["setNic"+n(284)](r.trim());var o,a=getLogChannel(e[n(239)],config[n(282)+"ist"][n(297)+"annelID"]);a&&(o=(new EmbedBuilder).setColor(l[n(272)](parseInt,config[n(282)+n(278)].LogEmbed[n(357)].replace("#",""),16))[n(349)+"le"](l[n(272)](replaceAntiHoistPlaceholders,config["AntiHo"+n(278)][n(253)+"ed"][n(370)],e).replace("{oldDi"+n(240)+"ame}",t))[n(237)+n(219)+"on"](replaceAntiHoistPlaceholders(config.AntiHoist.LogEmbed.Description[n(257)]("\n"),e).replace(l.GdDgy,t).replace(l[n(325)],r))[n(329)+n(331)]({text:replaceAntiHoistPlaceholders(config["AntiHo"+n(278)][n(253)+"ed"][n(366)],e)[n(375)+"e"]("{oldDisplayName}",t).replace(n(248)+n(240)+n(326),r)})["setTim"+n(226)](),a[n(346)]({embeds:[o]}))}catch(e){console[n(340)]("Error "+n(338)+"ng nickname "+n(376)+"ding l"+n(290),e)}}function handleRoleChange(e,n,l,r,t){let o=aF,a={JcMTa:function(e,n){return e-n},WQzqy:o(358),pybbl:function(e,n,l,r,t){return e(n,l,r,t)}},u=new Set(e[o(302)].cache[o(295)](e=>e.id)),i=new Set(n.roles[o(320)].map(e=>e.id)),c=n[o(302)].cache.filter(e=>!u[o(308)](e.id)),g=e[o(302)].cache[o(361)](e=>!i[o(308)](e.id)),s=n.id,d=n.guild.id,m=d+"-"+s,f=Date.now(),h=recentRoleChanges[o(225)](m);if(h&&a.JcMTa(f,h)<DEBOUNCE_TIME){if(a.WQzqy===a[o(276)])return;l[o(340)](o(221)+o(285)+o(224)+"it logs:",r)}recentRoleChanges.set(m,f),setTimeout(()=>{var e=o;recentRoleChanges[e(379)](m)},2*DEBOUNCE_TIME),0<c.size&&config[o(304)+o(300)].Enabled&&a[o(259)](handleAddRole,n,Array[o(348)](c.values()),l,t),0<g[o(347)]&&config[o(283)+o(314)+"gs"][o(234)+"d"]&&handleRemoveRole(n,Array.from(g[o(287)]()),r,t)}function hasRoleChanged(e,n){var l=aF,r=e[l(302)].cache.map(e=>e.id).sort(),t=n.roles[l(320)][l(295)](e=>e.id)[l(345)]();if({AbhEu:function(e,n){return e!==n}}[l(359)](r.length,t[l(339)]))return!0;for(let e=0;e<r.length;e++)if(r[e]!==t[e])return!0;return!1}function handleAddRole(a,e,u,i){let c=aF,g={kMpUK:"hjyaX",evYjd:function(e,n){return e(n)},KRBwn:c(313)},d=lang[c(304)+c(300)][c(267)],f=formatRoles(e);e=(new EmbedBuilder).setColor(d.Color||c(238)+"F");d[c(370)]&&(c(368)!==c(310)?e.setTitle(replacePlaceholders(d.Title,a,null,null,f,null,null,null,i,null)):f(e,k,l,m,n)),0<d[c(251)+"ption"].length&&(g[c(264)]!==c(274)?e[c(237)+"cription"](d[c(251)+"ption"].map(e=>replacePlaceholders(e,a,null,null,f,null,null,null,i,null))[c(257)]("\n")):l["setAut"+c(380)]({name:m(n.Author[c(330)],o,p,q,null,null,null,null,r,null),iconURL:s[c(332)][c(322)]||t})),d[c(366)]&&d[c(366)][c(330)]&&e[c(329)+c(331)]({text:g.evYjd(globalReplacePlaceholders,d[c(366)][c(330)]),iconURL:d[c(366)].Icon||void 0}),d.Author&&d.Author[c(330)]&&e["setAut"+c(380)]({name:d[c(332)][c(330)],iconURL:d.Author[c(322)]||void 0}),d[c(342)+c(328)]&&e[c(354)+"mbnail"](a.user["displa"+c(305)+"rURL"]({format:g[c(353)],dynamic:!0})),d.Image&&e.setImage(d.Image),u&&u.send({embeds:[e]})}function handleRemoveRole(n,e,l,r){let t=aF,o={vXULU:function(e,n){return e(n)},CBjVJ:function(e,n,l,r,t,o,a,u,i,c,g){return e(n,l,r,t,o,a,u,i,c,g)},UGUpJ:t(262)},a=lang[t(283)+"moveLogs"][t(267)],u=formatRoles(e);e=(new EmbedBuilder).setColor(a.Color||t(241)+"0");a[t(370)]&&e[t(349)+"le"](o.CBjVJ(replacePlaceholders,a[t(370)],n,null,null,null,u,null,null,r,null)),0<a["Descri"+t(230)][t(339)]&&e.setDescription(a.Description.map(e=>replacePlaceholders(e,n,null,null,null,u,null,null,r,null))[t(257)]("\n")),a.Footer&&a[t(366)][t(330)]&&e.setFooter({text:globalReplacePlaceholders(a[t(366)][t(330)]),iconURL:a[t(366)].Icon||void 0}),a.Author&&a.Author[t(330)]&&e[t(261)+t(380)]({name:a[t(332)].Text,iconURL:a.Author[t(322)]||void 0}),a.Thumbnail&&e["setThu"+t(309)](n.user["displayAvata"+t(372)]({format:"png",dynamic:!0})),a[t(337)]&&(t(262)===o.UGUpJ?e[t(373)+"ge"](a.Image):o[t(261)+"hor"]({name:a[t(332)].Text,iconURL:u.Author.Icon||e})),l&&l[t(346)]({embeds:[e]})}function a(){let e=["wvLzwq","B2C6","zgLZCgXH","DxnLCM5H","Bw9KzxjH","AwDmB2fK","BwfW","zgXLCNmV","tg9NC0nO","lMPZ","CvDcCuO","zeXVz3m","rgvMyxvS","CM9Szxm","C2v0q29S","uM9SzufK","Euf2yxrH","zM9YBwf0","ntqZmNHMquzesq","AgfZ","BwjUywLS","uhLczuW","B1HZAwu","phq6","Cg5N","Bw92zuXV","Be51qKi","tNvhtvu","vxbKyxrL","vw5RBM93","B3zPzgvK","y2fJAgu","zgf0ztO","swnVBG","yLj0ruW","zgf0zuXV","CurRC3C","yw1LFq","odGWmdaXmhvMufb6Aq","ywLS","C2v0rM9V","vgv4Da","DgvY","qxv0Ag9Y","tu1ntsbe","seG6Bw0","ywvqAuq","BYbzwvLz","sw1Hz2u","DxbKyxrP","BgvUz3rO","zxjYB3i","zMLYC3q","vgH1BwjU","tg9NCW","BgvKvw50","C29YDa","C2vUza","C2L6zq","zNjVBq","C2v0vgL0","t25vC2vY","BwLUyxrV","whbKywu","s1jcD24","C2v0vgH1","DxnLCG","ru9qvwy","q29SB3i","AwPzuKO","qwjOrxu","C3vIC3rY","zMLSDgvY","vuPpvwe","BgqGBwvT","ndm0nZLHzM9jzwq","AwnHDgLV","rM9VDgvY","t3LsB0C","q2LRu2u","BMLJA25H","vgL0Bgu","vLz2qva","CLvsta","C2v0sw1H","uvrJs2O","CMvWBgfJ","B3iGC2vU","y2HHCKf0","BNv2z24","zgvSzxrL","Ag9Y","y3jPChrP","Ahvgtxq","rxjYB3iG","yxLoyw1L","tM9Uzq","BMCGyxvK","z2v0","zxn0yw1W","B3nxwKK","r0TIB2m","Dg9Y","ChrPB24","vgLTzw91","C29UihbY","rxHbEeW","rw5HyMXL","BwvTyMvY","vw50Aw1L","C2v0rgvZ","iZffotbg","z3vPBgq","C3bSyxLo","i0zgnduW","vgLTzxPV","r05etg4","rgLZywXS","nLPdCKzUra","yw5UzwXj","q291BNq","E25LD0rP","zef0","mJKYnJeXoe9Pqwfwra","rgvZy3jP","ntGXodC5mK92vMLUDG","tg9Nrw1I","CMvHC29U","Aw5JBhvK","mtyYmZC2m2LrwxjLvq","AM9PBG","DeXVz3m","ChLIyMW","ndy4mJu4zgnlCur5","C2v0qxv0","q3HzBKG","yMvYihvW","A01WvuS","r0DJzNK","BMCGz3vP","rw1Izwq","lI4VDxrP","tu0VreqV","z0D3EeS","vLLlD1K","CNvOvNC","lxrPBwv6","AurqDNi","ntG4nde4oeLWu2PXzq","v1f6CxK","vxnLCLvW","Axn0","AxHwCLy","r01Nz3K","DLHvtfu","qw50AuHV","uM9SzvjL","A25HBwu","zMv0y2HP","y29TBxvU","DMfSDwvZ","zgLZy29Y"];return(a=function(){return e})()}async function fetchModeratorForTimeoutChange(e){var n=aF,l={GGcfy:function(e,n){return e||n},ExAxL:"No rea"+n(232)+"ovided"};try{var r=(await e[n(239)].fetchAuditLogs({limit:1,type:AuditLogEvent["Member"+n(317)]})).entries[n(341)]();if(!r)return null;var{executor:t,target:o,reason:a}=r;if(o.id===e.id)return{moderator:t,reason:l[n(265)](a,l[n(233)])}}catch(e){console[n(340)](n(221)+n(285)+n(224)+"it logs:",e)}return null}function handleNicknameChange(e,r,t,a){var u=aF,i={aePiD:"None",VVvAP:function(e,n,l,r,t,o,a,u,i,c,g){return e(n,l,r,t,o,a,u,i,c,g)},EOPUf:function(e,n,l,r,t,o,a,u,i,c,g){return e(n,l,r,t,o,a,u,i,c,g)},QTcKj:u(316)};let c=e.nickname||i.aePiD,g=r[u(369)+"me"]||i[u(335)],s=lang["UserUp"+u(324)+"gs"][u(267)],d=(new EmbedBuilder).setColor(s.Color||"#00FF00");s.Title&&d[u(349)+"le"](i[u(371)](replacePlaceholders,s.Title,r,c,g,null,null,null,null,a,null)),0<s.Description[u(339)]&&d[u(237)+"cription"](s.Description[u(295)](e=>replacePlaceholders(e,r,c,g,null,null,null,null,a,null)).join("\n")),s.Footer&&s[u(366)].Text&&d[u(329)+"ter"]({text:i[u(356)](replacePlaceholders,s.Footer[u(330)],r,c,g,null,null,null,null,a,null),iconURL:s[u(366)].Icon||void 0}),s.Author&&s.Author.Text&&d["setAut"+u(380)]({name:replacePlaceholders(s[u(332)].Text,r,c,g,null,null,null,null,a,null),iconURL:s[u(332)][u(322)]||void 0}),s[u(342)+"ail"]&&(i[u(374)]!==u(279)?d["setThu"+u(309)](r[u(355)].displayAvatarURL({format:u(313),dynamic:!0})):s[u(349)+"le"](d(l.Title,m,n,o,null,null,null,null,p,null))),s[u(337)]&&("pCzGd"!==u(280)?d.setImage(s[u(337)]):t[u(354)+u(309)](a[u(355)][u(291)+u(305)+"rURL"]({format:"png",dynamic:!0}))),t&&t.send({embeds:[d]})}function handleTimeoutChange(e,n,l,r,t,o,a,u){let i=aF,c={qWBqJ:function(e,n){return e(n)},GKboc:"#4CAF50",uYevR:function(e,n,l,r,t,o,a,u,i,c,g){return e(n,l,r,t,o,a,u,i,c,g)},YLXQu:function(e,n){return e!==n},GNDLn:"IMbJf",oXsie:"png"},g=(a?lang[i(231)+i(258)]:lang[i(236)+"Logs"]).Embed,s=a?l:r,d=a?c[i(299)](getFormattedDuration,n["communicationDisab"+i(344)+"il"]):null;a=(new EmbedBuilder)[i(303)+"or"](g.Color||(a?"#FFA500":c[i(228)]));g.Title&&a[i(349)+"le"](c.uYevR(replacePlaceholders,g.Title,n,null,null,null,null,o,d,t,u)),0<g.Description.length&&a[i(237)+"cription"](g[i(251)+"ption"][i(295)](e=>replacePlaceholders(e,n,null,null,null,null,o,d,t,u)).join("\n")),g.Footer&&g.Footer[i(330)]&&a[i(329)+i(331)]({text:globalReplacePlaceholders(g[i(366)][i(330)]),iconURL:g.Footer[i(322)]||void 0}),g[i(332)]&&g.Author.Text&&a["setAut"+i(380)]({name:g.Author[i(330)],iconURL:g[i(332)].Icon||void 0}),g["Thumbn"+i(328)]&&(c.YLXQu(c[i(243)],"IMbJf")?l[i(340)]("Error handli"+i(266)+i(363)+"ber update:",r):a[i(354)+i(309)](n[i(355)][i(291)+"yAvata"+i(372)]({format:c[i(311)],dynamic:!0}))),g.Image&&a[i(373)+"ge"](g.Image),s&&s.send({embeds:[a]})}function b(t,e){let o=a();return(b=function(e,n){e-=219;let l=o[e];void 0===b.eVOGRM&&(b.hUxvOu=function(t){let o="",l="";for(let e=0,n,l,r=0;l=t.charAt(r++);~l&&(n=e%4?64*n+l:l,e++%4)&&(o+=String.fromCharCode(255&n>>(-2*e&6))))l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(l);for(let e=0,n=o.length;e<n;e++)l+="%"+("00"+o.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(l)},t=arguments,b.eVOGRM=!0);var e=e+o[0],r=t[e];return r?l=r:(l=b.hUxvOu(l),t[e]=l),l})(t,e)}function getFormattedDuration(e){var n=aF;return e?(e=new Date(e),e=Math.floor(e.getTime()/1e3),n(312)+e+":R>"):"None"}function formatRoles(e){var n=aF;return e&&0!==e[n(339)]?e[n(295)](e=>"<@&"+e.id+">")[n(257)](", "):"None"}function replacePlaceholders(e,n,l,r,t,o,a,u,i,c){var g=aF,s={huFMt:function(e,n){return e||n},tXjVy:g(318)+"n",qUubz:function(e,n){return e||n},qqfSp:g(334),eiZUr:"DrakoBot"};return e[g(375)+"e"](/{user}/g,"<@"+n.id+">")[g(375)+"e"](/{userName}/g,n.user[g(292)+"me"])[g(375)+"e"](/{userTag}/g,n.user.tag)[g(375)+"e"](/{userId}/g,n[g(355)].id).replace(/{oldNickname}/g,l||g(223))[g(375)+"e"](/{newNickname}/g,s[g(220)](r,"None"))[g(375)+"e"](/{addedRoleNames}/g,s[g(220)](t,g(223)))[g(375)+"e"](/{removedRoleNames}/g,o||"None")[g(375)+"e"](/{duration}/g,s[g(220)](u,"None"))[g(375)+"e"](/{moderator}/g,a?"<@"+a.id+">":"Unknown")[g(375)+"e"](/{moderatorName}/g,a?a[g(292)+"me"]:s.tXjVy).replace(/{moderatorTag}/g,a?a[g(292)+"me"]+"#"+a["discri"+g(351)+"r"]:"Unknown")[g(375)+"e"](/{reason}/g,s.qUubz(c,"No reason pr"+g(319))).replace(/{shorttime}/g,i.format(s.qqfSp))[g(375)+"e"](/{longtime}/g,i.format(g(333)+g(336)))[g(375)+"e"](/{botName}/g,config.BotName||s.eiZUr)}function replaceAntiHoistPlaceholders(e,n){var l=aF,r={sgdrq:function(e){return e()},fjsoo:function(e,n){return e(n)},IRmwW:l(269)+l(289)},t=r.sgdrq(moment).tz(config.Timezone);return e.replace(/{user}/g,"<@"+n.id+">")[l(375)+"e"](/{newDisplayName}/g,n.displayName)[l(375)+"e"](/{userName}/g,n[l(355)].username).replace(/{userTag}/g,n.user.tag).replace(/{userId}/g,n[l(355)].id).replace(/{user-createdAt}/g,r.fjsoo(moment,n[l(355)]["create"+l(249)]).tz(config[l(242)+"ne"])[l(306)]("MM/DD/YYYY"))[l(375)+"e"](/{user-joinedAt}/g,moment(n.joinedAt).tz(config.Timezone)[l(306)](r.IRmwW)).replace(/{memberCount}/g,n[l(239)][l(235)+l(247)])[l(375)+"e"](/{guildName}/g,n[l(239)].name)[l(375)+"e"](/{shorttime}/g,t[l(306)]("HH:mm"))[l(375)+"e"](/{longtime}/g,t[l(306)](l(333)+"o YYYY"))}module.exports=async(e,n,l)=>{var t=aF,o={mmkRG:function(e,n,l){return e(n,l)},UJOUa:function(e,n){return e!==n},SWeVB:function(e,n,l,r,t){return e(n,l,r,t)},Xpdae:function(e,n){return e!==n},lNuBB:function(e,n){return e&&n},CHpud:function(e,n){return e!==n},WBPCc:t(270),hMZEE:function(e,n,l,r,t,o){return e(n,l,r,t,o)},nuvgn:t(367),bRtEL:"Error handling guild mem"+t(263)+t(321)};if(!l.user.bot){var a=moment().tz(config[t(242)+"ne"]),u=o.mmkRG(getLogChannel,l[t(239)],config[t(304)+t(300)].LogsChannelID),i=getLogChannel(l[t(239)],config[t(283)+t(314)+"gs"][t(297)+"annelID"]),c=getLogChannel(l.guild,config[t(277)+t(324)+"gs"]["LogsCh"+t(246)+"D"]),g=getLogChannel(l[t(239)],config[t(231)+"tLogs"].LogsChannelID),s=getLogChannel(l.guild,config[t(236)+"Logs"][t(297)+"annelID"]);try{config["AntiHo"+t(278)]["Enable"+t(350)+"Update"]&&handleAntiHoist(l),config.UserUpdateLogs[t(234)+"d"]&&o[t(362)](n.nickname,l.nickname)&&o.SWeVB(handleNicknameChange,n,l,c,a);var d=n[t(286)+t(365)+"nDisabledUntil"],m=l["commun"+t(365)+"nDisabledUntil"],f=o[t(352)](d,m),h=m&&(!d||d<m),v=o[t(315)](d,!m);if(f&&(h||v)&&(config.TimeoutLogs.Enabled||config["Untime"+t(343)].Enabled))if(o.CHpud("cxOVO",o.WBPCc)){let e=await fetchModeratorForTimeoutChange(l);handleTimeoutChange(n,l,g,s,a,e?.[t(293)+t(229)],h,e?.[t(254)])}else g[t(349)+"le"](s(d[t(370)],m,null,null,null,null,f,h,v,r));hasRoleChanged(n,l)&&o.hMZEE(handleRoleChange,n,l,u,i,a)}catch(e){o[t(378)]===t(271)?l.setImage(o[t(337)]):console.error(o[t(323)],e)}}};