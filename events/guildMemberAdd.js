let aC=b,{EmbedBuilder,ActionRowBuilder,ButtonBuilder,ButtonStyle}=((()=>{for(var e=b,n=a();;)try{if(244278==+parseInt(e(333))+parseInt(e(199))/2+-parseInt(e(196))/3*(-parseInt(e(319))/4)+parseInt(e(395))/5+parseInt(e(251))/6*(parseInt(e(320))/7)+-parseInt(e(183))/8*(-parseInt(e(189))/9)+parseInt(e(219))/10*(-parseInt(e(282))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}})(),require("discord.js")),moment=require(aC(332)+"-timezone"),Verification=require(aC(204)+"els/verificationSc"+aC(311)),Invite=require("../mod"+aC(379)+aC(262)+aC(311)),GuildData=require("../models/gu"+aC(277)+"aSchema"),UserData=require("../models/Us"+aC(315)),{getConfig,getLang,getCommands}=require(aC(352)+aC(190)+"e/configLoad"+aC(390)),getLogChannel=require(aC(352)+aC(238)+"dlers/"+aC(364)+"eUtils"+aC(244)).getLogChannel,lang=getLang(),config=getConfig(),sentWelcomeEmbeds=new Set,WELCOME_EMBED_RESET_INTERVAL=parseTime("5m");function b(i,e){let o=a();return(b=function(e,n){e-=179;let t=o[e];void 0===b.XaPpqF&&(b.iMKgxZ=function(i){let a="",t="";for(let e=0,n,t,r=0;t=i.charAt(r++);~t&&(n=e%4?64*n+t:t,e++%4)&&(a+=String.fromCharCode(255&n>>(-2*e&6))))t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(t);for(let e=0,n=a.length;e<n;e++)t+="%"+("00"+a.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(t)},i=arguments,b.XaPpqF=!0);var e=e+o[0],r=i[e];return r?t=r:(t=b.iMKgxZ(t),i[e]=t),t})(i,e)}async function sendAltPreventionDM(n){var t=aC,e={esxHJ:function(e,n,t){return e(n,t)}}[t(351)](createEmbed,config[t(191)+"vention"].DM[t(258)],n);try{await n[t(324)]({embeds:[e]})}catch(e){console[t(227)]("Failed"+t(300)+"nd alt"+t(312)+"ntion "+t(232)+n.user[t(220)]+":",e)}}function a(){let e=["u2v0DgLU","re9TyNu","y2f0y2G","ChrPB24","zMLUze9U","zMv0y2G","BNrPB24G","ihrVihnL","D0fyy2i","vgLTzxPV","vgL0Bgu","tuvtu0fh","C2vUzcb3","C2v0q29S","qNv0Dg9U","rM9VDgvY","BNqG","ChvZAa","AgvTyq","ihbYzxzL","BwL0","DMvYAwzP","zxjeyxrH","q0HbtK5f","C2v0tgfI","BKPPt3e","odiWuMfTENjY","n3HhvhrYCW","C2v0","zMXVB3i","Ag9Y","C2vUza","C2v0vvjm","zwXJB21L","BwvTyMvY","qxnjDgK","zwvnq2O","y2f0Aw9U","uMvHChbS","Bw9Tzw50","ndC3ndK3EhL3twzf","qxv0B0rL","yw5UzwXj","zwqGDg8G","z2zKsuG","tej3ueq","C2v0qxv0","zNjVBu5V","ru1cruq","teHdAwy","BwfW","qNnbtui","BgvUz3rO","tgDkBNC","DgvY","vgH1BwjU","uNLjCwS","ywrK","zxn4seO","lI4VDxrP","C2v0sw1H","zM9YBwf0","zxCGBwvT","y3jLyxrL","vhLWzq","u3bNww8","AwnVBLvs","qxv0B0TP","C2v0rgvZ","BMfTzq","C2v0vgH1","BwvZC2fN","E3vZzxjc","rw1VAMK","rePmug8","q291BNq","tg9N","q1rSzgm","ihrVigTP","AM9PBMvK","vM9vANC","Bu9MsxG","iernoIa","D1bKDK4","wvLzwq","zgLZCgXH","zwXZl2LU","DvnqqK8","Bgvjra","ywrKq29T","AwzPy2f0","zgf0zq","E3vZzxiT","y29TCg9U","C2v0u3r5","vMfUAxr5","zMLJyxrP","zxiUANm","A0DItgi","zNDkDK8","y2fJAgu","rgvZy3jP","oda3mdy1rePqy3rg","v2vSy29T","w0vsuK9s","z3HvCKG","DxrLzcbY","oLi+","y29Kzq","zgv0zwn0","zwnVBMrZ","swnVBG","mtyYmtGXnMvcrNrjsa","terZBfm","AgfZ","ywLS","yMvYoG","AxnbCNjH","ouzhz2zstG","BhmVy29Y","qwX0uhjL","yxzHDgfY","z3vPBgq","C2v0vgL0","DMz6Avm","ndK4m2PUqvrOCa","y2XLyxi","DxnLCW","odu3ody2EKPzAeTP","tgLUAW","q2nxsuS","DxnLCG","zgD2BLC","lI4VBw9K","vgLTzq","BM93","tf9jra","Bg9NigzV","DxnLCM5H","yw5Uzxj9","tu1ntsbe","AxrLCY9O","oKq+","lcbzwvLz","C2f2zq","oMq+","CIbKyxrH","sxzerhe","mZeXnJuZmejgC3vzEa","DgfN","BwTswMq","CLvsta","DMfSBwu","wMDqyxa","y291BNqG","y2SGywX0","zxjYB3i","vxnLCNm","tu0VreqV","CMvWBgfJ","tMfTzq","re0GDg8G","qxv0Ag9Y","z2v0","phq6","Aw5NihvU","zu1LC3nH","BhmVAgfU","C2v0rw1V","oNq+","sNjsEg8","Aw52AxrL","z2v0vgLT","lMPZ","CM9Szxm","AxnnDxrL","D0fZy2y","y2HHBM5L","vgLTzuXP","qK9usa","mte0odGWofrQAuvRwa","s2LJA0fS","s0npzxi","AvjwwK8","rKH0v00","Aur6DMG","z3vPBgrZ","rw1Izwq","BwjUywLS","rMfPBgvK","ig1LC3nH","DML0zvnJ","Dwzbv1u","CMDLCvu","vgv4Da","sw1Hz2u","BKvYCM9Y","sxjqrhO","BwTeAuW","C1fHqLm","rw5HyMXL","Bgv0zq","ENbMDxq","Cg5N","zKXoANG","Denwuvm","AwXKrgf0","rhjlCK4","teLosW","vvziC3a","DMvUDgLV","ntvbs0nSt24","zef0","Bev6uNK","zw50CW","Cg9Uzw50","A0TjzMG","y3jPChrP","DgLTzw91","zMLLzfjV","Eu5HBwu","Dw52zxjP"];return(a=function(){return e})()}async function sendAltPreventionLog(e,n,t){var r=aC,i={KCOer:"Yes"},a=getLogChannel(n[r(193)],config["AltPre"+r(281)+"n"][r(369)]["LogsCh"+r(335)+"D"]);if(a){var o=createEmbed(config["AltPre"+r(281)+"n"].Log,n);o.addFields({name:"Kicked",value:t?i[r(253)]:"No"});try{r(276)!==r(264)?await a.send({embeds:[o]}):t[r(227)]("[ERROR] Fail"+r(336)+r(305)+r(326)+r(261)+"ge: "+i)}catch(e){console.error("Failed"+r(300)+"nd alt"+r(312)+r(299)+r(208)+"r "+n[r(202)][r(220)]+":",e)}}}function createEmbed(t,r){var a=aC,e={SxOJo:a(274),jGJOG:function(e,n,t,r,i,a,o,c,l){return e(n,t,r,i,a,o,c,l)}},o=(new EmbedBuilder).setColor(t.Color),c=r[a(202)][a(378)+"yAvatarURL"]({format:e.SxOJo,dynamic:!0,size:4096}),s=r.guild[a(359)+"L"]({format:"png",dynamic:!0,size:4096});if(t.Title&&o.setTitle(replacePlaceholders(t[a(303)],r,"",0,c,"",!1)),t[a(394)+a(296)]){let e=t["Descri"+a(296)].join("\n");o["setDes"+a(288)+"on"](replacePlaceholders(e,r,"",0,c,"",!0))}if(t[a(233)].Text&&o[a(339)+"hor"]({name:replacePlaceholders(t.Author[a(265)],r,"",0,c,"",!1,!0),iconURL:t.Author[a(182)]?replacePlaceholders(t[a(233)].Icon,r,"",0,c,s,!1,!0):void 0}),t.Footer[a(265)]&&o["setFoo"+a(347)]({text:replacePlaceholders(t.Footer[a(265)],r,"",0,c,"",!1,!0),iconURL:t[a(308)][a(182)]?e.jGJOG(replacePlaceholders,t.Footer.Icon,r,"",0,c,s,!1,!0):void 0}),t[a(348)+a(186)]){let e=replacePlaceholders(t[a(348)+"ail"],r,"",0,c,s,!1);e&&o["setThu"+a(259)](e)}if(t[a(266)])if(a(269)!==a(338)){let e=replacePlaceholders(t[a(266)],r,"",0,c,s,!1);e&&o[a(353)+"ge"](e)}else{let e=i(j[a(266)],k,"",0,l,e,!1);e&&n.setImage(e)}return o}async function sendWelcomeMessage(e,a,o,c){var g=aC,d={kZPWV:function(e,n,t,r,i){return e(n,t,r,i)},zpfut:function(e,n,t,r,i,a,o,c,l){return e(n,t,r,i,a,o,c,l)},LDslS:function(e,n){return e!==n},xaShU:g(274),hQwbl:g(344),valme:function(e,n){return e===n},ufAWU:g(341),FHtWM:g(250),VsCqv:function(e,n,t,r,i,a,o,c){return e(n,t,r,i,a,o,c)},JrRxo:function(e,n,t,r,i,a,o,c){return e(n,t,r,i,a,o,c)},VhxSv:"NWbNp",QVcAL:function(e,n){return e||n},sQaBS:function(e,n){return e!==n},YEEAP:g(365)+g(210),LgJnw:"QAfap",UVHsp:g(268),BBDWQ:function(e,n,t,r,i,a){return e(n,t,r,i,a)}};let f=null;var m=config[g(396)+g(237)+"ge"].ChannelID;if(Array.isArray(m)){for(let n of m)if(g(328)===g(376))c=d.guild.channels.cache.get(f);else if(n&&""!==n&&n!=="CHANNE"+g(207)){let e=a[g(193)].channels[g(393)].get(n);if(e){f=e;break}}}else m&&""!==m&&d[g(184)](m,g(316)+g(207))&&(f=a.guild[g(248)+"ls"].cache[g(234)](m));if(f&&!sentWelcomeEmbeds[g(185)](a.id)){sentWelcomeEmbeds.add(a.id);var h=a.user[g(378)+"yAvata"+g(222)]({format:d.xaShU,dynamic:!0,size:4096}),M=await getUserBannerURL(a);let n="";if(config.WelcomeMessage[g(357)]===g(304)+"E"||"BOTH"===config["Welcom"+g(237)+"ge"][g(357)]){if("ASUyP"===d.hQwbl)return a+"rd";n=replacePlaceholders(config[g(396)+"eMessage"].Text,a,o,c,h,M,!1)}let i=null;if(d[g(223)](config["Welcom"+g(237)+"ge"].Type,d[g(263)])||config[g(396)+"eMessage"].Type===d[g(255)]){i=(new EmbedBuilder)[g(306)+"or"](config[g(396)+"eMessage"].Embed.Color);var D=d.VsCqv(replacePlaceholders,config.WelcomeMessage[g(258)].Title,a,o,c,h,M,!1),D=(D&&""!==D&&i.setTitle(D),d[g(241)](replacePlaceholders,config[g(396)+g(237)+"ge"].Embed[g(394)+g(296)].join("\n"),a,o,c,h,M,!0));if(D&&d.LDslS(D,"")){if("NWbNp"!==d.VhxSv)return;i["setDes"+g(288)+"on"](D)}var D=replacePlaceholders(config.WelcomeMessage[g(258)].Author[g(265)],a,o,c,h,M,!1,!0),C=replacePlaceholders(config[g(396)+"eMessage"].Embed.Author.Icon,a,o,c,h,M,!1,!0),D=(D&&d[g(184)](D,"")&&i.setAuthor({name:D,iconURL:C||void 0}),replacePlaceholders(config[g(396)+"eMessage"][g(258)].Footer[g(265)],a,o,c,h,M,!1,!0)),C=replacePlaceholders(config[g(396)+g(237)+"ge"].Embed[g(308)][g(182)],a,o,c,h,M,!1,!0);D&&d.LDslS(D,"")&&("gfdIH"!==g(337)?d.kZPWV(f,m,j,k,l):i["setFoo"+g(347)]({text:D,iconURL:d.QVcAL(C,void 0)})),config["Welcom"+g(237)+"ge"][g(258)]["Thumbn"+g(186)]&&d[g(270)](config.WelcomeMessage[g(258)]["Thumbn"+g(186)],"")&&(m=config[g(396)+g(237)+"ge"].Embed[g(348)+g(186)]===g(385)+"avatar}"?h:config[g(396)+"eMessage"][g(258)][g(348)+g(186)])&&i["setThu"+g(259)](m),config.WelcomeMessage.Embed.Image&&""!==config.WelcomeMessage[g(258)][g(266)]&&(D=config.WelcomeMessage[g(258)].Image===d.YEEAP?M:config[g(396)+"eMessage"][g(258)][g(266)])&&i.setImage(D)}C=[];if(config[g(396)+g(237)+"ge"][g(258)].Buttons&&Array[g(188)+"y"](config.WelcomeMessage.Embed.Buttons)&&0<config[g(396)+g(237)+"ge"][g(258)][g(307)+"s"].length){var p,L,A=new ActionRowBuilder;for(p of config["Welcom"+g(237)+"ge"].Embed[g(307)+"s"])p[g(357)]===g(279)&&(L=(new ButtonBuilder)[g(317)+"el"](p.Name)[g(387)+"le"](ButtonStyle[g(200)])[g(325)](replacePlaceholders(p.Link,a,o,c,h,M,!1)),p.Emoji&&L.setEmoji(p[g(366)]),A[g(382)+"ponents"](L));0<A[g(386)+"ents"].length&&C[g(310)](A)}try{if(g(254)===d[g(346)])n["setFoo"+g(347)]({text:i(C.Footer.Text,r,"",0,s,"",!1,!0),iconURL:t.Footer[g(182)]?d[g(273)](u,v.Footer.Icon,w,"",0,x,y,!1,!0):z});else{let e;config["Welcom"+g(237)+"ge"][g(357)]===d[g(255)]?e=await f[g(324)]({content:n,embeds:[i],components:0<C.length?C:void 0}):config["Welcom"+g(237)+"ge"][g(357)]===g(304)+"E"?d.valme(g(268),d[g(280)])?e=await f[g(324)]({content:n,components:0<C.length?C:void 0}):a=null:config.WelcomeMessage[g(357)]===g(341)&&(e=await f[g(324)]({embeds:[i],components:0<C.length?C:void 0}));var B=Boolean(config?.["Welcom"+g(237)+"ge"]?.[g(334)+g(272)]?.Enabled),b=config?.[g(396)+g(237)+"ge"]?.["AutoDe"+g(272)]?.Delay||"",E=B?parseTime(b):0;e&&B&&0<E&&setTimeout(()=>{e.delete().catch(()=>{})},E)}}catch(e){console.error(g(397)+"] Fail"+g(336)+g(305)+g(326)+g(261)+"ge: "+e)}config[g(396)+"eMessage"].DM.Enabled&&d.BBDWQ(sendWelcomeDM,a,o,c,h,M)}}async function sendWelcomeDM(n,t,r,i,a){var o=aC,e={DrKrN:o(229)+o(377),eeMCj:"MMMM D"+o(214)+" h:mm A",jbQNq:function(e,n){return e(n)},IvDDq:function(e,n,t,r,i,a,o,c){return e(n,t,r,i,a,o,c)},CQMCn:function(e,n){return e!==n},RugEA:function(e,n){return e===n},gxUrH:"{user-"+o(192)+"}",rlLpx:o(365)+o(210),kKIfh:"LINK"},c=(new EmbedBuilder)[o(306)+"or"](config.WelcomeMessage.DM.Embed.Color),l=e[o(218)](replacePlaceholders,config["Welcom"+o(237)+"ge"].DM.Embed.Title,n,t,r,i,a,!1),l=(l&&""!==l&&c[o(194)+"le"](l),replacePlaceholders(config[o(396)+"eMessage"].DM[o(258)].Description.join("\n"),n,t,r,i,a,!0)),l=(l&&e.CQMCn(l,"")&&c[o(361)+o(288)+"on"](l),replacePlaceholders(config.WelcomeMessage.DM[o(258)].Author[o(265)],n,t,r,i,a,!1,!0)),s=replacePlaceholders(config["Welcom"+o(237)+"ge"].DM[o(258)].Author.Icon,n,t,r,i,a,!1,!0),l=(l&&e.CQMCn(l,"")&&c["setAut"+o(323)]({name:l,iconURL:s||void 0}),replacePlaceholders(config[o(396)+o(237)+"ge"].DM.Embed.Footer[o(265)],n,t,r,i,a,!1,!0)),s=replacePlaceholders(config["Welcom"+o(237)+"ge"].DM.Embed.Footer.Icon,n,t,r,i,a,!1,!0),l=(l&&""!==l&&c.setFooter({text:l,iconURL:s||void 0}),config.WelcomeMessage.DM[o(258)][o(348)+o(186)]&&""!==config["Welcom"+o(237)+"ge"].DM[o(258)][o(348)+o(186)]&&(l=e.RugEA(config[o(396)+o(237)+"ge"].DM.Embed[o(348)+"ail"],e[o(398)])?i:config[o(396)+"eMessage"].DM.Embed["Thumbn"+o(186)])&&c[o(363)+o(259)](l),config[o(396)+o(237)+"ge"].DM.Embed[o(266)]&&""!==config[o(396)+"eMessage"].DM.Embed[o(266)]&&(s=config.WelcomeMessage.DM.Embed[o(266)]===e.rlLpx?a:config[o(396)+o(237)+"ge"].DM[o(258)].Image)&&c[o(353)+"ge"](s),[]);if(config.WelcomeMessage.DM.Embed[o(307)+"s"]&&Array.isArray(config.WelcomeMessage.DM[o(258)][o(307)+"s"])&&0<config[o(396)+"eMessage"].DM[o(258)].Buttons[o(345)]){var g,u=new ActionRowBuilder;for(g of config[o(396)+o(237)+"ge"].DM[o(258)].Buttons)if(g[o(357)]===e[o(287)]){let e=(new ButtonBuilder)[o(317)+"el"](g[o(231)]).setStyle(ButtonStyle[o(200)])[o(325)](replacePlaceholders(g[o(200)],n,t,r,i,a,!1));g.Emoji&&e.setEmoji(g[o(366)]),u[o(382)+o(286)+"s"](e)}0<u["compon"+o(285)].length&&l.push(u)}try{await n[o(324)]({embeds:[c],components:l})}catch(e){console.error(o(397)+"] Fail"+o(336)+"send w"+o(326)+o(375)+e)}}async function getUserBannerURL(e){var n=aC;try{return(await e[n(202)].fetch()).bannerURL({format:n(274),dynamic:!0,size:4096})||""}catch(e){return""}}function replacePlaceholders(e,n,t="",r=0,i,a,o,c=!1){var l=aC,s={lEzRy:function(e){return e()},CbsTR:function(e,n){return e/n},DOmbu:function(e,n){return e(n)},EtKnS:l(229)+l(377),dWynQ:"h:mm A"},g=s.lEzRy(moment).tz(config[l(302)+"ne"]),u=n.guild.iconURL({format:l(274),dynamic:!0,size:4096})||"",d=Math.floor(n[l(372)+"At"][l(243)+"e"]()/1e3),f=Math[l(322)](n.user[l(356)+l(283)].getTime()/1e3),m=Math[l(322)](s.CbsTR(Date[l(206)](),1e3)),v=getAutoKickTimestamp(config.AutoKick.Time),h=s[l(294)](moment,n.joinedAt).tz(config.Timezone),M=moment(n[l(202)]["create"+l(283)]).tz(config.Timezone);let w=e.replace(/{user}/g,"<@"+n.id+">").replace(/{newDisplayName}/g,n[l(378)+l(291)]).replace(/{userName}/g,n[l(202)][l(209)+"me"])[l(230)+"e"](/{userTag}/g,n[l(202)].tag).replace(/{userId}/g,n[l(202)].id).replace(/{memberCount}/g,getOrdinalSuffix(n[l(193)]["member"+l(368)])).replace(/{memberCountNumeric}/g,n[l(193)]["member"+l(368)]).replace(/{guildName}/g,n[l(193)][l(362)])[l(230)+"e"](/{user-avatar}/g,i||null)[l(230)+"e"](/{userBanner}/g,a||null).replace(/{guildIcon}/g,u)[l(230)+"e"](/{invitedBy}/g,t).replace(/{invitedByCount}/g,r)[l(230)+"e"](/{guildId}/g,n.guild.id);return w=c?w.replace(/{user-createdAt}/g,M.format("MM/DD/"+l(377)))[l(230)+"e"](/{user-joinedAt}/g,h[l(354)](s.EtKnS))[l(230)+"e"](/{shortTime}/g,g[l(354)](s.dWynQ))[l(230)+"e"](/{longTime}/g,g[l(354)]("MMMM D, YYYY"))[l(230)+"e"](/{joinDate}/g,h.format("MM/DD/"+l(377))).replace(/{joinTime}/g,h[l(354)]("h:mm A")).replace(/{joinDateTime}/g,h.format("MMMM D"+l(214)+" h:mm A")).replace(/{joinRelative}/g,h[l(340)+"w"]()).replace(/{UserCreation}/g,M[l(340)+"w"]())[l(230)+"e"](/{createdDate}/g,M[l(354)](s.EtKnS)).replace(/{createdDateTime}/g,M[l(354)](l(211)+", YYYY h:mm A")).replace(/{createdRelative}/g,M[l(340)+"w"]()).replace(/{autoKickTime}/g,s[l(284)](moment).tz(config.Timezone)[l(350)](parseTime(config[l(360)+"ck"][l(205)]),"millis"+l(181))[l(340)+"w"]()):w[l(230)+"e"](/{user-createdAt}/g,"<t:"+f+l(216))[l(230)+"e"](/{user-joinedAt}/g,"<t:"+d+":d>").replace(/{shortTime}/g,l(235)+m+l(240)).replace(/{longTime}/g,"<t:"+m+l(213)).replace(/{joinDate}/g,l(235)+d+":d>").replace(/{joinTime}/g,l(235)+d+":t>").replace(/{joinDateTime}/g,l(235)+d+":f>").replace(/{joinRelative}/g,l(235)+d+":R>").replace(/{UserCreation}/g,"<t:"+f+l(400))[l(230)+"e"](/{createdDate}/g,"<t:"+f+":d>").replace(/{createdDateTime}/g,l(235)+f+":f>")[l(230)+"e"](/{createdRelative}/g,l(235)+f+":R>")[l(230)+"e"](/{autoKickTime}/g,l(235)+v+l(400))}function getAutoKickTimestamp(e){var n=aC,e=parseTime(e);return Math[n(322)]((Date[n(206)]()+e)/1e3)}function getOrdinalSuffix(e){var n,t=aC,r={mkRZd:function(e,n){return e===n},iOhrf:function(e,n,t,r,i,a,o,c){return e(n,t,r,i,a,o,c)},SpgYo:function(e,n){return e==n},vfziS:function(e,n){return e!=n},fLNjx:function(e,n){return e+n}},i=e%10,a=e%100;if(r[t(358)](i,1)&&r[t(195)](a,11)){if(!r.mkRZd(t(256),t(367)))return e+"st";r[t(221)](q[t(357)],"LINK")&&(n=(new E)[t(317)+"el"](F.Name)[t(387)+"le"](G[t(200)]).setURL(r.iOhrf(H,I[t(200)],J,K,L,M,N,!1)),O.Emoji&&n[t(239)+"ji"](R[t(366)]),Q["addCom"+t(286)+"s"](n))}return 2==i&&12!=a?r[t(275)](e,"nd"):3==i&&13!=a?r.fLNjx(e,"rd"):e+"th"}async function updateStoredMembers(e,n){const t=aC,r=function(e,n){return e-n};let i=0;for(;i<3;)try{var a,o,c,l=await GuildData[t(297)+"e"]({guildID:n});return l?(c=await e.guilds.cache.get(n)[t(327)+"s"].fetch(),l.members=c.map(e=>e.id),void await l.save()):(a=new GuildData({guildID:n}),o=await e[t(257)].cache[t(234)](n)[t(327)+"s"][t(298)](),a[t(327)+"s"]=o[t(343)](e=>e.id),void await a[t(215)]())}catch(e){if(!(e.name==="Versio"+t(267)&&i<r(3,1)))return;i++}}function parseTime(e){var n=aC,t={dgvnW:function(e,n){return e*n},WYQCt:function(e,n){return e*n}},e=e.match(/^(\d+)([smhd])$/);if(!e)return 0;var r=parseInt(e[1]);switch(e[2]){case"s":return 1e3*r;case"m":return 1e3*t[n(203)](r,60);case"h":return t[n(203)](t[n(203)](t.WYQCt(r,60),60),1e3);case"d":return 60*t.dgvnW(24*r,60)*1e3;default:return 0}}setInterval(()=>{var e=aC;sentWelcomeEmbeds[e(197)]()},WELCOME_EMBED_RESET_INTERVAL),module.exports=async(r,i)=>{let a=aC,c={nJiOq:function(e,n){return e<n},dNLSE:function(e,n){return e!==n},CcWIK:"Alt ac"+a(225)+a(180)+"ed",ZgPap:function(e,n,t){return e(n,t)},XQMJB:"Error assign"+a(236)+a(314)+"ed role to n"+a(355)+a(187),syQis:"RyIqk",wAscf:function(e,n){return e(n)},gfGUK:a(342),GEUVW:function(e,n,t,r,i){return e(n,t,r,i)},CTldc:a(373),uSPBO:a(374),cKvuj:"./Veri"+a(389)+"on/Ver"+a(383)+"ionEvent"};if(i.id===r[a(202)].id||i[a(202)].bot)return;if(config.AltPrevention[a(271)+"d"]){let e=Date.now()-i[a(202)]["create"+a(283)],n=parseTime(config[a(191)+"vention"][a(249)+a(313)]);if(c[a(318)](e,n)){if(config[a(191)+"vention"].DM[a(271)+"d"]&&await sendAltPreventionDM(i),config[a(191)+a(281)+"n"][a(252)+"ts"])try{c.dNLSE(a(301),a(392))?await i.kick(c[a(201)]):l[a(227)](a(260)+" to kick alt account "+s.user[a(220)]+":",M)}catch(e){console[a(227)](a(260)+a(371)+a(226)+" accou"+a(309)+i[a(202)][a(220)]+":",e)}return void await sendAltPreventionLog(r,i,c[a(318)](e,n))}}if(config["Verifi"+a(330)+a(293)+"gs"][a(271)+"d"]&&config.VerificationSettings[a(271)+"Unveri"+a(290)+"le"])try{let e=await Verification.findOne({guildID:i[a(193)].id}),n=(e&&e["unverifiedRo"+a(381)]||(await c[a(224)](w,i.guild,e),e=await Verification[a(297)+"e"]({guildID:i.guild.id})),i.guild[a(245)][a(393)][a(234)](e[a(292)+a(290)+"leID"]));n&&await i.roles.add(n)[a(295)](console[a(227)])}catch(e){console[a(227)](c.XQMJB,e)}let l=a(388)+" / Unknown",s=0;try{r[a(242)+"s"].has(i[a(193)].id)||r[a(242)+"s"][a(321)](i.guild.id,new Map);let n=r.invites[a(234)](i[a(193)].id),e;try{a(349)===c.syQis?e=await i.guild.invites[a(298)]({cache:!1}):s["setFoo"+a(347)]({text:M,iconURL:w||j})}catch{e=null}e&&r[a(242)+"s"].set(i[a(193)].id,new Map(e.map(e=>[e.code,e[a(198)]])));var g=e?e.find(e=>n.get(e.code)<e.uses):null;if(g){var u=await Invite[a(297)+"eAndUp"+a(384)]({guildID:i[a(193)].id,inviteCode:g[a(179)]},{$inc:{uses:1},$addToSet:{joinedUsers:{userID:i.id,joinedAt:new Date}}},{upsert:!0,new:!0});if(!u[a(242)+"rID"]){let e=g?.[a(242)+"r"]?await i.guild[a(327)+"s"][a(298)](g[a(242)+"r"].id).catch(()=>null):null;u[a(242)+"rID"]=e.id,await u.save()}var d=await i.guild.members[a(298)](u.inviterID).catch(()=>null),f=(l=d?.[a(202)]?.tag||l,await Invite.find({guildID:i.guild.id,inviterID:u[a(242)+"rID"]}));s=f.reduce((e,n)=>e+n["joined"+a(228)][a(345)],0);try{if(a(391)===a(391)){let e=c[a(247)](require,"../utils/inv"+a(212)+"andleInviteJoin").handleInviteJoin;await e(r,i,g,d,s)}else o[a(339)+a(323)]({name:p(n.Author[a(265)],e,"",0,g,"",!1,!0),iconURL:t[a(233)][a(182)]?u(d.Author[a(182)],f,"",0,x,y,!1,!0):z})}catch{}}}catch(e){}config[a(396)+a(237)+"ge"].Enabled&&("BXsTC"===c.gfGUK?c[a(363)+"mbnail"](l):c.GEUVW(sendWelcomeMessage,r,i,l,s)),await updateStoredMembers(r,i[a(193)].id);try{var e,n,m,v,h;"ddFta"!==c[a(370)]?(e=await UserData.findOne({userId:i.id,guildId:i[a(193)].id}))&&e[a(246)+"d"]&&("mOfIx"===c[a(380)]?(m=(n=await GuildData.findOne({guildID:i[a(193)].id}))&&n[a(289)+"tRoleId"]?i[a(193)].roles[a(393)][a(234)](n[a(289)+"tRoleId"]):null)&&await i.roles.add(m,a(331)+"ying m"+a(399)+"ole on rejoin"):(v=s[a(396)+a(237)+"ge"].Embed[a(266)]==="{userB"+a(210)?M:w["Welcom"+a(237)+"ge"].Embed.Image)&&k[a(353)+"ge"](v)):(h=s[a(396)+a(237)+"ge"][a(258)].Thumbnail==="{user-"+a(192)+"}"?M:w[a(396)+a(237)+"ge"].Embed[a(348)+a(186)])&&k[a(363)+"mbnail"](h)}catch(e){console.error("Error checking use"+a(217)+" on join: "+e)}let{handleJoinRoles:M,createUnverifiedRoleIfNeeded:w}=require(c.cKvuj);await M(i)};