let aZ=b,{ButtonBuilder,ActionRowBuilder,EmbedBuilder,ButtonStyle,ChannelType,MessageFlags}=((()=>{for(var e=b,t=a();;)try{if(316198==-parseInt(e(505))*(parseInt(e(714))/2)+-parseInt(e(520))/3+parseInt(e(747))/4*(-parseInt(e(594))/5)+parseInt(e(498))/6*(-parseInt(e(631))/7)+parseInt(e(555))/8*(parseInt(e(536))/9)+parseInt(e(490))/10+parseInt(e(494))/11)break;t.push(t.shift())}catch(e){t.push(t.shift())}})(),require(aZ(691)+"d.js")),Verification=require(aZ(522)+aZ(653)+"/verif"+aZ(671)+"nSchema"),UserData=require(aZ(522)+"models"+aZ(593)+aZ(514)),{createCanvas}=require(aZ(576)),sharp=require(aZ(563)),{getConfig,getLang}=require("../../utils/core/c"+aZ(544)+"oader.js"),{getLogChannel}=require("../../"+aZ(655)+aZ(602)+aZ(707)+"sageUt"+aZ(686)),config=getConfig(),lang=getLang();function b(r,e){let i=a();return(b=function(e,t){e-=455;let n=i[e];void 0===b.liuach&&(b.XcAyKl=function(r){let i="",n="";for(let e=0,t,n,a=0;n=r.charAt(a++);~n&&(t=e%4?64*t+n:n,e++%4)&&(i+=String.fromCharCode(255&t>>(-2*e&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(let e=0,t=i.length;e<t;e++)n+="%"+("00"+i.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(n)},r=arguments,b.liuach=!0);var e=e+i[0],a=r[e];return a?n=a:(n=b.XcAyKl(n),r[e]=n),n})(r,e)}async function createUnverifiedRoleIfNeeded(t,n){let r=aZ,i={fSKef:function(e,t){return e*t},OSNMQ:function(e,t){return e===t},YeZXQ:"aUcsz"};if(config[r(477)+"cation"+r(648)+"gs"][r(608)+"d"]&&config["Verifi"+r(481)+"Settings"][r(608)+"UnverifiedRole"]){if(n.unverifiedRoleID)if(t[r(617)].cache.get(n[r(493)+"fiedRoleID"]))return;try{let e=await t.roles[r(701)]({name:"Unveri"+r(725),color:16734003,permissions:[],reason:r(577)+r(509)+r(538)+"d memb"+r(637)}),a=Array[r(634)+"y"](config.VerificationSettings["Channe"+r(532)])?config[r(477)+r(481)+"Settings"][r(679)+"lID"]:[config[r(477)+"cation"+r(648)+"gs"][r(679)+"lID"]];t[r(537)+"ls"].cache[r(496)+"h"](async t=>{let n=r;if(i.OSNMQ(t[n(673)],ChannelType["GuildT"+n(571)])||t[n(673)]===ChannelType["GuildV"+n(647)])if(a[n(598)](e=>e&&""!==e&&e!==n(623)+"L_ID"&&t.id===e))await t[n(618)+n(528)+n(629)+"es"][n(701)](e,{ViewChannel:!0})[n(589)](console[n(560)]);else if(n(743)!==i.YeZXQ){let e=t[n(745)](i.fSKef(j[n(748)](),e*l))+1;m.includes(e)||o[n(516)](e)}else await t["permissionOv"+n(629)+"es"].create(e,{ViewChannel:!1}).catch(console.error)}),n[r(493)+r(459)+r(592)]=e.id,await n[r(674)]()}catch(e){console[r(560)](r(627)+r(614)+"ed to create unverified "+r(687)+r(574)+"d "+t.id+": ",e)}}}function a(){let e=["lI4VlI4V","DgL0Bgu","i0zgruvb","y2fWDgnO","EvveEuS","ENnLuuO","C2LVBK92","DMvYAwz5","zwqGDg8G","E3nOyxbL","BeLe","C2v0vgL0","zMv0y2G","BMvUDenV","mtHXwMLiugG","y2HHBM5L","zxjPzMLL","vMvYAwz5","ENzlBNG","vg5tuxC","zgvSzxrL","C3r5Bgu","B25MAwDm","twvZC2fN","t1jxvxO","zxmGzM9Y","C3rHCG","uM9SzvrV","iZK2q0vc","Cvf2s3e","ChrPB24","zgf0yq","zMLSBfrL","mtC3ntGZmLn6ter4qG","i0q0qtvb","zMLSBa","zM9UDa","E251Btf9","zxjYB3i","z2v0q29U","vLjmC1u","C2HHCNa","C2v0u3r5","CuDHywu","wKzbv2e","yxrO","ig1LC3nH","EK5ZruC","qNv0Dg9U","zxH0","zMLSBfjL","yvrUzui","BIbNDwLS","zxbSEq","y2fUDMfZ","uM9SzsbM","DhjPBq","zw1IzwrZ","AwDU","sxzvzw8","Ahrptuy","zMLSBfn0","yufkuLC","zwn0","q0fmq1vm","y29TCg9U","tNrJrxi","y2f0y2G","Bgvtzxr0","C2L6zq","Bgvjra","l1vZzxje","nJKXnuDjrxnMuq","yMvNAw5q","BgvUz3rO","yurLC2nY","C29Tzq","y3jPChrP","z2v0","Aw5JBhvK","AgfUzgXL","zMLSDgvY","C3rVCa","iZq1qJDe","rxbOzw1L","v2L0Aa","rw5HyMXL","t0DkyNq","y3vZDg9T","BwvZC2fN","DxbKyxrL","Cg5N","xsbgywLS","AfjpCNG","u2vJB25K","CM9Szxm","CgvYBwLZ","ihvUDMvY","sw5JB3jY","vw52zxjP","CMfS","q0HbtK5f","EwrsAhu","x2nHChrJ","Dgv4DefS","w0vsuK9s","Aw1Hz2uV","zxj3CML0","zMv0y2GG","nZiYngPSBvrivq","q3vYDMvu","BIbWCM9J","AxnbCNjH","C2v0q3vZ","ANnRDfy","zxjZ","u3Htv2u","uMvJDa","ywrKq29T","ywrK","quLmDwK","CIb1CgrH","BxnNsuq","EvzLCMLM","nNb4iefY","B2LJzq","u2v0DgLU","zxzLCNK","zxnZoG","Dg9YFq","i2zMzMzM","Bw9KzwXZ","AxncDxr0","DxrPBhmV","BKTTwKe","i0zgnKi2","BwvUDdOV","rw1Izwq","CLHsruG","sKLuA3u","wKzjDuG","tgrdBgq","BgDxqwO","rxjYB3iG","yvrPDgXL","zwrsB2XL","DxnLCG","C2vSAw5L","wwnhrK8","AwnHDgLV","yxjJ","DhLWzq","C2f2zq","vgL0Bgu","CMvTB3zL","C2v0rw1V","uw5fBNK","q2HHBM5L","BwfW","q0fqveni","q1fMyuu","C2v0tgfI","AM9PBG","uxvLC3rP","AwXZlMPZ","CM9SzsbP","Bw92zvrV","sM9PBLjV","BxvXDvK","zgLZy29Y","zhrO","AgeUCg5N","zw50CW","CgTQyKG","EwXL","zwrPDfjL","Dg9tDhjP","uhjPBwfY","yxrL","y3jLyxrL","q2fWDgnO","zMLUze9U","qxbiA2K","zxHWB3j0","zw5K","CNmVBwvZ","quntCeO","DxvXEu4","u3vJy2vZ","DxvoreK","rvzes1e","rgHPCxi","mtm3mtjlD1nREgK","zhPgAvq","vhLWzq","vKf4r0u","y2fJAgu","Dgv4DejH","C3bSAxq","EwTNu0e","CgX5","AKzNtgq","zgvMzxjY","zMLLza","vLzktxy","u2vYDxG","rw1Izwrd","yxj5","zgLHBw9U","rgfUz2vY","BgLUzvrV","C3f1yxjL","zwn0q2fW","uhboAfe","C2v0rgvZ","C3rYB2TL","rw1VAMK","Aw5NihvZ","teDPt1C","Dhf2r3u","zvjVBgvZ","yvvJC3O","sw1Hz2u","zMXVB3i","uePIyNm","oteYsvvNrunM","CMfUzg9T","Cg9Uzw50","l2nHChrJ","DhjPyw5N","r3Hvs2C","zMLLzfjV","ANL4CM0","v2zMDKW","zgfUz2vY","u3vIBwL0","zNjVBq","y29SBgvJ","CeDks1a","CMvWBhK","y1PmEfm","D2zQr2y","wwPdvNK","zhvYAw5N","rgvZy3jP","y2vSBf8","tefJr3K","Aw9Uig1L","DxrnsMy","vMvYAwzP","r2HNqxC","C0vHvKG","y2vUDgvY","y2f0Aw9U","uMvTB3zL","zxiGCM9S","qvrpuG","wgj3rfG","CMvWBgfJ","BgfIzwW","AvDRv0W","CNLmzfG","ndC3ndaZmfHZzvn4Eq","y0j6ANm","DfvwvLu","Dw52zxjP","mtuXntG5ouvluLDuBW","C2v0q29S","zM9YrwfJ","ChjPBwfY","mtC3mgH2thPtBG","BwLKzgXL","Dg9Tswq","uK9mrv9j","Bxfizxu","BwvTyMvY","z3vPBgq","mvzwCNP2Ca","yMv6AwvY","DMvYAwzP","q1LyD0q","B3iGDw52","yNbMzeC","y2XLyxi","Aw5NCW","C29YDa","yxrH","DgfN","ChvZAa","uMXMuKu","DxnWtvy","u3r5Bgu","mZq5mdu2zwzXEufO","DhHZr2S"];return(a=function(){return e})()}async function sendOrUpdateVerificationMessage(n,a){var r=aZ,i={JITku:r(462),mqHeu:r(529)+r(570),cHDIu:function(e,t){return e!==t},ApHki:function(e,t){return e===t}};if(config["Verification"+r(648)+"gs"][r(608)+"d"]){let t;switch(config[r(477)+r(481)+r(570)].Color.toLowerCase()){case r(497)+"y":t=ButtonStyle.Primary;break;case"second"+r(729):t=ButtonStyle.Secondary;break;case"success":t=ButtonStyle[r(710)+"s"];break;case i[r(661)]:t=ButtonStyle[r(731)];break;default:t=ButtonStyle[r(616)+"ary"]}var o=(new ButtonBuilder).setCustomId(i[r(502)])[r(683)+"el"](config["Verifi"+r(481)+r(570)].Name).setStyle(t)[r(677)+"ji"](config[r(477)+r(481)+"Button"][r(738)]),l=(new ActionRowBuilder)["addCom"+r(455)+"s"](o),s=(new EmbedBuilder).setTitle(config["Verifi"+r(481)+"Embed"][r(675)])[r(495)+"or"](config.EmbedColors)[r(736)+r(599)+"on"](config[r(477)+r(481)+r(659)][r(472)+"ption"]);config.VerificationEmbed[r(744)]&&i.cHDIu(config.VerificationEmbed[r(744)][r(578)](),"")&&s.setImage(config[r(477)+"cationEmbed"].Image);try{let e;if(a.msgID)try{var c=(e=await n[r(611)+"es"].fetch(a.msgID))[r(579)][0]&&i[r(704)](e.embeds[0].title,s[r(553)][r(523)])&&e[r(579)][0]["descri"+r(552)]===s.data.description,u=e["compon"+r(694)][0]&&e[r(587)+r(694)][0][r(587)+r(694)][0][r(487)]===o.data.label;return c&&u?void 0:void await e.edit({embeds:[s],components:[l]})}catch(e){if("hROrx"!==r(615))i.add(t);else{if(10008!==e.code)return void console.error("[ERROR"+r(614)+r(530)+r(630)+"verification"+r(568)+"ge: ",e);a[r(644)]=null,await a.save()}}e=await n.send({embeds:[s],components:[l]}),a.msgID=e.id,await a.save()}catch(e){console.error(r(627)+r(614)+"ed to send o"+r(643)+"te verificat"+r(475)+"ssage: ",e)}}}async function handleVerification(e,t){var o=aZ,l={ACSpJ:function(e,t){return e<t},YcGFO:function(e,t){return e%t},zNsEG:function(e,t){return e-t},CtVjA:"rUvTY"};if(config[o(477)+"cation"+o(648)+"gs"].Enabled)try{if("rUvTY"===l.CtVjA){let e=await Verification[o(703)+"e"]({guildID:t.id});e=e||await new Verification({guildID:t.id}).save();var n=getLogChannel(t,config[o(477)+o(481)+"Settings"].ChannelID);n&&await sendOrUpdateVerificationMessage(n,e)}else if(l[o(708)](B[o(748)](),.7)){let t=Y[o(745)]((Z-1)/a0),e=l[o(670)](l[o(569)](a1,1),a2),n=e*(a3+a4)+a5,a=t*(a6+a7)+a8,r=a9.filter(e=>e!==t),i=r[ab.floor(ac[o(748)]()*r[o(596)])];ad[o(516)]({x:n,y:a,shape:i,color:ae[af[o(745)](ag.random()*ah.length)]}),ai[o(516)]({shape:i,position:aj[o(698)+"ng"]()})}}catch(e){}}async function handleVerificationInteraction(c,d){let b4=aZ,e={oimaV:"Error",jyxrm:function(e,t){return e+t},qGaae:function(e,t){return e+t},TBsQW:function(e,t){return e+t},OGJbt:function(e,t){return e!==t},muquY:function(e,t){return e%t},sEaVH:function(e,t){return e+t},RlfRE:function(e,t){return e*t},VVJMv:function(e,t){return e(t)},uuqyN:function(e,t){return e(t)},GxUKg:function(e,t){return e===t},aJuag:function(e){return e()},rXREH:function(e){return e()},VRLsU:function(e,t){return e*t},htOMF:"yjwGR",CQfaE:b4(529)+b4(570),aTneB:function(e,t){return e===t},jsktV:"AzZNV",AbisQ:b4(663),txsGk:b4(485),iDevS:b4(586)+b4(484),ryLdX:b4(559),JTlAn:function(e){return e()},MloiY:function(e){return e()},fhgNI:function(e,t){return e!==t},ydRhu:function(e,t){return e!==t},yUDyK:"UwJSC"};if(config[b4(477)+"cationSettings"].Enabled&&d[b4(654)+"on"]()&&d.customId===e[b4(682)])try{if(e[b4(573)](e[b4(636)],"AzZNV")){if(d[b4(724)+"ed"]||d.replied){if("nmxnA"!==e.AbisQ)return;d=e.oimaV}await d["deferR"+b4(575)]({flags:MessageFlags.Ephemeral});let f=d.member,g=config["Verifi"+b4(481)+b4(648)+"gs"][b4(477)+b4(667)+"ID"][b4(598)](e=>f[b4(617)][b4(718)].has(e));if(g)return e[b4(609)](e[b4(521)],b4(638))?void await d[b4(697)+"ply"]({content:lang.Verify["Alread"+b4(645)+"ied"],flags:MessageFlags[b4(606)+b4(622)]}):void 0;if(config["Verification"+b4(648)+"gs"].VerificationType===e.iDevS){let j="",k=0,l=["+","-"],m=l[Math[b4(745)](Math.random()*l[b4(596)])],n=e[b4(479)](Math[b4(745)](10*Math.random()),1),o=e.qGaae(Math[b4(745)](10*Math[b4(748)]()),1),p=lang[b4(539)][b4(685)+"onFormat"].replace(e[b4(489)],n)[b4(486)+"e"]("{opera"+b4(651),m)[b4(486)+"e"]("{num2}",o);try{k=eval(n+" "+m+" "+o)}catch{k="Error"}let q=()=>{var n=b4;if(!e[n(609)](n(518),n(518)))return(new EmbedBuilder)[n(533)+"le"](lang[n(539)].Required)["setDes"+n(599)+"on"]("**"+p+"**\n```"+(j||" ")+"```")[n(495)+"or"](44678);for(let t=0;t<a0;t++){var a=e[n(460)](ao*ap,t)+1,r=e.qGaae(t*e.TBsQW(aq,ar),as),i=at*(au+av)+aw;ax["fillSt"+n(696)]=n(652)+"f",ay.fillRect(r,i,az,aA),aB[n(601)+"es"](a)&&(aL[n(516)]({x:r,y:i,shape:aM,color:aN[aO[n(745)](aP[n(748)]()*aQ[n(596)])]}),aR[n(516)]({shape:aS,position:a.toString()}),aT+=a[n(698)+"ng"]())}},r=l=>{let c=b4;if(e[c(609)]("IyJkq",c(711)))return(new ActionRowBuilder)[c(640)+c(455)+"s"](l.filter(e=>e)[c(680)](e=>(new ButtonBuilder)[c(635)+"tomId"]("calc_"+e.label)[c(683)+"el"](e[c(487)])[c(564)+"le"](e[c(543)])));{let n=q[c(745)](r/s),a=e[c(690)](t,u),i=e.jyxrm(e[c(565)](a*e.sEaVH(v,l),z),n)-20,o=e[c(517)](n,e.jyxrm(a,i))+o+20;E[c(554)+"xt"]((F+1)[c(698)+"ng"](),i,o)}},s=()=>{var t=b4;return[e[t(726)](r,[{label:t(511),style:ButtonStyle.Danger},{label:"(",style:ButtonStyle.Primary},{label:")",style:ButtonStyle[t(699)+"y"]},{label:"/",style:ButtonStyle[t(699)+"y"]}]),r([{label:"7",style:ButtonStyle.Secondary},{label:"8",style:ButtonStyle[t(616)+"ary"]},{label:"9",style:ButtonStyle[t(616)+t(729)]},{label:"*",style:ButtonStyle[t(699)+"y"]}]),r([{label:"4",style:ButtonStyle.Secondary},{label:"5",style:ButtonStyle[t(616)+t(729)]},{label:"6",style:ButtonStyle[t(616)+t(729)]},{label:"-",style:ButtonStyle.Primary}]),e.uuqyN(r,[{label:"1",style:ButtonStyle[t(616)+t(729)]},{label:"2",style:ButtonStyle[t(616)+t(729)]},{label:"3",style:ButtonStyle.Secondary},{label:"+",style:ButtonStyle[t(699)+"y"]}]),e[t(709)](r,[{label:".",style:ButtonStyle[t(616)+"ary"]},{label:"0",style:ButtonStyle["Second"+t(729)]},{label:"00",style:ButtonStyle.Secondary},{label:"=",style:ButtonStyle.Success}])]},t=await d[b4(697)+"ply"]({embeds:[e.JTlAn(q)],components:e.MloiY(s),flags:MessageFlags[b4(606)+"ral"]}),u=e=>e[b4(668)].id===d.user.id,v=t[b4(701)+b4(545)+"eCompo"+b4(535)+"llector"]({filter:u,time:6e4});v.on("collect",async w=>{let b8=b4;if(w.customId["starts"+b8(607)]("calc_")){let z=w[b8(610)+"Id"].split("_")[1];if(z===b8(511))j="",await w[b8(612)]({embeds:[q()],components:s(),flags:MessageFlags[b8(606)+"ral"]});else if(e.GxUKg(z,"="))try{let A=eval(j);e.GxUKg(A,k)?(j=A.toString(),await w[b8(612)]({content:lang.Verify.Success,components:[],flags:MessageFlags[b8(606)+"ral"]}),await handleVerificationSuccess(d[b8(503)]),v[b8(604)]()):(j="",await w.update({embeds:[e.aJuag(q)],content:lang.Verify[b8(620)+b8(585)],components:s(),flags:MessageFlags[b8(606)+"ral"]}))}catch{j="Error",await w[b8(612)]({embeds:[q()],content:lang[b8(539)].Incorrect,components:s(),flags:MessageFlags.Ephemeral})}else j+=z,await w[b8(612)]({embeds:[e[b8(660)](q)],components:s(),flags:MessageFlags[b8(606)+b8(622)]})}}),v.on("end",async a=>{var i,l,c=b4;e.GxUKg(e.htOMF,e[c(582)])?0===a[c(591)]&&("xoPkz"===c(678)?f[c(560)](c(627)+c(614)+"ed to "+c(701)+c(619)+"ified "+c(687)+c(574)+"d "+g.id+": ",h):await d[c(697)+"ply"]({content:lang.Verify.Timeout,components:[],flags:MessageFlags.Ephemeral})):(i=n%2==0?o:p,l=e.RlfRE(q,r.PI)/s,c=e[c(562)](t.cos(l),i),l=u.sin(l)*i,0===v?a.moveTo(c,l):z.lineTo(c,l))})}else"BUTTON"===config[b4(477)+b4(481)+b4(648)+"gs"][b4(477)+b4(481)+b4(716)]?e.fhgNI("FNmcN","FNmcN")||(await d.editReply({content:lang.Verify.Success,flags:MessageFlags[b4(606)+"ral"]}),await handleVerificationSuccess(d[b4(503)])):e[b4(458)](config["Verifi"+b4(481)+"Settings"][b4(477)+"cation"+b4(716)],b4(681)+"A")&&await handleCaptchaVerification(d)}else e[b4(516)](f)}catch(A){e[b4(624)](b4(466),e[b4(526)])&&(console[b4(560)]("Error "+b4(471)+" verificatio"+b4(633)+b4(650),A),await d[b4(697)+b4(722)]({content:lang[b4(539)].Error,flags:MessageFlags["Epheme"+b4(622)]}))}}async function handleCaptchaVerification(l){const s=aZ,c={nKmZA:function(e,t){return e*t},mTZWD:"eHdhj",bpfdG:function(e,t){return e===t},ZsqdR:"wtXNf",ZFIuH:function(e,t){return e+t}},{captcha:e,captchaImage:t,targetShape:n}=await generateCaptcha(),a=(new EmbedBuilder)[s(533)+"le"](lang.Verify[s(702)+s(666)])["setDes"+s(599)+"on"](lang[s(539)][s(702)+s(597)+"iption"].replace(s(531)+"}",n)).setImage("attach"+s(658)+s(456)+s(693)).setColor(config[s(728)+"olors"]),u=[];for(let n=0;n<3;n++){let t=new ActionRowBuilder;for(let e=0;e<3;e++){var r=c[s(662)](c.ZFIuH(3*n,e),1);t[s(640)+"ponents"]((new ButtonBuilder)["setCus"+s(500)]("cell_"+r).setLabel(""+r)[s(564)+"le"](ButtonStyle["Second"+s(729)]))}u.push(t)}let i=(new ActionRowBuilder).addComponents((new ButtonBuilder).setCustomId("submit"+s(625)+"ha")[s(683)+"el"](lang[s(539)][s(463)+"Captcha"]).setStyle(ButtonStyle.Success)),f=(u.push(i),await l[s(697)+"ply"]({embeds:[a],components:u,files:[{attachment:t,name:s(525)+"a.png"}],flags:MessageFlags.Ephemeral}),new Set),g=l[s(537)+"l"][s(701)+s(545)+"eCompo"+s(535)+"llector"]({filter:e=>e[s(668)].id===l[s(668)].id,time:6e4});g.on(s(465)+"t",async r=>{let n=s,i={cZLxS:c.mTZWD};if(r.customId.startsWith("cell_")){let e=r.customId[n(720)]("_")[1];if(f.has(e)){if(!c[n(510)]("epiZM","epiZM"))return;f[n(542)](e)}else f[n(641)](e);let t=r[n(611)+"e"].components.map(e=>{let a=new ActionRowBuilder;return e.components.forEach(e=>{var t=b,n=ButtonBuilder[t(464)](e);e.customId===r.customId&&(t(546)!==i[t(468)]?n[t(564)+"le"](e.style===ButtonStyle[t(616)+t(729)]?ButtonStyle[t(699)+"y"]:ButtonStyle["Second"+t(729)]):c=!0),a["addCom"+t(455)+"s"](n)}),a});await r.update({components:t})}else if("submit_captcha"===r.customId){var t=Array[n(464)](f).sort().join("");if(c[n(510)](t,e))if("wtXNf"!==c.ZsqdR){var a=new u;for(let e=0;e<q;e++){var o=c[n(656)](v,w)+e+1;a[n(640)+n(455)+"s"]((new z)["setCus"+n(500)]("cell_"+o)[n(683)+"el"](""+o)[n(564)+"le"](t.Secondary))}p[n(516)](a)}else await handleVerificationSuccess(l[n(503)]),await r[n(612)]({content:lang.Verify.Success,components:[],embeds:[],files:[],flags:MessageFlags[n(606)+n(622)]}),g.stop();else await r[n(467)]({content:lang[n(539)][n(620)+n(734)+"tcha"],flags:MessageFlags["Epheme"+n(622)]})}}),g.on(s(706),async e=>{var t=s;0===e.size&&await l[t(697)+"ply"]({content:lang[t(539)].Timeout,components:[],embeds:[],files:[],flags:MessageFlags["Epheme"+t(622)]})})}async function generateCaptcha(){let c=aZ,u={IvUeo:c(712),jypVH:function(e,t){return e-t},Serux:function(e,t){return e-t},utMJf:function(e,t){return e*t},pkjbH:function(e,t){return e+t},HtDRN:"#2c3e50",tUVVU:function(e,t){return e/t},YjCVy:"circle",Dhiqr:function(e,t){return e/t},LvwjZ:c(733),VAxGE:function(e,t){return e/t},AILui:c(457)+"le",CYXwD:function(e,t){return e/t},WvxvW:function(e,t){return e/t},tqvGu:function(e,t){return e/t},pIYLz:function(e,t){return e%t},EbMZx:function(e,t){return e/t},ZVaJm:function(e,t){return e/t},iWkWL:function(e,t){return e*t},LAcGy:function(e,t,n){return e(t,n)},cBzjs:"#4ECDC4",UBVYB:c(556)+"5",aAJRW:function(e,t){return e+t},lgWAj:function(e,t){return e+t},TnSQw:function(e,t){return e*t},GhgAw:function(e,t){return e<t},PJbbs:"bold 1"+c(646)+"ial",CMAQS:c(499),NtcEr:"ykgSA",ZFAWa:function(e,t){return e*t},zvKnx:function(e,t){return e+t}},f=100,t=u[c(476)](3,f)+u[c(488)](4,10),n=u[c(695)](300,40),i=u[c(474)](createCanvas,t,n),g=i[c(561)+"text"]("2d"),o=(g.fillStyle="#f0f0f0",g.fillRect(0,0,t,n),[u[c(470)],"square",c(457)+"le","star","heart",c(730)+"d"]),l=[c(657)+"B",u[c(491)],c(605)+"1",c(550)+"4",c(524)+"D",u.UBVYB],s=[],d=[],a="",v=o[Math[c(745)](Math.random()*o.length)],y=[],e=u[c(584)](2,Math.floor(2*Math.random()));for(;y.length<e;){let e=u[c(664)](Math[c(745)](u.iWkWL(Math[c(748)](),u[c(541)](3,3))),1);y.includes(e)||y[c(516)](e)}var r,b,h=Array.from({length:9},(e,t)=>t+1)[c(603)](e=>!y.includes(e));for(let t=0;t<3;t++)for(let e=0;u[c(478)](e,3);e++){var m=u.aAJRW(3*t,e)+1,B=110*e+10,C=110*t+10;g[c(583)+"yle"]="#ffffff",g[c(572)+"ct"](B,C,f,f),y[c(601)+"es"](m)&&(s.push({x:B,y:C,shape:v,color:l[Math.floor(Math[c(748)]()*l.length)]}),d.push({shape:v,position:m.toString()}),a+=m.toString())}h[c(496)+"h"](e=>{let r=c;if(u.IvUeo!==u[r(581)]){let a=new i;return g[r(587)+"ents"][r(496)+"h"](e=>{var t=r,n=a[t(464)](e);e.customId===y.customId&&n[t(564)+"le"](e.style===M[t(616)+t(729)]?w[t(699)+"y"]:z[t(616)+t(729)]),a.addComponents(n)}),a}var t,n,a;Math[r(748)]()<.7&&(n=Math.floor(u.jypVH(e,1)/3),t=110*(u[r(727)](e,1)%3)+10,n=u[r(476)](n,u[r(695)](f,10))+10,a=(a=o.filter(e=>e!==v))[Math[r(745)](Math[r(748)]()*a[r(596)])],s.push({x:t,y:n,shape:a,color:l[Math.floor(Math[r(748)]()*l.length)]}),d.push({shape:a,position:e.toString()}))}),a=a[c(720)]("")[c(513)]()[c(684)](""),s.forEach(({x:e,y:t,shape:n,color:a})=>{var r=c,a=(g[r(674)](),g["fillSt"+r(696)]=a,g["stroke"+r(519)]=u.HtDRN,g["lineWi"+r(692)]=2,u.pkjbH(e,u.tUVVU(f,2))),e=u[r(695)](t,u[r(492)](f,2)),t=.5*(Math.random()-.5);switch(g["transl"+r(700)](a,e),g.rotate(t),n){case u[r(470)]:g.beginPath(),g[r(672)](0,0,u[r(713)](60,2),0,2*Math.PI),g.fill(),g[r(737)]();break;case u.LvwjZ:g.fillRect(u[r(717)](-60,2),-30,60,60),g["stroke"+r(639)](-30,-30,60,60);break;case u[r(642)]:g[r(595)+r(567)](),g[r(688)](0,-30),g.lineTo(30,u[r(508)](60,2)),g.lineTo(u.WvxvW(-60,2),30),g.closePath(),g.fill(),g[r(737)]();break;case r(548):var i=u[r(741)](60,2);g["beginP"+r(567)]();for(let e=0;e<u.utMJf(5,2);e++){var o=0===u.pIYLz(e,2)?i:15,l=e*Math.PI/5,s=Math.cos(l)*o,l=Math.sin(l)*o;0===e?g[r(688)](s,l):g[r(732)](s,l)}g.closePath(),g[r(557)](),g[r(737)]();break;case"heart":g.beginPath(),g.moveTo(0,15),g["bezier"+r(632)+"o"](u.EbMZx(60,4),-15,30,0,0,30),g[r(506)+"CurveTo"](-30,0,u.ZVaJm(-60,4),-15,0,15),g.fill(),g[r(737)]();break;case"diamond":g.beginPath(),g.moveTo(0,-30),g.lineTo(30,0),g.lineTo(0,30),g.lineTo(-30,0),g.closePath(),g[r(557)](),g.stroke()}g.restore()}),g[c(558)]=u[c(746)],g["fillSt"+c(696)]="#2c3e50",g[c(626)+c(580)]=c(480),g[c(719)+c(669)]=u.CMAQS;for(let e=0;e<u.utMJf(3,3);e++)c(721)===u[c(588)]?(b=Math.floor(e/3),r=e%3,r=u[c(566)](r,110)+10+f-20,b=u[c(540)](u.zvKnx(110*b,10),20),g[c(554)+"xt"]((e+1).toString(),r,b)):10..error(c(665)+"restoring user roles for "+t.user[c(515)]+":",n);let p=i.toBuffer(c(628)+"png"),M=await sharp(p)[c(613)]({quality:90,compressionLevel:8}).toBuffer();return{captcha:a,captchaImage:M,shapePositions:d,targetShape:v}}async function handleJoinRoles(e){var t=aZ;if(config[t(689)+t(590)+t(512)].Enabled)for(var n of config[t(689)+t(590)+t(512)][t(689)+"les"]){n=e[t(504)].roles.cache.get(n);n&&await e.roles.add(n).catch(e=>{})}config["JoinRo"+t(590)+t(512)].RestoreRoles.Enabled&&await restoreUserRoles(e)}async function restoreUserRoles(s){let c=aZ,e={aNzgJ:function(e,t){return e+t},ZqagE:function(e,t){return e+t},eEcGy:function(e,t){return e*t},wfjGf:function(e,t){return e||t},buJan:function(e,t){return e!==t},SPpTU:function(e,t){return e===t},WffvL:function(e,t){return e===t},gQnaZ:c(715),qQvKq:function(e,t){return t<e}};try{if(!e.buJan(c(735),"XsQoH"))return(new g).setTitle(h[c(539)].Required)["setDes"+c(599)+"on"]("**"+i+"**\n```"+e[c(469)](j," ")+"```").setColor(44678);{var u,f,d=await UserData.findOne({userId:s.id,guildId:s[c(504)].id});if(!d)return e.SPpTU(c(740),c(740))?void 0:void d[c(560)](c(627)+"] Fail"+c(530)+c(630)+c(507)+"cation"+c(568)+"ge: ",t);if(!d.roles||e[c(461)](d.roles[c(596)],0)){if("dzFiT"===e.gQnaZ)return;var v=e.aNzgJ(e.aNzgJ(i*o,k),1);l[c(640)+c(455)+"s"]((new v).setCustomId(c(473)+v)[c(683)+"el"](""+v)[c(564)+"le"](n[c(616)+c(729)]))}let t=[],{Blacklist:a,Whitelist:r}=config["JoinRo"+c(590)+"ings"]["Restor"+c(742)],i=Array[c(634)+"y"](r)&&e[c(551)](r.length,0)&&!r[c(649)](e=>e===c(501)+"D"||""===e),o=Array.isArray(a)&&0<a.length&&!a.every(e=>e===c(501)+"D"||""===e);for(u of d[c(617)])if("UGFnK"!==c(527)){let e=s[c(504)][c(617)].cache[c(600)](u);if(e){let e=!1;i&&!r[c(601)+"es"](u)&&(e=!0),(e=o&&a[c(601)+"es"](u)?!0:e)||t[c(516)](u)}}else{var y=D*E+F+1,b=e.ZqagE(G*(H+I),J),w=K*e.ZqagE(L,M)+N;O.fillStyle=c(652)+"f",P.fillRect(b,w,Q,R),S.includes(y)&&(a2.push({x:b,y:w,shape:a3,color:a4[a5[c(745)](e.eEcGy(a6[c(748)](),a7[c(596)]))]}),a8[c(516)]({shape:a9,position:y[c(698)+"ng"]()}),aa+=y[c(698)+"ng"]())}for(f of t){s.guild[c(617)].cache[c(600)](f);await s[c(617)][c(641)](f)[c(589)](e=>{})}}}catch(e){console[c(560)](c(665)+"restor"+c(739)+c(483)+c(547)+" "+s.user.tag+":",e)}}async function handleVerificationSuccess(e){const a=aZ,r="LBYlT",i=function(e,t){return t<e};try{var s,c,f,g=await e[a(504)].members[a(534)](e.id).catch(()=>null);if(!g){if("scTsE"!==r)return;var d=l.from(m);n[a(610)+"Id"]===o[a(610)+"Id"]&&d[a(564)+"le"](u[a(543)]===v["Second"+a(729)]?w[a(699)+"y"]:z[a(616)+"ary"]),t.addComponents(d)}if(config["Verification"+a(648)+"gs"]["Verifi"+a(667)+"ID"]&&i(config[a(477)+a(481)+"Settings"]["Verifi"+a(667)+"ID"].length,0))for(var y of config[a(477)+"cation"+a(648)+"gs"].VerifiedRoleID)await g.roles[a(641)](y).catch(e=>{});if(config.VerificationSettings[a(549)+a(482)])for(s of Array.isArray(config.VerificationSettings["RoleTo"+a(482)])?config[a(477)+"cationSettings"][a(549)+a(482)]:[config[a(477)+"cation"+a(648)+"gs"][a(549)+"Remove"]])s&&""!==s&&"ROLE_ID"!==s&&g.roles.cache.has(s)&&await g[a(617)].remove(s)[a(589)](()=>{});config[a(477)+a(481)+"Settings"]["Enable"+a(621)+"fiedRole"]&&(c=await Verification.findOne({guildID:e[a(504)].id}))&&c["unveri"+a(459)+a(592)]&&(f=e.guild.roles[a(718)].get(c["unverifiedRo"+a(592)]))&&g.roles[a(718)].has(f.id)&&await g[a(617)][a(676)](f)[a(589)](e=>{})}catch(e){}}module[aZ(705)+"s"]={handleVerification:handleVerification,createUnverifiedRoleIfNeeded:createUnverifiedRoleIfNeeded,handleVerificationInteraction:handleVerificationInteraction,handleJoinRoles:handleJoinRoles};