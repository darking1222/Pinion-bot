let O=b,{EmbedBuilder,ActionRowBuilder,ButtonBuilder,ButtonStyle,MessageFlags}=((()=>{for(var e=b,t=a();;)try{if(348802==+parseInt(e(437))+-parseInt(e(504))/2+parseInt(e(459))/3+parseInt(e(496))/4+-parseInt(e(610))/5*(parseInt(e(595))/6)+parseInt(e(486))/7+parseInt(e(558))/8)break;t.push(t.shift())}catch(e){t.push(t.shift())}})(),require(O(421)+O(483))),Suggestion=require("../../models"+O(424)+"stion"),suggestionUtils=require(O(484)+"estion"+O(456)),{getConfig,getLang}=require(O(458)+"utils/core/c"+O(601)+"oader.js"),getLogChannel=require(O(458)+"utils/handlers/messageUt"+O(564)).getLogChannel,config=getConfig(),lang=getLang(),GuildData=require("../../models"+O(481)+"DataSchema"),{formatLongTime,formatShortTime,calculatePercent,replacePlaceholders}=require(O(458)+"utils/"+O(523)+O(469)+O(542)+"s"),{buildSuggestionEmbed,buildVoteRow,buildDecisionEmbed}=require(O(458)+"utils/"+O(523)+"tions/"+O(574)+"actory");function formatSelectValues(t){let n=O,s={wrFjQ:function(e,t){return e===t},OZgBZ:n(488)},r={};return Object.entries(config[n(436)+n(426)+n(417)][n(522)+n(434)+n(478)+"uts"]||{})[n(462)+"h"](([e,a])=>{let o=n;if(s.wrFjQ(a.Type,o(603)+o(638))){let n=t["modal_"+a.ID];if(n&&a.Options){var g=a[o(492)+"s"][o(450)](e=>e[o(641)]===n);if(g)if("UnQVd"!==s[o(527)]){let e=g.Emoji||"",t=g[o(435)]||n;r[o(535)+a.ID+("_forma"+o(573))]=(e+" "+t)[o(544)](),r[o(535)+a.ID+"_label"]=t,r["modal_"+a.ID+"_emoji"]=e}else 50007!==e.code&&g.error("Error sending DM:",j);else r[o(535)+a.ID+(o(582)+o(573))]=n}}}),r}let generateUniqueId=async()=>{const n=O,a=function(e,t){return e<t},o=n(604),g="ABCDEFGHIJKL"+n(539)+n(635)+"YZabcd"+n(530)+n(607)+n(454)+n(562)+n(540)+"89";let s,r=!1;for(;!r;){s="";for(let e=0;a(e,5);e++){if("hkMzo"!==o)return r[n(439)]({content:t[n(436)+"tion"][n(494)+n(460)+n(455)],flags:e["Epheme"+n(608)]});s+=g[n(440)](Math.floor(Math[n(477)]()*g[n(447)]))}let t=await Suggestion.findOne({uniqueId:s});if(!t){if("DqNQN"!==n(617))return r.reply({content:t["Sugges"+n(646)]["Sugges"+n(524)+n(566)],flags:h[n(563)+"ral"]});r=!0}}return s},updateSuggestionEmbed=async(d,c)=>{var f=O,w={TtxlJ:f(523)+"tion:d"+f(502),QCxRn:f(619),fsexe:function(e){return e()}};try{if("eaUTC"===w.QCxRn)return j.replied||k[f(491)+"ed"]?t[f(431)+"ply"]({content:u[f(436)+f(646)].SuggestionAccepted}):q.reply({content:r[f(436)+f(646)][f(436)+"tionAccepted"],flags:s.Ephemeral});{var h=await Suggestion[f(556)+"Id"](c);if(!h)throw new Error("Update"+f(593)+f(471)+" not found.");var m=d.channels.cache[f(537)](h["channe"+f(419)]),p=await m[f(644)+"es"].fetch(h[f(644)+f(576)]);if(!p)throw new Error(f(578)+"e not "+f(631));var v,D,S=p.embeds[0];if(!S)throw new Error(f(464)+"not found.");let e=config[f(436)+"tionEmbed"][f(474)+f(498)+"tion"],t=h[f(453)+"ata"]?Object[f(554)+"tries"](h.modalData):{},n=formatSelectValues(t),a=await d.users[f(618)](h.authorId)[f(557)](()=>null);if(!a){if(f(568)===f(568))return;e[f(637)+f(510)].getEventManager().emitSafe(w.TtxlJ,{suggestion:t.toObject(),reason:n,deniedBy:a[f(526)]||o[f(499)],guild:g[f(579)],originalAuthor:s})}let o=m.guild,g=await o[f(580)+"s"][f(618)](h[f(499)+"Id"])[f(557)](()=>null),s=g?g["displa"+f(597)]:a[f(430)+"me"],r={user:a.username,displayName:s,suggestion:h[f(596)],SuggestionID:h.uniqueId,LongTime:w[f(529)](formatLongTime),ShortTime:w[f(529)](formatShortTime),upvotecount:h.upvotes,downvotecount:h[f(516)+f(570)],...calculatePercent(h[f(553)+"s"],h[f(516)+"tes"]),...t,...n},i=e[f(515)](e=>replacePlaceholders(e,r)).join("\n"),l=new EmbedBuilder(S)[f(636)+f(592)+"on"](i),u=buildVoteRow(h.uniqueId,r);h[f(614)+"Id"]&&(v=await d[f(451)+"ls"][f(445)][f(537)](h[f(614)+"Id"]))&&(D=(new ButtonBuilder)[f(432)+"el"](lang.Suggestion[f(472)][f(495)].Discuss)[f(639)+"le"](ButtonStyle[f(500)]).setURL(v[f(572)]),u["addCom"+f(561)+"s"](D)),await p[f(485)]({embeds:[l],components:[u]})}}catch(e){console[f(443)](f(629)+"updating sug"+f(584)+"n embed:",e)}};async function createSuggestion(e,t,n,a={}){let o=O,g={pYxWR:function(e){return e()},rMbIF:o(627)};try{var s=config["Sugges"+o(426)+o(417)],r=t.guild||t.channel&&t.channel[o(579)],i=r?getLogChannel(r,s[o(482)+"lID"]):null;if(i){var l,u,d,c=t[o(499)]?t[o(499)][o(549)+o(624)+"rURL"]():t[o(526)][o(549)+o(624)+o(545)](),f=await generateUniqueId(),w=t.author||t[o(526)],h=w.id,m=w[o(430)+"me"],p=t[o(580)]||await t[o(579)].members[o(618)](h).catch(()=>null),v=p?p["displa"+o(597)]:m,D=formatSelectValues(a),S={...a,...D,user:m,displayName:v,suggestion:n,SuggestionID:f,LongTime:g[o(571)](formatLongTime),ShortTime:formatShortTime(),upvotecount:0,downvotecount:0,...calculatePercent(0,0)},y=buildSuggestionEmbed(S,c),z=buildVoteRow(f,S),M=await i.send({embeds:[y],components:[z]}),L=await Suggestion.create({uniqueId:f,guildId:t.guild.id,text:n,authorId:h,messageId:M.id,channelId:i.id,upvotes:0,downvotes:0,voters:[],modalData:a}),b=(global["addonL"+o(510)]&&global[o(637)+o(510)]["getEve"+o(594)+"ger"]()[o(538)+"fe"](o(523)+o(509)+o(446),{suggestion:L.toObject(),text:n,author:w,guild:t[o(579)],channel:i,message:M,modalData:a,uniqueId:f}),config.SuggestionSettings[o(614)+"Name"].replace(/{user}/gi,m)),B=(b&&(l=await M.startThread({name:b,autoArchiveDuration:60}))&&(u=(new ButtonBuilder)[o(432)+"el"](lang.Suggestion.Embed[o(495)].Discuss)[o(639)+"le"](ButtonStyle.Link).setURL(l[o(572)]),d=(new ActionRowBuilder).addComponents(z[o(428)+o(533)]).addComponents(u),await M.edit({components:[d]}),L[o(614)+"Id"]=l.id,await L[o(587)]()),t.guild.id),E=await GuildData.findOne({guildID:B});if(E?(E["totalS"+o(508)+"ions"]=(E["totalS"+o(508)+o(634)]||0)+1,await E.save()):await new GuildData({guildID:B,cases:0,totalMessages:0,stars:{},totalSuggestions:1,timesBotStarted:0})[o(587)](),t[o(476)+o(433)]||t[o(589)+"d"]||t[o(491)+"ed"]){if("eUaMq"===o(623))return n[o(431)+"ply"]({content:a.Suggestion[o(436)+"tionAc"+o(559)]});if(t[o(589)+"d"]){if("Episz"===g.rMbIF)return a[o(439)]({content:g[o(436)+o(646)][o(436)+"tionAc"+o(559)],flags:s["Epheme"+o(608)]});await t.followUp({content:lang["Sugges"+o(646)][o(436)+"tionCreated"],flags:MessageFlags["Epheme"+o(608)]})}else t[o(491)+"ed"]?await t[o(431)+"ply"]({content:lang[o(436)+o(646)][o(436)+"tionCreated"]}):await t[o(439)]({content:lang.Suggestion[o(436)+"tionCr"+o(505)],flags:MessageFlags.Ephemeral})}else if(t[o(499)]&&t[o(451)+"l"]){let e=await t[o(451)+"l"].send({content:t[o(499)]+", "+lang["Sugges"+o(646)]["SuggestionCr"+o(505)]});setTimeout(()=>e.delete().catch(console[o(443)]),5e3)}}else{var I="Sugges"+o(611)+o(569)+o(466)+"ound or bot does n"+o(518)+"e access to "+o(423);if(t.commandId||t.replied||t.deferred)t[o(589)+"d"]?await t.followUp({content:I,flags:MessageFlags["Epheme"+o(608)]}):t.deferred?await t[o(431)+o(626)]({content:I}):await t.reply({content:I,flags:MessageFlags[o(563)+"ral"]});else if(t[o(499)]&&t.channel){let e=await t.channel.send({content:I});config["Sugges"+o(426)+o(417)]["Delete"+o(609)+o(480)+o(599)]&&setTimeout(()=>e[o(606)]()[o(557)](console.error),config[o(436)+"tionSettings"][o(609)+"eMessa"+o(513)+o(575)])}}}catch(e){console[o(443)]("Error in creating suggestion:",e),console[o(443)](o(436)+"tion channel"+o(418)+o(541)+"fig:",config["Sugges"+o(426)+o(417)][o(482)+"lID"]);r=lang[o(436)+o(646)].Error;if(t[o(476)+o(433)]||t.replied||t[o(491)+"ed"])t.replied?await t.followUp({content:r,flags:MessageFlags["Epheme"+o(608)]}):t[o(491)+"ed"]?await t["editRe"+o(626)]({content:r}):await t[o(439)]({content:r,flags:MessageFlags["Epheme"+o(608)]});else if(t.author&&t.channel){let e=await t[o(451)+"l"][o(640)]({content:t[o(499)]+", "+r});setTimeout(()=>e[o(606)]().catch(console[o(443)]),5e3)}throw e}}function a(){let e=["wMrvzMS","DMuGDxb2","zMLUza","y2HHBM5L","ywnJzxb0","Bw9KywXe","CxjZDhv2","C3nLza","vxrPBhm","DgvK","lI4VlI4V","mta3mJuZAgjZt2LP","EvbYB2nL","Aw9UoG","zM9YrwfJ","ihn1z2DL","rw1IzwqG","DgLVBJOG","ig5VDcbM","zMLUze9U","ChzVDgvK","DgLVBNmV","yxbcwMG","zxn0Aw9U","rw1Izwq","t3P0D3q","rw1Izwre","z2v0vxnL","y29TBwfU","CMfUzg9T","zgfSsw5W","uvDVExu","zu1LC3nH","l2D1AwXK","q2HHBM5L","zc5QCW","lI9ZDwDN","zwrPDa","mJGZodmZmKjHueDNzW","D1HqvMy","ww1nAfq","vM90zq","rgvUAwvK","zgvMzxjY","t3b0Aw9U","DgLVBI4","qwXYzwfK","qNv0Dg9U","mtC0nJyWohfszhDJDq","BMCGDgHY","zxnJCMLW","yxv0Ag9Y","tgLUAW","CLzVDgvK","zw5Pzwq","y3niAxC","mtm5mJuYmejKsu5fvW","zwf0zwq","DgLVBIbH","qw4GzxjY","DwDNzxn0","DgLVBJPJ","B2fKzxi","rg93BNzV","zYbettO","z2vuAw1L","BMqU","BwfW","zg93BNzV","y2Dkwwm","B3qGAgf2","DgLVBIbU","vxnLCKLJ","DxjYzwqG","qwrKAxrP","C3vNz2vZ","DgLVBK5V","ihrVihbY","DxnLCG","t1PNqLO","ExbL","zNnLEgu","zwzNAgLQ","Ee1jwMu","DgLVBKfJ","zw50CW","BhjLywr5","Bw9KywXF","zwfKoG","z2v0","zw1PDfnH","tu5puffs","mJm0nty3","B20Gy29U","AgvSCgvY","DxnLCNm","DhjPBq","CLvsta","rgLYzwn0","z2vY","D2fYBG","zgLZCgXH","Aw4GDxb2","AguGC3vN","qwnJzxb0","Dxb2B3rL","zNjVBuvU","DMuGywXY","zMLUzej5","y2f0y2G","ody3mJe2sfL4wePK","y2vWDgvK","EvvWDM90","Cg9Uzw50","D3H5EJaX","rxbOzw1L","AwXZlMPZ","vNPwyKW","DezVDw5K","Dw5vDLO","wu5OCgO","AgfUBMvS","DgvZ","CfL4v1i","DxjS","DhrLza","zw1Izwrg","B3v0","zuLK","yMvK","twvZC2fN","z3vPBgq","BwvTyMvY","DgLVBKrL","x2zVCM1H","C2vUzern","z2vZDgLV","C3rPB246","C3rHDhvZ","C2f2zq","B3rLu3vN","CMvWBgLL","B3DUDM90","zgvSzxrP","y3jPChrP","zcbZDwDN","BNrnyw5H","mJe4mdi4zM54DLjV","Dgv4Da","Eu5HBwu","vw5HyMXL","z2vZ","zwfKEsb1","B25MAwDm","zgvUEq","u3rYAw5N","AgTnEM8","r2jsB1m","zgvSzxrL","A2XTBM9W","CMfS","rMfPBhvY","ndvRqMXyrgC","DgLVBIbJ","zxbSEq","ugvUzgLU","DgHYzwfK","Aw4GywnJ","CLzVDgvu","rhfouu4","zMv0y2G","yu9fA2y","Dw5KoIa","ihrOAxmG","whfArLe","ENP3D2y","Euf2yxrH","z2v0rxzL","CgX5","Bwz3vwO","y29Kzq","rxjYB3iG","sw1sAuW","zM91BMqU","ihbYB2nL","B2nLC3mG","Aw9UCW","u1rvvLDy","C2v0rgvZ","ywrKB25m","u2vSzwn0","C2v0u3r5","C2vUza","vMfSDwu","ywrKvM90","Dg9pyMPL","BwvZC2fN","rxjYB3i","DgLVBG","CYbZDwDN","BM90igzV","B3rLza","DhrPBMDZ","ieLeigzY","BeLK","B3qGzM91","zgLZy29Y","vxnLCIbU","AxqU","l1n1z2DL","BNzVDgvK","DgLVBLnL","BMLLza","y29TCg9U","BeLe","DxnLCM5H","zwrPDfjL","C2v0tgfI","zeLK","B25HBe1V","tgfIzwW","u3vNz2vZ","mZG1odiZvLLvAgvT","Aw9UlG","CMvWBhK","y2HHCKf0","zM9SBg93","ww91igHH","zxjYB3i","DxrOB3iG","y2fJAgu","CMvHDgvK","BgvUz3rO"];return(a=function(){return e})()}async function upvoteSuggestion(e,t,n){var a=O,o={QWoyu:"upvote",YbFKP:"You have alr"+a(600)+a(468)+a(621)+"sugges"+a(493),xMIZe:a(516)+"te",GbRoS:function(e,t,n){return e(t,n)}};try{t[a(491)+"ed"]||t.replied||await t.deferReply({flags:MessageFlags["Epheme"+a(608)]});var g=await Suggestion.findOne({uniqueId:n});if(!g)return t[a(441)+"Up"]({content:lang[a(436)+a(646)][a(436)+a(524)+a(566)]||"Sugges"+a(519)+"ot found.",flags:MessageFlags[a(563)+"ral"]});if(suggestionUtils["hasUse"+a(501)](g,t[a(526)].id)){var s=suggestionUtils[a(475)+a(616)+"ype"](g,t.user.id);if(s===o[a(479)])return t.followUp({content:lang[a(436)+"tion"]["Alread"+a(560)+"ed"]||o.YbFKP,flags:MessageFlags.Ephemeral});s===o[a(531)]&&await suggestionUtils["remove"+a(489)](g,t[a(526)].id)}await suggestionUtils[a(642)+"e"](g,t.user.id,"upvote"),await o[a(605)](updateSuggestionEmbed,e,g._id),await t.followUp({content:lang["Sugges"+a(646)].Upvoted||a(442)+a(449)+"oted t"+a(551)+"gestion.",flags:MessageFlags[a(563)+a(608)]})}catch(e){console[a(443)]("Error "+a(550)+a(588)+"gestion:",e),await t[a(441)+"Up"]({content:lang.Suggestion[a(645)]||"An error occ"+a(521)+"while upvoting the suggestion.",flags:MessageFlags[a(563)+"ral"]})}}async function acceptSuggestion(l,u,d,c){let f=O,w={rHiIp:function(e,t){return e!==t},lowvt:f(630),xlToL:f(436)+"tion n"+f(420)+"nd",gsIjE:f(552)+"ed",VmHRp:function(e,t,n){return e(t,n)},GabNe:"suggestion:accepted"};try{if("csHiw"!==f(503))return w[f(548)](f(436)+f(506)+f(444)+"not fo"+f(620)+h[f(499)+"Id"]),i[f(431)+f(626)]({content:"Unable to pr"+f(633)+"sugges"+f(465)+f(422)+"ot fou"+f(514),flags:j["Epheme"+f(608)]});{let t=await Suggestion[f(467)+"e"]({uniqueId:d});if(!t){if(u[f(439)])return w.rHiIp(w.lowvt,f(630))?c[f(439)]({content:w[f(436)+f(646)][f(436)+f(581)+"nied"],flags:h["Epheme"+f(608)]}):u[f(439)]({content:lang.Suggestion["SuggestionNo"+f(566)],flags:MessageFlags.Ephemeral});throw new Error(w.xlToL)}if(t[f(586)]!==f(613)+"g"){if(u[f(439)])return u.reply({content:lang.Suggestion[f(494)+"yProce"+f(455)],flags:MessageFlags["Epheme"+f(608)]});throw new Error("Suggestion a"+f(534)+" processed")}if(t.status=w.gsIjE,t.reason=c,t[f(614)+"Id"]){let e=await l.channels.cache.get(t.threadId);e&&await e.delete().catch(e=>console[f(443)](f(629)+f(591)+"ng thr"+f(536),e))}let e=await l.users[f(618)](t.authorId)[f(557)](()=>null);if(!e)return u["editRe"+f(626)]({content:f(598)+" to process "+f(523)+"tion: User not fou"+f(514),flags:MessageFlags["Epheme"+f(608)]});let n=e[f(430)+"me"],a=u[f(579)],o=await a.members[f(618)](t.authorId)[f(557)](()=>null),g=o?o[f(549)+"yName"]:n,s=(t.UserIcon=e["displayAvata"+f(545)](),buildDecisionEmbed(n,t,"accept",c,g)),r=w.VmHRp(getLogChannel,u[f(579)],config["Sugges"+f(532)+"ceptEm"+f(577)][f(552)+"Channe"+f(429)]);return r?(await r[f(640)]({embeds:[s]}),await(await l.channels.cache.get(t["channe"+f(419)])[f(644)+"es"].fetch(t[f(644)+"eId"])).delete()):await(await l[f(451)+"ls"][f(445)][f(537)](t[f(451)+f(419)])[f(644)+"es"].fetch(t["messag"+f(576)]))[f(485)]({embeds:[s],components:[]}),await t.save(),global[f(637)+f(510)]&&global[f(637)+"oader"][f(625)+"ntMana"+f(547)]()[f(538)+"fe"](w.GabNe,{suggestion:t[f(643)+"ct"](),reason:c,acceptedBy:u[f(526)]||u.author,guild:u[f(579)],originalAuthor:e}),config["SuggestionSe"+f(417)].sendDM&&await sendSuggestionDM(l,t,f(452),s),u.reply?u.replied||u[f(491)+"ed"]?u.editReply({content:lang[f(436)+f(646)].SuggestionAccepted}):u.reply({content:lang[f(436)+f(646)].SuggestionAccepted,flags:MessageFlags.Ephemeral}):void 0}}catch(e){if(console[f(443)]("Error "+f(615)+"epting"+f(463)+"stion:",e),u.reply)return u[f(589)+"d"]||u[f(491)+"ed"]?u.editReply({content:lang["Sugges"+f(646)].Error}):u.reply({content:lang[f(436)+"tion"].Error,flags:MessageFlags["Epheme"+f(608)]});throw e}}async function denySuggestion(i,l,d,c){let f=O,w={wXPVf:"gaJMe",VSkuf:function(e,t){return e!==t},XqZFQ:"DKKKV",ZVCtv:"Sugges"+f(506)+f(534)+f(632)+f(455),cgJYc:"Denied",PRqiq:function(e,t){return e!==t},Oztwt:f(602)};try{if("wsNrn"===w[f(487)])return j[f(589)+"d"]||k[f(491)+"ed"]?t[f(431)+"ply"]({content:u.Suggestion[f(645)]}):q.reply({content:r[f(436)+"tion"].Error,flags:s[f(563)+"ral"]});{var h=await Suggestion.findOne({uniqueId:d});if(!h){if(l[f(439)])return l.reply({content:lang[f(436)+f(646)][f(436)+"tionNotFound"],flags:MessageFlags[f(563)+"ral"]});throw new Error(f(436)+"tion n"+f(420)+"nd")}if(w.VSkuf(h.status,f(613)+"g")){if("qcgNj"===w[f(622)]){if(o.error(f(629)+"in accepting"+f(463)+f(585),g),p.reply)return y.replied||z[f(491)+"ed"]?I[f(431)+f(626)]({content:J["Sugges"+f(646)][f(645)]}):F[f(439)]({content:G[f(436)+f(646)].Error,flags:H["Epheme"+f(608)]});throw x}if(l.reply)return l[f(439)]({content:lang[f(436)+"tion"]["Alread"+f(460)+"ssed"],flags:MessageFlags[f(563)+"ral"]});throw new Error(w.ZVCtv)}if(h.status=w[f(517)],h.reason=c,h[f(614)+"Id"]){let e=await i[f(451)+"ls"].cache[f(537)](h.threadId);e&&await e.delete().catch(e=>console.error("Error "+f(591)+f(497)+f(536),e))}var m=await i[f(543)].fetch(h[f(499)+"Id"]).catch(()=>null);if(!m)return console[f(548)](f(436)+f(506)+"uthor not fo"+f(620)+h.authorId),l.editReply({content:"Unable"+f(525)+f(633)+f(523)+"tion: "+f(422)+f(420)+"nd.",flags:MessageFlags["Epheme"+f(608)]});let e=m.username,t=l[f(579)],n=await t.members.fetch(h[f(499)+"Id"]).catch(()=>null),a=n?n[f(549)+f(597)]:e,o=(h[f(520)+"on"]=m[f(549)+f(624)+f(545)](),buildDecisionEmbed(e,h,f(602),c,a)),g=getLogChannel(l[f(579)],config[f(436)+"tionDenyEmbed"].DenyChannelID);if(g){await g[f(640)]({embeds:[o]});let e=i.channels[f(445)][f(537)](h[f(451)+"lId"]),t=await e.messages.fetch(h.messageId);await t.delete()}else{let e=i[f(451)+"ls"].cache[f(537)](h[f(451)+f(419)]),t=await e.messages.fetch(h.messageId);await t[f(485)]({embeds:[o],components:[]})}if(await h[f(587)](),global[f(637)+f(510)]){if(w.PRqiq(f(565),"VzVbL"))return c.reply({content:w[f(436)+f(646)]["Alread"+f(460)+f(455)],flags:h["Epheme"+f(608)]});global[f(637)+f(510)][f(625)+"ntManager"]().emitSafe(f(523)+"tion:denied",{suggestion:h[f(643)+"ct"](),reason:c,deniedBy:l.user||l[f(499)],guild:l[f(579)],originalAuthor:m})}return config[f(436)+f(426)+f(417)][f(583)]&&await sendSuggestionDM(i,h,w[f(473)],o),l.reply?l[f(589)+"d"]||l.deferred?l[f(431)+"ply"]({content:lang.Suggestion.SuggestionDenied}):l.reply({content:lang[f(436)+"tion"]["Sugges"+f(581)+"nied"],flags:MessageFlags["Epheme"+f(608)]}):void 0}}catch(e){if(console.error(f(629)+"in denying suggest"+f(461),e),l.reply)return l[f(589)+"d"]||l[f(491)+"ed"]?l.editReply({content:lang[f(436)+f(646)].Error}):l.reply({content:lang["Sugges"+f(646)][f(645)],flags:MessageFlags[f(563)+"ral"]});throw e}}function b(o,e){let g=a();return(b=function(e,t){e-=414;let n=g[e];void 0===b.OZeawQ&&(b.VvAMAy=function(o){let g="",n="";for(let e=0,t,n,a=0;n=o.charAt(a++);~n&&(t=e%4?64*t+n:n,e++%4)&&(g+=String.fromCharCode(255&t>>(-2*e&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(let e=0,t=g.length;e<t;e++)n+="%"+("00"+g.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(n)},o=arguments,b.OZeawQ=!0);var e=e+g[0],a=o[e];return a?n=a:(n=b.VvAMAy(n),o[e]=n),n})(o,e)}async function sendSuggestionDM(e,t,n,a){var o=O,g={apBZh:function(e,t){return e===t},xXzLT:"accept"};try{var s=await e.users[o(618)](t.authorId).catch(()=>null);if(!s)return console.warn(o(436)+"tion author "+o(415)+o(620)+t[o(499)+"Id"]),interaction.editReply({content:"Unable to process sugges"+o(465)+o(422)+o(420)+"nd.",flags:MessageFlags[o(563)+o(608)]});var r=g[o(470)](n,g.xXzLT)?lang[o(436)+o(646)][o(546)+"Message"].Accepted:lang[o(436)+o(646)].DirectMessage[o(490)];await s.send({content:r,embeds:[a]})}catch(e){50007!==e[o(628)]&&console[o(443)]("Error sendin"+o(512),e)}}async function downvoteSuggestion(e,n,a){var o=O,g={unUvZ:function(e,t){return e===t},txUsc:o(448),oMFbr:o(516)+"te",TSiAh:o(442)+"ve dow"+o(425)+" the suggest"+o(438),UwgPi:"Error in downvoteSuggestion:"};try{if(!g.unUvZ(g.txUsc,"ZdUfk"))return j.replied||k.deferred?t[o(431)+"ply"]({content:u["Sugges"+o(646)][o(436)+"tionDe"+o(427)]}):q[o(439)]({content:r[o(436)+o(646)]["Sugges"+o(581)+"nied"],flags:s.Ephemeral});n.deferred||n[o(589)+"d"]||await n["deferR"+o(612)]({flags:MessageFlags["Epheme"+o(608)]});var i=await Suggestion[o(467)+"e"]({uniqueId:a});if(!i)return n.followUp({content:lang["Sugges"+o(646)]["Sugges"+o(524)+o(566)]||"Suggestion not found.",flags:MessageFlags.Ephemeral});if(suggestionUtils.hasUserVoted(i,n[o(526)].id)){var l=suggestionUtils[o(475)+o(616)+o(528)](i,n[o(526)].id);if(g[o(567)](l,g.oMFbr))return n.followUp({content:lang[o(436)+"tion"]["AlreadyDownv"+o(416)]||o(442)+o(555)+"eady d"+o(590)+"ed thi"+o(414)+"estion.",flags:MessageFlags["Epheme"+o(608)]});"upvote"===l&&await suggestionUtils.removeVote(i,n[o(526)].id)}await suggestionUtils.addVote(i,n.user.id,"downvote"),await updateSuggestionEmbed(e,i._id),await n[o(441)+"Up"]({content:lang[o(436)+"tion"][o(511)+o(457)]||g.TSiAh,flags:MessageFlags.Ephemeral})}catch(e){console.error(g.UwgPi,e),await n[o(441)+"Up"]({content:lang["Sugges"+o(646)][o(645)]||o(507)+"or occurred while "+o(516)+"ting the sug"+o(584)+"n.",flags:MessageFlags.Ephemeral})}}module.exports={createSuggestion:createSuggestion,upvoteSuggestion:upvoteSuggestion,downvoteSuggestion:downvoteSuggestion,updateSuggestionEmbed:updateSuggestionEmbed,acceptSuggestion:acceptSuggestion,denySuggestion:denySuggestion};