let cT=b,{SlashCommandBuilder,EmbedBuilder,ButtonBuilder,ButtonStyle,ActionRowBuilder,MessageFlags,PermissionsBitField,StringSelectMenuBuilder}=((()=>{for(var e=b,t=a();;)try{if(423685==-parseInt(e(717))+-parseInt(e(1008))/2*(-parseInt(e(1045))/3)+-parseInt(e(1117))/4*(parseInt(e(945))/5)+parseInt(e(334))/6+parseInt(e(186))/7+-parseInt(e(480))/8+parseInt(e(1040))/9)break;t.push(t.shift())}catch(e){t.push(t.shift())}})(),require("discord.js")),moment=require("moment"),colors=require("ansi-colors"),Ticket=require("../../"+cT(1043)+cT(524)+"ckets"),Blacklist=require("../../../models/blacklist"),{getConfig,getLang,getCommands}=require(cT(904)+cT(343)+cT(1103)+"e/conf"+cT(362)+"er.js"),handleTicketClose=require(cT(904)+cT(343)+"ls/tic"+cT(454)+"icketClosure"+cT(963)).handleTicketClose,safeInteractionResponse=require("../../../uti"+cT(824)+cT(454)+cT(404)+cT(1029)+"s").safeInteractionResponse,notifyWatchers=require("../../../uti"+cT(824)+cT(454)+cT(680)+"atcher"+cT(487)).notifyWatchers,config=getConfig(),lang=getLang(),channelRenameQueue=new Map,RENAME_COOLDOWN=6e4,MAX_RETRIES=5,lastRenameTime=0,isProcessing=!1,priorityChangeCooldowns=new Map,PRIORITY_CHANGE_COOLDOWN=5e3,PRIORITY_COLORS={High:"#ff0000",Medium:cT(266)+"0",Low:"#00ff00"};async function processRenameQueue(){var n=cT,r={tSZTB:function(e,t){return e<t},ZQiOU:function(e,t){return e-t},izyIL:"oDgKY",degrv:n(879),yJzEg:function(e,t){return e<t},RbRib:"rate l"+n(873),MhQPQ:"RbPAm"};if(!isProcessing){isProcessing=!0;try{var s,i,t=Array.from(channelRenameQueue.entries());for([s,i]of t){var a=Date.now();if(!r.tSZTB(r.ZQiOU(a,lastRenameTime),RENAME_COOLDOWN))try{var o,c=await i.channel[n(1108)][n(1047)+"ls"][n(262)](s),l={name:i.name[n(808)+n(424)]()};i.ticket&&i.ticketType&&i.ticketType[n(635)+"lTopic"]&&(o=i[n(1123)+"Type"][n(635)+"lTopic"].replace("{ticketType}",i[n(1123)+"Type"][n(470)])[n(159)+"e"](n(418)+"d}","<@"+i.ticket.userId+">")[n(159)+"e"](n(1094),"<@"+i[n(1123)].userId+">").replace(n(659)+"t-id}",i[n(1123)][n(1123)+"Id"]).replace(n(400)+n(910),i[n(1123)][n(176)+"ty"])[n(159)+"e"](n(1111)+"ed-at}",moment(i.ticket.createdAt).format(n(250)+n(416)+", h:mm"+n(479))).replace(n(1097)+"ory}",c.parent?.[n(286)]||n(800)),l.topic=o);let e=null,t=0;for(;r.tSZTB(t,3);){if(r.izyIL!==n(492))return s.reply({content:n(1078)+"icket "+n(853)+n(359)+"losed.",flags:i[n(1152)+n(527)]});try{e=await c[n(964)](l,n(500)+" prior"+n(345)+"date");break}catch(e){if(r.degrv!==n(879))return s.reply({content:n(814)+n(1113)+"e is disabled.",flags:i["Epheme"+n(527)]});console[n(476)](n(956)+(t+1)+(n(1041)+"d:"),e),t++,r[n(709)](t,3)&&await new Promise(e=>setTimeout(e,1e3))}}if(!e)throw new Error(n(1053)+" to update channel after retries");if(e.name===l.name){if(n(161)===n(175))return s.reply({content:n(726)+" not h"+n(152)+"rmissi"+n(322)+n(1023)+"atchers.",flags:i[n(1152)+n(527)]});lastRenameTime=a,channelRenameQueue[n(177)](s)}else i[n(1082)+"s"]=(i.retries||0)+1,i.retries>MAX_RETRIES&&channelRenameQueue[n(177)](s);await new Promise(e=>setTimeout(e,1e3))}catch(e){if(console[n(476)](n(909)+n(854)+"ng cha"+n(684)+s+":",e),e.message[n(149)+"es"](r.RbRib)){if(i.queuedAt=a,i[n(1082)+"s"]=(i.retries||0)+1,i.retries>MAX_RETRIES){if(r[n(703)]===n(1120))return t[n(653)+"ply"]({content:n(635)+n(248)+n(1006)});channelRenameQueue[n(177)](s)}}else channelRenameQueue.delete(s)}}}finally{isProcessing=!1}}}async function queueChannelRename(s,i,a=null,o=null){let c=cT,l={mhdds:"You do not h"+c(152)+"rmissi"+c(322)+c(686)+"this t"+c(580),eNZXP:function(e,t){return e-t},kerxz:function(e,t){return e!==t},jbMJz:c(659)+"tType}",Pfrvu:function(e,t){return e(t)},LSikH:c(800),GMYJS:function(e,t){return e<t},YEREk:function(e,t){return e===t},KKtZB:c(500)+" priority up"+c(1034),FYxCT:function(e,t){return e+t},PJbgg:function(e,t){return e<t},iwQsF:c(1053)+" to update c"+c(933)+c(713)+" retries",OaTFr:c(909)+"during"+c(982)+c(1122)+c(933)+c(198)+"e:"},u=Date.now();if(l[c(1110)](u,lastRenameTime)>=RENAME_COOLDOWN&&!isProcessing)if(l[c(551)](c(274),"PQzrF"))a.addFields(o);else try{{let t=await s.guild[c(1047)+"ls"][c(262)](s.id),e={name:i[c(808)+"rCase"]()};var g;a&&o&&o.ChannelTopic&&(g=o.ChannelTopic.replace(l.jbMJz,o[c(470)]).replace("{userid}","<@"+a.userId+">")[c(159)+"e"](c(1094),"<@"+a[c(1049)]+">")[c(159)+"e"](c(659)+c(316),a.ticketId)[c(159)+"e"](c(400)+"ity}",a.priority).replace("{created-at}",l[c(989)](moment,a["create"+c(199)]).format(c(250)+c(416)+c(753)+c(479)))[c(159)+"e"]("{category}",t.parent?.[c(286)]||l.LSikH),e[c(520)]=g);let n=null,r=0;for(;l.GMYJS(r,3);)try{if(l[c(972)](c(911),c(911))){n=await t.edit(e,l.KKtZB);break}if(!l.member[c(674)][c(548)][c(951)](e=>t[c(1124)+"tRole"][c(149)+"es"](e.id)))return t[c(230)]({content:l.mhdds,flags:e.Ephemeral})}catch(e){console[c(476)]("Retry "+l[c(310)](r,1)+" failed:",e),r++,l.PJbgg(r,3)&&await new Promise(e=>setTimeout(e,1e3))}if(!n)throw new Error(l[c(1128)]);if(n[c(286)]===e.name)return lastRenameTime=u,!0}}catch(e){console.error(l.OaTFr,e),e.message.includes(c(388)+"imit")||console[c(476)](c(581)+"cted e"+c(467)+c(937)+"channel update:",e)}return channelRenameQueue[c(569)](s.id,{channel:s,name:i["toLowe"+c(424)](),ticket:a,ticketType:o,queuedAt:u,retries:0}),!1}let queueProcessor=setInterval(processRenameQueue,5e3);function parseDuration(e){let r=cT,t={fSrWF:function(e,t){return e*t}},s={s:1e3,m:t[r(1107)](1e3,60),h:36e5,d:t.fSrWF(36e5,24),w:t[r(1107)](60*t.fSrWF(1e3,60)*24,7)},n=e[r(1025)](/(\d+\s*[smhdw])/g);return n?n[r(749)]((e,t)=>{var n=r,n=parseInt(t[n(1025)](/\d+/)[0]),t=t.match(/[smhdw]/)[0];return e+n*s[t]},0):0}function isValidHttpUrl(e){try{var t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){return!1}}function formatDuration(e){var t=cT,e=moment[t(263)+"on"](e),n=e.days(),r=e.hours(),s=e[t(856)+"s"](),e=e[t(409)+"s"]();return 0<n?n+"d "+r+"h "+s+"m":0<r?r+"h "+s+"m":0<s?s+"m "+e+"s":e+"s"}async function getUserPriority(t){var r,s=cT,a={OOBsH:function(e,t){return e!==t},UaFJg:s(329),nZGTk:s(401)},o=config[s(869)+"ty"];if(!o[s(849)+"d"])return o["Defaul"+s(225)+"ity"];for(r of Object.keys(o[s(558)]))if(a[s(724)](a[s(405)],s(1068))){var c=o.Levels[r];for(let e of c.Roles){if(s(722)!==s(722))return o.error("Error "+s(575)+s(778)+s(259)+"el:",r),!1;if(t.roles[s(548)].has(e)){if(a[s(1130)]===s(401))return r;r["setAut"+s(478)]({name:c.Author[s(1004)],iconURL:e[s(1017)].Icon||null})}}}else h.error(s(909)+"during immediate channel"+s(198)+"e:",i),j[s(770)+"e"][s(149)+"es"]("rate l"+s(873))||m.error("Unexpe"+s(275)+"rror d"+s(937)+s(1047)+"l update:",n);return o[s(606)+s(225)+"ity"]}process.on("exit",()=>{clearInterval(queueProcessor)});let replacePlaceholders=(e,t)=>{var n=cT,r={qZcrJ:"{worki"+n(867)+n(216)+n(1071)+n(701),RqdQa:n(299)+n(867)+n(954)+n(390)+"y}",SInFs:n(299)+n(867)+n(216)+n(160)+n(664),HDhaX:"{workinghours_star"+n(1072)+n(627),MOmWU:"{worki"+n(867)+n(954)+n(1070)+n(365),hipcx:n(299)+"nghours_star"+n(671)+n(365),pQahm:"{workinghours_end_"+n(545)+"ay}",JHhRl:"{workinghours_end_sunday}"};return e?e[n(159)+"e"](n(299)+n(867)+"s_start}",t.start).replace("{worki"+n(867)+n(961),t.end)[n(159)+"e"](n(299)+"nghour"+n(216)+n(327)+n(365),t["monday"+n(233)]).replace(n(299)+n(867)+"s_end_"+n(342)+"}",t[n(342)+n(144)])[n(159)+"e"](r.qZcrJ,t.tuesdayStart).replace(r[n(340)],t[n(390)+n(450)])[n(159)+"e"](r[n(983)],t.wednesdayStart)[n(159)+"e"](n(299)+"nghour"+n(954)+n(829)+n(701),t["wednes"+n(773)])[n(159)+"e"](r[n(798)],t[n(1070)+n(246)+"t"]).replace(r.MOmWU,t["thursd"+n(874)]).replace(r.hipcx,t[n(471)+"Start"])[n(159)+"e"]("{worki"+n(867)+"s_end_"+n(471)+"}",t[n(471)+"End"])[n(159)+"e"]("{workinghour"+n(216)+"t_saturday}",t[n(545)+n(246)+"t"])[n(159)+"e"](r.pQahm,t["saturd"+n(874)])[n(159)+"e"]("{workinghours_start_sund"+n(365),t[n(890)+n(233)])[n(159)+"e"](r[n(507)],t.sundayEnd):""};function a(){let e=["AgfUBMvS","BMLUzYb0","C2fNDLy","AM9PBG","DxjPBMCG","y2HPBMCG","DhjPBq","zufUzfvW","BgfZDdmW","Aw1L","phq6","A29KzxzL","nJaXmevqrhnbtq","ugnPsKK","DgLVBI4G","zw5HyMXL","Ag91CG","y2HPBgrY","C29Tzq","vKHMAvq","ywrKu3rY","C19LBMrF","C2v0sw1H","uMv0CNKG","z3vYyxrP","zKHYD3u","zZOGtM8G","yxr1CW","C19LBMr9","jg51BwvY","lMPZ","zwrPDa","BYb0AguG","zcWGAxqG","u2v0DgLU","vhLWzvbS","s3f6wu8","y2f0y2G","tK9Fuevs","wuvsrwS","ihnLy29U","r28GDg8G","zxqUieL0","tgjKzwW","y3Ljse4","BMvS","jhjLC29S","zw5PBMCG","svvOCwG","igLTBwvK","u0LUrNm","wK1WqKW","BsbcBgfJ","BMvSihrV","y2XVC2vK","rMLRChm","ugzYDNu","Bs9JAgfU","qwnJzxb0","vxnLCKjS","AeLoww0","CMf0Aw5N","igzPBgu","ignOyw5U","DgvYlG","CNjLBNqG","zNvHq1q","ifbSzwfZ","C2vUza","yMXHy2TS","zM9YrwfJ","vgv4Da","qxr0ywnO","zM91BMqU","zw50CW","otK4ntbMCejHvvy","DcbHyM91","y29TCg9U","zwf0zwqG","DhmUEw1S","BxnN","zwvUihrY","zxf1zxn0","sLDRExq","qxv0Ag9Y","BgrZ","ihDHDgnO","t0PdEKq","igjSywnR","AhzYA2S","DMLLDYb3","AwCH","Bwf0y2G","yxnLihrY","yxrLCI4","zxqGv2f0","DgLSCY5Q","sfLptNa","DxnLCL9H","yxzNuMvZ","BwLSBgLZ","zgf0zq","ihjLBw92","pIboBYbU","y2HHBMDL","zcbcEq","DhLWzsbO","mta2ndG0nZzMufPmyuy","igzHAwXL","AxzPDhK","lI4VBw9K","BM90igzV","nMTysxP6sW","BMCGDgLJ","y2HHBM5L","Dw5PEa","DxnLCKLK","zwLby3K","ywrKzwrb","DxnLCL9Y","rMfPBgvK","ywrKq29T","zeDYB3vW","yxjLig5V","y2vSBgvK","BMCGDgHP","qNv0Dg9U","DwXtu3e","Ag91CNm","Aw9U","ihnLBNqH","C2CUDgLT","C2fNztO","CMvWzwf0","C2v0qxv0","EejoDgi","zgf0zsbJ","DgH1CNnK","Df90DwvZ","Df90AhvY","BgfZDdDe","vxnLCK1Z","zxqGDhLW","yw5JzwXS","Dxn0B21s","vgHPCYb0","sKrsuLC","zxqTC3LZ","qwrKigeG","CMv0CMLL","ywDHAw4U","DYbUyw1L","DgfSifrP","jcrTC2CU","C2v0u3r5","vhLWzq","ywrKvxnL","rw5xAwC","DYb0AwnR","4PYfifvZzxi","CYbHBhjL","E3vZzxj9","zgrLzcb0","B20GkIO","E2nHDgvN","ihrVDgfS","CM1PC3nP","zgrKza","vgL0Bgu","tMDrr3u","BhmVy29Y","vxnLCG","qxf2yuS","vMLLD0nO","zLnYv0y","z3vPBgq","igeGDgLJ","zu5Awfa","E2nYzwf0","4Q2qifjHDgK","zMvHDhvY","4PQG77IpiefUige","zgrLza","jgHVDxi","mte5nKPgA29JBa","DfvozNi","kIO8qa","D3rjr1e","rgf5CW","Awf0zsbJ","DgLJA2v0","u3vWCg9Y","q2fUy2vS","BwvKvgLJ","ihjLy2vP","AxDrC0y","Dhj5igfN","BLPhvgS","B3jHA1e","DMvKlG","v29YA2LU","uhjVDMLK","A2v0oG","B3iGDg8G","u2vUze1L","AezNtMO","DcbHBIbH","igLZig5V","igeGDxnL","B0DWEMW","zgLZCgXH","Bw92Aw5N","CNLjra","C1Lrtvi","pIdINiuGq2W","AfDnt0y","vKfjseG","CYbIzwvU","B25Zig9U","rxbOzw1L","B3nLzca","Dg8GDgHL","B25ZihrV","CMvUyw1P","C29YDa","Bw1HBMqU","zxqGy29T","ifbYAw9Y","z2v0","pIdWN5gKienS","r3niq1y","vgHLig5L","rw5K","ywXLCNrn","yxzNrMLY","8j+uLYbODhrW","A2L6zMu","Aw5JBhvK","uMvHze1L","zwfZB25Z","yxzLihbL","CMuGyxjL","4Psb4Psb4Psb4Psb4Psb4Psb","Axr5igfN","zsbUB3qG","ihvZzwqG","Dw53yxrJ","CMvWBgfJ","Df93zwrU","BgzvzeG","Dg8GDgLJ","pIdWN5kSifrV","A2v0ihn0","ihvZzxiG","BgvHBK9W","CLvsta","weDMrNK","pIdWN5okienY","B3j5suqG","qwrTAw5P","C2fNzsbK","CYbUB3qG","BYbMAxGG","uLbKs3a","ChjPB3jP","zgvSzxrL","C3nHz2vi","Aw4GDgLJ","CgX5","C2v0vgL0","tgfZDdi0","C0jAsKu","DhnGcG","pIdINzqGvw4","mtKYnJe0mxL2tLvUDa","B2X1DgLV","kIOkvxbK","CxvLC3rP","A1P4qwm","Axn0zwrc","ihrOzsb1","u3vJy2vZ","ihDPDgHV","EKLdC0C","zcbZAwXL","B3nLzcaO","ihvWzgf0","zef0","zMLNDxjL","sNH4ueG","u3rHzMzn","zwfZzsb0","yMvLBIbY","ihrVignH","u2nOzwr1","y2TLDa","icaG4OcIieu","D2LSBcbI","ihbHBMvS","y2XVC2vY","Bw92zwqG","DwLYzwq","C2v0q3vZ","zcb0AwnR","C19ZDgfY","igLUzM9Y","wfroDxC","r01WCu8","vgHLihrP","yxj5","AwnRzxrZ","jhn0yxr1","A2Tyufy","DfbYAw9Y","BM5LBa","ywr5ignS","Aw5SAw5L","BwjUywLS","CMvWBhK","DxnLCIb0","ugDOwfi","u3rHCNq","ig9Uzsb0","Axn0zwqU","ChbVCNrs","rgf0zq","igLUihrO","Bg9WBwvU","DxrPB24","Dg9eyxrL","tLbetxy","Bg9N","Aw9UigHH","iZe3nJLg","yxLtDgfY","shb3uwy","BcbUB3qG","uhrjCu4","tu1ntsbe","4PscicdWN5olieu","zw4GCMvZ","pIOQ","zxn0yw1W","ihrVihrO","yw5UzwW","C2v0q29S","Ee5ZA2W","DcbJyw5J","y2TLDcbO","zwrbDa","zMv0y2G","zhvYyxrP","DhLWzq","sKfSwuq","i2zMzMyW","Esb0AwnR","CMvHC29U","ywr5igfJ","pIbbDMvY","B3j0uM9S","CgvYBwLZ","q29UDgfJ","uff6CKy","y3rLzcbL","vMfYAw91","pIdWN46RifrV","igLMig5V","C3bVBNnL","DgvK","igrLBgv0","ywrKihrV","BgvKlG","BgWGDxnL","rM9VDgvY","BMfTzq","DuHctK4","y0fdz0m","D2f0y2HP","qMXHy2TS","C2v0vgH1","zsOQcGPq","C3rHCNq","Dw5KoIa","rgvZy3jP","oLi+","BwLUuMvZ","zsb0AwnR","E3DVCMTP","ihvZzxi6","oNq+","zgvMzxjs","BNnLvgLT","vw5Uyw1L","zwqGyNKG","Du1YsuO","BgvYDdO","zxj3CML0","rvbQug4","rLL4q1q","Axn0B3j5","vMLLDYbH","rgfUz2vY","Dg90ywXn","BNnLigLZ","Dc1Pzh0","wNfOAMm","y29Yzs1M","D2f0y2HL","q2XVC2uG","igzYB20G","B24GDg8G","swnVBG","tg9NrMfP","y2XVC2vF","y2fUy2vS","Df9TB25K","icbtDxbW","t0frvg8","y1rXz2W","yxmGyMvL","BwfW","uuTOEuC","mZe3ntiWEhfZzNvY","ihjLyxnV","C3vIDhjH","8j+tIYbuAwnR","Dg8GCMvJ","Aw5Nt3b0","uNfKuwe","q0furuDp","Bw9Uzgf5","lI4VDxrP","ihnLy3rP","Axr5ihvW","AguGy2XV","zxr0Aw5N","zxnZywDL","y2HLCNmU","Aw5RCW","u2vJB25K","u3LKuMq","Cw1YCMC","yxrJAgLU","AwnZ","DxjYzwqG","ywLUigXH","Axn0","zwfKEsbJ","ChvZAa","ihrYEsbH","AwDmB2fK","weHLEKS","q2HHBMDL","yxL9","pIbtBg93","ignHBIbV","B3bLBG","y29Kzq","B3iGB2nJ","ihvZzxiU","ywLS","u3rHDhm","DgLVBG","x3jLyxnV","sgLNAa","y29UzMLN","y2TLDc4","zxiGDg8G","igj5ihT1","EsbVzIb0","zdOGya","tg93","zw4Gy2fU","rxfSAxu","ihrPy2TL","AgfZigjL","CMf0zsbS","r3fSqNu","DhvLC2rH","pIdWN5Er77IpierL","CMvUyw1L","AgLZignV","ywXLCNqG","u2HVDYbN","AwnLCW","zgLUzYbM","ihr5CguG","ywDLifjL","E3bYAw9Y","rfrhCMO","mxWYnhWY","A1bMDeK","AwnRzxrv","vwfgsMC","B25Z","vgHLihvZ","zsb0AguG","C2vJB25K","AwnsyxrP","BMuGAxmG","y2HLy2S","zgvSzxrP","DxjLigLZ","yxm6","BYbzwvLz","zxbSEq","E3vZzxjP","q2XVC2vs","vhLWzvn0","zxHWB3j0","z2DLCMLU","vhLWzxm","CKnHC2u","CeL3v3G","zw50CMLL","igzVCIbI","yxrPB24","y2XVBMu","DxnLihrO","BwLZDgfR","tvbdEge","DhnG","B3b0Aw9U","wLjpr0G","DgnOAw5N","zgf5CW","rKLsDKe","C2fIBgvK","DgL2zsbM","AguGDgLJ","ugXLyxnL","EhHtsuG","AgLUzYb0","CM9Tig9W","mhWXnhW1","z3nZvxa","z2v0vgLT","y29TBwfU","EuvUza","B3CGD2f0","Dw50","zxrYAwnZ","A2v0CY90","BMX5igjL","DxqGDhjP","B3bLBLrP","qwXLCNrd","zw5K","ihvZzsb0","rvPNBe0","EePuzMi","B3nLzdOG","yw5UzwWU","BgfZDdi0","sevJtwC","CNjVCIbK","yw5NAw5N","yw5ZD2vY","tMfTzq","zNjPzgf5","AguGywXL","q0nxwgy","vgHPCYbJ","8j+uOIbqCMLV","zxjYB3i","s3zezhm","Ag9Y","oNnZige","ndCXotm2mevcuxLevG","DxjLigf0","C0nYr1q","z2v0qM9V","oKy+","CMvTB3zP","CKL4y2e","CY5QCW","C3bLy2LM","sw1Hz2u","DxnLCM5H","qw5muvq","B0rNs1K","mJz8oq","4PscicdWN5oAifm","Dw5KigzV","8j+AQYbvC2vY","BgfJA2XP","CgvZigfY","ihrOzsb0","vgLJA2v0","4O+WifbLywS","BcbZzwXL","Cgr4Egy","jgzPCNn0","zxiGysb0","v046","sKHOuMW","tM8Gzw5H","z0HVDxjZ","yM9Sza","zM91BMq","DK9Qz0y","y3jPChrP","Cg9ZAxrP","zxqU","AxmGywn0","y2HHCKf0","BgvKigzV","BMCGu3rH","Dg9WAwm","nc4Gq29U","BM93","vgH1BwjU","zwXZl3rP","ywXLCNru","DgHLihrP","CMfS","qvPuvwO","u3r5Bgu","C2f2zq","zM9YBwf0","ywrKt3b0","ExbLig5V","kIOGyNKG","BMvSCY8","CxvLDwvK","uL9dqvrf","C3rYyxrV","Axn0igeG","sfbyvue","twfUywDL","tw9KzxjH","ywrKrMLL","Ahn3shu","C2f0DxjK","Cg9UC2vu","zxjYAw5N","y2fJAgu","BIbMB3iG","rgvJBgLU","A2vYEhO","zw1VAMK","ywrKq2HV","Aw9UCW","jg1LC3nH","DgvKigzY","DgLVBLjV","tgv2zwXZ","y2TSAxn0","C0nSywLT","D2L0AgLU","CgfYDcbV","zsb0AgLZ","zwfZB24","A2v5CW","CMvTB3zL","DgHLign1","y291BNq","C2v0","rw1Izwq","BMCGy2HH","zxqGu3rH","vxnLCLvU","DgHLigjS","Aw4Gyxv0","yxrL","jgnYzwf0","ww91igfY","CMvJzw50","AwnRzxqU","vw5LEhbL","zgf0yq","Bwf4uMvZ","ugfUzwXt","ywnRBgLZ","q09pterp","DcbWCMLV","y2HHBMDP","BMfTzsbJ","B3jKlMnV","uMvHC29U","BMnLBcb0","rgf5qw5H","DhLWzxmG","AvvWA3G","twvKAxvT","CNqGBwvZ","D2HPBguG","tMv3ihrP","igzVCIb0","rMnXwfi","AwDHDguG","vgHLigfS","rMLLBgrZ","DfzpBNy","rgvMyxvS","ig5VDcbO","BgvKoIb0","D1ndrLi","BIbUB3qG","EwvSBg93","qw4GzxjY","DcbZzw50","C2v0vgLT","BwvTyMvY","DxbKyxrL","Aw5Nic9J","mY4Grw5Z","A2XPC3rL","BMCGDgHL","sxnZDwuG","zwW6","D21sq1C","tNPUtve","qxv0B0fS","AwnVBLvs","C2rHEx0","jgnSB3nL","BMCGyMXH","BgLUzYb0","kIOGDg8G","ywXLCNrG","ihrOAxmG","mtb8mtz8","q2HHBM5L","BgvUz3rO","Cxfwtw8","C3nHz2vZ","C2vUzcbJ","ChrPB24","BM5LBcbW","y2TLDcb0","vw5HyMXL","lGOkvxnL","igrPC2fI","AwnRzxqG","svzSz2m","Dfrmufm","BgLZDcbP","iZaWrKyW","tI9b","Dg9Tswq","zwrPDfjL","C0nSB3nL","C2XPy2u","zsbPCYbK","BxL1sxe","ie5pifzb","E3rPy2TL","rMLSzxm","CIb0AgLZ","A2LUz0rH","igHHCYbI","zxnKyxL9","Axn0zwqG","C2L6zq","Aw9UlG","BgvZ","CY90AwnR","BhntCvK","Df9MCMLK","Cg9Uzw50","Bg9ZAw5N","CM9Szxm","qwXLCNq","yK5wrwm","q29SB3i","u2LSzw50","BMqGre0G","AwnRzxrx","uLnvEve","z2v0u3rY","DgHPCYb0","BM5LBca","EsbHz2fP","y2XVC2uG","z2v0vxnL","y3rLza","BMCGDxnL","Aw5NihrP","B3jLigLU","Be5HBwu","CYb0AwnR","DxjZ","DMLLDW","4PscicaGica","Esa8qa","B25Zzsbn","zw1VDMvK","jhvZzxjj","zgf5Fq","A2v0ihbH","twHrufe","zNjVBsb0","rw1VAMK","yw5ZzMvY","z2XLvhG","C3rHzMzq","EuP6rwC","C2v0rw1V","DxnLCIbM","BwvKihrV","igfMDgvY","x2LK","C2v0tgfI","DMuGy2HH","mJm4mdK0DMffq2LU","zcbuAwnR","q2f0zwDV","zxn0igLZ","DxbWB3j0","vNPcwNy","Axr5igHH","t09cC0G","Dg90ywW","ww91igrV","A2uGDxaG","n2qPoIbG","C2v0ug9Z","CgvUihrP","BMzVCM1H","CK9WDgLV","twnsA0i","Fde4FdiX","4PscicdWN5sNifq","CgfUzwW","vgLTzq","zg1PBIbP","C2v0uMvX","BM5LBdO","zw53rva","ugfUzwW","tsbUB3rP","CML0Esbe","ywLTzwq6","tM8GuxvL","zIb0AguG","B3zPzgvK","CMvKDwnL","ywDNCMvN","AMzYqKm","C2z1BgX5","lcbOoM1T","zxr1Ccbh","B3vPwM0","B21Tyw5K","BeLK","C3bSAxq","iZjcmKqZ","C2LVBK92","zw50ignS","zwnVBMq","oIaIr2vU","B3vUzcbV","ignOyw5N","y2TLDcbJ","zMXVB3i","z2fPBIbS","y2TLDhm6","BwvZC2fN","DxnLCG","C2vUzgLU","zgf5rw5K","D1zrywS","jhbYAw9Y","BgvHC2uG","C2LVBNm","BYbHBgvY","8j+tIYbcBgfJ","ihbYAw9Y","A2v0ignO","DfjVBgu","BhvYzxm","tM9Uv29Y","E2D1AwXK","rMXHz3m","DcbIBgfJ","EunRqKu","C2vYihrV","ALH3q3i","vg9WiduG","C3rHCNrZ","CMf0Aw9U","DKD2ruK","AguGzxHP","Dw5RBM93","BhKGy2XV","serOyvG","u1POsge","tM9Uzq","ihrVig1V","igfUigfJ","y3jLyxrL","C2v0tMfT","B3iGDgHP","y2XPzw50","y3rezwXL","Dg9mB3DL","lwrLy2XP","BMfIBgvK","pIbOyxmG","ywr5ihDH","C29SDxrP","qwXLCNqG","A3vhvvm","CMLVCML0","AwnRzxq","ienHDgvN","tM8GCMvH","icaG4OcIifa","C29UihbY","B2X2zwq","DwvZDa","BhmVDgLJ","y2XVC2u","AxzLigfS","8j+tIYaQkLbY","DhjHBNnM","D2vKBMvZ","zIb5B3uG","Dg90ywXu","Bwf5igHH","C2v0rM9V","iejSywnR","C3rHBxa","ig5VDcbM","D2f0y2G","DcbMzwf0","DgvY","zwrcEq","Bgv0zwq6","yxrPBMDZ","CuLnvg8","igXHDgvY","CML0Es4G","vgHLihbH","BgvYDcbP","BwfUzc4","rw5HyMXL","zxj0igzV","ywrK","zwqGzNjV","AxmGywXY","DxbKyxrP","uhjPBwfY","BwLUDxrL","zsbeAxn0","A2v0lIbq","AwvKihr5","Bg9ZzwqU","y3vZDg9T","Aw4GC2LS","A2XPC3q","yw5UzwXZ","ELbSBLq","ywrKAw5N","BMDOB3vY","oIbG","uhjPB3jP","zYbettO","Axr5","wePJsvy","Aw1PDa","yxLfBMq","Axr5ieHV","BLrPBwu","ywrKu3vI","Aw5N","qxbmuMW","CML0Es4","yxLZ","tgHfEw0","zMLJyxrP","CYbIEsb0","igfKzgvK","zgvY","CKfbCgi","r2fIDNy","t25L","C3vUzgf5","y2XVC2LU","DxnLCNm","C2v0rgvZ","vhLWzte6","tgfIzwW","zhmGyMvM","AxnbCNjH","vgLTzxPV","uKDhwgm","AxmGy29T","Axn0zwq","ms4Gt3bL","zYb0AguG","lI4VlI4V","zsb0CNKG","rw1Izwrm","CM91BMq","uLLFsuq","rxjYB3iG","Axr5Fq","C1bXDwe","DhjPz2DL","igfNywLU","Aw9UCZO","y2XHAw1L","uMzLAKy","lwfSzxj0","zMLYC3q","BgvYDcbM","DgLUzZOG","zMLUze9U","zYbJBg9Z","A2v0ihbY","DcbWzw5K","AgfZ","zMLSDgvY","C2vUDcbZ","oIaIwu9v","8j+tIcbdDxjY","DxjHDgLV","Axn0Aw5N","vKnrAvq"];return(a=function(){return e})()}async function updateChannelPermissions(s,e,i){let a=cT,o={XTNuw:"No act"+a(826)+a(850)+a(495)+a(661)+" ticket.",XYtOO:"rpubP",sCrGT:"ViewChannel",McRkB:function(e,t){return e===t},PghXR:a(1148),qIMTo:a(1137)+"ssages",OmkPZ:a(906)+"inks",gssUp:a(150)+a(178)+a(311),qYPtF:"Error updati"+a(571)+a(641)+"ermiss"+a(914)};try{if(!o[a(733)](o[a(232)],"hWMOF"))return i.reply({content:"You do"+a(607)+"ave permissions to"+a(460)+"his command.",flags:o.Ephemeral});{let r=[{id:s[a(1108)][a(674)].everyone.id,deny:["SendMe"+a(638),o[a(482)]]},{id:i,allow:[o[a(843)],o.sCrGT,a(1005)+a(660),o.OmkPZ,o[a(447)]]}];e[a(1124)+"tRole"].forEach(e=>{var t=a,n={yeTCE:o[t(218)]};if("rpubP"!==o.XYtOO)return i.reply({content:n.yeTCE,flags:o.Ephemeral});n=s[t(1108)][t(674)].cache.get(e);n&&r[t(360)]({id:n.id,allow:["SendMe"+t(638),o[t(482)],"AttachFiles",t(906)+t(350),"ReadMessageHistory"]})}),await s[a(272)+"sionOverwrites"][a(569)](r)}}catch(e){throw console.error(o.qYPtF,e),new Error("Failed to up"+a(1069)+"hannel permissions")}}async function moveChannel(e,t){var n=cT;try{await e.setParent(t,{lockPermissions:!1})}catch(e){throw console[n(476)]("Error "+n(1144)+n(996)+"el:",e),new Error(n(1053)+" to mo"+n(716)+"nnel")}}function b(s,e){let i=a();return(b=function(e,t){e-=142;let n=i[e];void 0===b.JDjUjr&&(b.pCujPW=function(s){let i="",n="";for(let e=0,t,n,r=0;n=s.charAt(r++);~n&&(t=e%4?64*t+n:n,e++%4)&&(i+=String.fromCharCode(255&t>>(-2*e&6))))n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(let e=0,t=i.length;e<t;e++)n+="%"+("00"+i.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(n)},s=arguments,b.JDjUjr=!0);var e=e+i[0],r=s[e];return r?n=r:(n=b.pCujPW(n),s[e]=n),n})(s,e)}async function renameChannel(e,t){var n=cT,r={oGpzl:"Error "+n(1156)+"ng cha"+n(740),Gabvv:n(1053)+" to re"+n(589)+n(933)};try{await e[n(804)+"e"](t)}catch(e){throw console[n(476)](r[n(1142)],e),new Error(r[n(888)])}}async function autoHandleAlertCancel(e,r,i,a){var c=cT,u={sagvV:function(e,t){return t<e},EPjPn:function(e,t){return e!==t},BClFC:"KNFNx",uEKVW:"AWtik",BowIE:"wezHH"};if(!e["alertT"+c(942)]||!e[c(145)+"essageId"]||u[c(309)](e[c(1049)],r)){if("YtCiU"!==u.BClFC)return!1;k[c(536)+"At"]=l,m[c(1082)+"s"]=(n.retries||0)+1,u[c(935)](o.retries,p)&&s[c(177)](t)}try{var g=await a[c(1047)+"ls"].fetch(i);if(!g)return!1;try{var d=await g.messages.fetch(e[c(145)+"essageId"]);d&&await d.delete()}catch(e){if("iuhYG"===u.uEKVW)return i.reply({content:"This c"+c(756)+" can only be"+c(157)+"within"+c(1109)+"ket ch"+c(464),flags:a[c(1152)+c(527)]});if(10008!==e.code){if("wezHH"!==u.BowIE)return r["editRe"+c(180)]({content:c(599)+c(642)+"ype not found."});console[c(476)]("Error "+c(413)+"ng ale"+c(597)+c(172)+c(937)+"auto-cancel:",e)}}return await Ticket[c(616)+"One"]({channelId:i},{$set:{alertTime:null,alertReason:null,alertMessageId:null}}),!0}catch(e){return console.error("Error "+c(575)+c(778)+c(259)+"el:",e),!1}}async function handlePriorityChange(e,t,n){let r=cT,s={yCkBE:function(e,t){return e<t},TErpX:function(e,t){return e/t},tvQVd:function(e,t){return e-t},Xhefs:r(1094),tVOnv:r(796)+"n"},i=Date.now(),a=e.channel,o=config["Ticket"+r(423)][t.ticketType],c=t.priority;if(!e.member[r(674)].cache.some(e=>o[r(1124)+r(782)].includes(e.id)))throw new Error(r(971)+"MISSION");var l=priorityChangeCooldowns.get(t[r(1047)+"lId"]);if(l&&s[r(788)](i-l,PRIORITY_CHANGE_COOLDOWN))throw l=Math.ceil(s.TErpX(s.tvQVd(PRIORITY_CHANGE_COOLDOWN,i-l),1e3)),new Error(r(586)+"WN:"+l);t[r(176)+"ty"]=n,await t[r(530)](),priorityChangeCooldowns[r(569)](t[r(1047)+r(757)],i);var l=await e[r(1108)].members.fetch(t[r(1049)]),l=o[r(635)+r(692)][r(159)+"e"](r(659)+r(316),t[r(1123)+"Id"]).replace(s.Xhefs,l?.[r(771)][r(490)+"me"]||s[r(605)])[r(159)+"e"]("{priority}",n),u=i-lastRenameTime<RENAME_COOLDOWN||0<channelRenameQueue.size,u="Ticket prior"+r(723)+r(1150)+r(765)+"ed from **"+c+r(631)+"**"+n+r(534)+"<@"+e.user.id+">"+(u?"\n\n? Th"+r(516)+r(244)+r(1150)+" queue"+r(966)+"can ta"+r(727)+"to 1 minute.":""),u=(new EmbedBuilder).setColor(PRIORITY_COLORS[n])[r(893)+r(513)+"on"](u),u=(await e[r(230)]({embeds:[u],flags:MessageFlags[r(1152)+r(527)]}),await queueChannelRename(a,l,t,o),config[r(869)+"ty"][r(558)][n]?.MoveTop&&(u=a.parent)&&(l=u[r(950)+"en"][r(548)][r(926)](e=>e.id!==a.id)[r(918)]()?.[r(514)+"on"]||0,await a[r(729)+"ition"](l)),(new EmbedBuilder)[r(257)+"or"](PRIORITY_COLORS[n]).setDescription(r(827)+"iority Updat"+r(292)+"riority changed fr"+r(1096)+c+"** to **"+n+r(188)+"ated by: <@"+e.user.id+">"));await a.send({embeds:[u]}),notifyWatchers(e.client,t,r(176)+"ty",{oldPriority:c,newPriority:n,changedBy:e[r(771)].id,excludeUser:e[r(771)].id})}module[cT(421)+"s"]={autoHandleAlertCancel:autoHandleAlertCancel,data:(new SlashCommandBuilder)[cT(804)+"e"](cT(1123)+"s")["setDes"+cT(513)+"on"](cT(276)+cT(693)+cT(1159)+"mands for managing tickets").addSubcommand(e=>e.setName(cT(851)).setDescription(cT(1081)+cT(231)+cT(965)+cT(1123))["addUse"+cT(732)+"n"](e=>e.setName(cT(771)).setDescription(cT(407)+"er to "+cT(282)+cT(499)+"icket")["setReq"+cT(213)](!0)))[cT(877)+"command"](e=>e.setName("alert")[cT(893)+cT(513)+"on"]("Send an aler"+cT(1009)+cT(924)+cT(690)+cT(766)+"losure.")[cT(953)+cT(339)+cT(1062)](e=>e.setName(cT(268))[cT(893)+cT(513)+"on"]("Reason for t"+cT(472)+"rt")[cT(739)+"uired"](!1)))[cT(877)+cT(449)+"d"](e=>e.setName("cancel-alert")["setDes"+cT(513)+"on"]("Cancel"+cT(802)+"tive a"+cT(919)+cT(805)+cT(693)+cT(515)))["addSub"+cT(449)+cT(1055)](e=>e.setName(cT(1002)+"ist")[cT(893)+"cription"](cT(541)+" the blacklist")[cT(877)+cT(449)+"d"](e=>e.setName(cT(851)).setDescription("Blackl"+cT(539)+cT(711)+cT(445)+cT(980)+"tickets")["addUse"+cT(732)+"n"](e=>e[cT(804)+"e"]("user").setDescription(cT(407)+"er to "+cT(1002)+"ist")[cT(739)+cT(213)](!0))["addStr"+cT(339)+cT(1062)](e=>e.setName("reason")[cT(893)+cT(513)+"on"]("Reason"+cT(427)+cT(497)+"sting")["setReq"+cT(213)](!1)))["addSub"+cT(449)+"d"](e=>e.setName("view")[cT(893)+cT(513)+"on"]("View the bla"+cT(559)+" reaso"+cT(549)+"a user").addUserOption(e=>e[cT(804)+"e"]("user")[cT(893)+"cription"]("The us"+cT(379)+cT(412))["setReq"+cT(213)](!0)))["addSub"+cT(449)+"d"](e=>e.setName(cT(566))["setDes"+cT(513)+"on"]("Remove"+cT(1141)+"r from the b"+cT(497)+"st")[cT(1089)+cT(732)+"n"](e=>e.setName(cT(771))[cT(893)+cT(513)+"on"]("The user to remove from "+cT(574)+cT(585)+"t").setRequired(!0))))["addSub"+cT(449)+"d"](e=>{let t=cT,n=e.setName("close").setDescription(t(320)+t(567)+t(998)+"ticket")["addBoo"+t(166)+"tion"](e=>e.setName("silent")["setDes"+t(513)+"on"](t(678)+t(797)+"se and"+t(281)+t(408)+"ticket"+t(194)+t(456)+t(422)+"g any events").setRequired(!1));return config["Ticket"+t(967)+"gs"][t(419)+t(151)][t(849)+"d"]&&(n[t(953)+t(339)+"ion"](e=>e.setName(t(268))[t(893)+t(513)+"on"]("Reason for closing"+t(499)+"icket")["setReq"+t(213)](!1)[t(553)+"ices"](...config[t(500)+"Settings"].CloseReasons.Reasons.map(e=>({name:e.emoji+" "+e.name,value:e.value})))),config.TicketSettings[t(419)+"easons"]["AllowCustomR"+t(564)])&&n[t(953)+t(339)+"ion"](e=>e[t(804)+"e"](t(861)+"_reason").setDescription("Custom"+t(335)+"n for "+t(891)+t(903)+t(1123)).setRequired(!1)),n}).addSubcommand(e=>e[cT(804)+"e"](cT(736))[cT(893)+"cription"]("Send t"+cT(441)+cT(702)+cT(978))[cT(953)+cT(339)+cT(1062)](n=>{let r=cT;return n[r(804)+"e"](r(736))[r(893)+r(513)+"on"](r(846)+"nel to display").setRequired(!0),Object.keys(config[r(500)+"PanelSettings"]).forEach(e=>{var t=r;if("qqVMo"!==t(637))return f[t(230)]({content:g.tag+(t(1140)+"t blac"+t(619))+"d.",flags:h[t(1152)+t(527)]});n[t(553)+"ices"]({name:e,value:e})}),n})).addSubcommand(e=>e[cT(804)+"e"](cT(566)).setDescription("Remove a user from"+cT(499)+cT(817))["addUse"+cT(732)+"n"](e=>e.setName(cT(771))["setDes"+cT(513)+"on"](cT(407)+cT(379)+cT(566)+" from "+cT(526)+cT(207))[cT(739)+"uired"](!0)))[cT(877)+cT(449)+"d"](e=>e[cT(804)+"e"](cT(392)).setDescription("Rename"+cT(499)+"icket "+cT(1047)+"l")[cT(953)+"ingOpt"+cT(1062)](e=>e[cT(804)+"e"](cT(286))[cT(893)+cT(513)+"on"](cT(143)+cT(1084)+" for t"+cT(441)+cT(781)+cT(256))["setReq"+cT(213)](!0))).addSubcommand(e=>e[cT(804)+"e"]("stats").setDescription(cT(395)+"eneral"+cT(386)+"t stats"))[cT(877)+"command"](e=>e[cT(804)+"e"](cT(828)+"er")["setDes"+cT(513)+"on"]("Transf"+cT(505)+cT(646)+"to a new type")[cT(953)+cT(339)+"ion"](e=>e[cT(804)+"e"](cT(264))[cT(893)+"cription"](cT(143)+cT(1091)+cT(1075)+"e")[cT(739)+"uired"](!0)[cT(553)+"ices"](...Object[cT(565)](config["Ticket"+cT(423)]).map(e=>({name:config.TicketTypes[e].Name,value:e})))))[cT(877)+cT(449)+"d"](e=>e.setName(cT(176)+"ty")[cT(893)+cT(513)+"on"](cT(364)+" the priorit"+cT(381)+"he ticket")[cT(953)+"ingOpt"+cT(1062)](e=>{let t=cT,n=e[t(804)+"e"]("priority")["setDes"+t(513)+"on"]("The new priority level")[t(739)+"uired"](!0),r={Low:"üü¢",Medium:"üü°",High:"üî¥"},s=Object[t(565)](config.Priority[t(558)])[t(332)](e=>({name:(r[e]||"")+" "+e+(t(1160)+t(871)),value:e}));return n.addChoices(...s),n})).addSubcommand(e=>e[cT(804)+"e"]("closerequest")[cT(893)+cT(513)+"on"]("Request the "+cT(1123)+" creat"+cT(1136)+"close "+cT(526)+"cket")["addStr"+cT(339)+"ion"](e=>e[cT(804)+"e"]("reason")[cT(893)+cT(513)+"on"](cT(591)+cT(600)+cT(346)+"se req"+cT(823)).setRequired(!1)))[cT(877)+"command"](e=>e.setName("watch")[cT(893)+"cription"]("Watch "+cT(683)+"icket "+cT(338)+"eive D"+cT(743)+"ficati"+cT(1151)+" updates"))[cT(877)+cT(449)+"d"](e=>e.setName("unwatch").setDescription("Stop w"+cT(354)+"g this"+cT(386)+"t")).addSubcommand(e=>e.setName("watchers")[cT(893)+"cription"](cT(312)+cT(284)+"rs wat"+cT(938)+"this ticket")),category:"Utility",async execute(T){let L=cT,b={AErtJ:function(e){return e()},sBZJE:function(e,t){return e(t)},vOjgF:function(e,t){return e(t)},xNskl:L(977),HEcMg:L(651),ZROGH:function(e,t){return e(t)},AZTUj:function(e,t){return e(t)},zPlnT:function(e,t){return e(t)},wVQak:function(e,t){return e!==t},xJTfb:function(e,t,n){return e(t,n)},MPCxa:function(e,t){return e&&t},rAApb:L(304)+"d Ticket",TMfnq:"You do"+L(607)+L(152)+L(1099)+L(322)+L(686)+L(683)+"icket.",xxzPr:L(872),CrpQb:L(383),NPDMv:function(e,t){return e/t},PciJI:"user",uMrIJ:"#00FF00",hExQZ:function(e,t,n,r,s){return e(t,n,r,s)},COcrg:L(612)+L(370)+L(356)+L(598)+"adding"+L(192)+L(789)+" the ticket. Please try again later.",oKGnl:"alert",kWPSq:L(474)+L(756)+L(367)+"nly be used in ticket ch"+L(864)+".",KlUlK:"JxxPH",JWkyt:function(e,t){return e!==t},NgQGu:function(e,t){return t<e},dPiWS:"No rea"+L(821)+"ovided",SZhHa:function(e,t){return e+t},QbgSu:"{reason}",AnLQT:"Danger",Fikps:function(e,t,n){return e(t,n)},ZMpBL:L(1090),kuGUS:L(1094),fJqqY:"{time}",tAMCz:function(e,t){return e===t},tTLPS:L(317),HbrsQ:"No active alert found fo"+L(661)+L(386)+"t.",ObVmK:function(e,t){return e!==t},XGfFy:"Alert "+L(387)+L(384)+L(1057)+L(380)+"ser}.",CCWXf:"WtILp",qmrrg:L(1002)+L(358),Lfzji:L(1094)+" has been blacklis"+L(556)+"om ope"+L(934)+L(222)+".",enwEP:"Reason",JDRRW:function(e,t){return e===t},SmLJQ:"hINYm",IVlgc:"Contac"+L(1139)+"dmin i"+L(830)+"need m"+L(691)+"format"+L(667),orakQ:"Error fetchi"+L(629)+"cklist"+L(217)+"mation:",nzwZT:L(1092)+" Remov"+L(852)+L(985)+L(863),kkXPV:"Date",chYFh:L(268),XWIMc:L(595),kojeF:"An error occ"+L(356)+"while silently closing t"+L(441)+"ket.",XFLzm:L(612)+L(370)+L(356)+"while closing the "+L(1123)+". Please try"+L(913)+L(844)+".",qsGuh:L(726)+L(607)+L(152)+L(1099)+"ons to use this command.",kPftI:"Invalid pane"+L(502)+"cted!",zdJSz:L(1100),Eqliu:function(e,t){return e(t)},GMpqO:function(e,t,n){return e(t,n)},hvrkk:function(e,t){return e===t},cTqgl:L(148),fHrwu:"hswHu",hAtGo:"ticket"+L(803),uHBNN:"xJdkm",XHezK:L(446)+"|8|6|13|23|4|20|19"+L(734)+"|17|3|12|1|15|22|1"+L(402)+"5|2|7|"+L(634)+L(493),hFgNj:"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"+L(154)+"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"+L(154)+"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"+L(154)+"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"+L(154),fuaCT:L(696)+"  Enab"+L(608)+"rue",tuVtq:"An err"+L(370)+"urred while "+L(772)+L(903)+"ticket panel.",KqzYO:"User i"+L(173)+L(562)+"f this"+L(386)+"t.",TWFEd:L(1052)+"emoved",ouiZm:"MSRCI",wjSnx:L(477),HxvJg:L(474)+L(756)+L(367)+L(455)+" used "+L(561)+" a ticket ch"+L(464),QKhyG:function(e,t,n){return e(t,n)},fWAOn:function(e,t){return e===t},lsLef:"SyCZQ",sYQMR:L(223)+"s",myuIq:"deleted",aFevr:"$claimed",kZxAc:"$closedAt",lsSqY:"closed",JAlYD:L(962)+"icRating",DTVVt:"msg",rcwkS:"$messages",VAIHH:L(577)+L(261),QXHnV:L(1116),wSCFR:function(e,t){return t<e},tUNfr:function(e,t){return e+t},EtHwf:function(e,t){return e+t},FIRvA:function(e,t){return e+t},cVkgY:L(475)+L(744)+"istrib"+L(240),zCvvn:"> No p"+L(816)+L(267)+"ets found",LhEym:L(1036)+"amed t"+L(646)+L(594)+L(511),tqMXV:"‚è±Ô∏è Resp"+L(698)+L(453),kfHsX:function(e,t){return e+t},ulSSq:function(e,t){return e(t)},zICsG:function(e,t){return t<e},uEOWU:function(e,t){return t<e},VCQiT:"üë• Staff Performance",HfUqJ:L(791)+"staff member"+L(884)+"ickets claimed",nGHog:"transfer",eiAcy:"type",RtBvV:function(e,t){return e===t},cACgC:L(635)+"l not "+L(1006),AfjGw:L(1030),kXFJe:L(341)+L(908),HDfse:"An error occ"+L(356)+"while "+L(828)+"erring"+L(499)+"icket."+L(1e3)+L(905)+"again later.",zHbYo:L(176)+"ty",OJCzD:"NO_PERMISSION",GsHCV:function(e,t,n,r){return e(t,n,r)},FcqXR:L(681),xxSIH:L(425),SydRd:L(320)+"reques"+L(838)+L(414)+" disabled.",Lbdel:"You do"+L(607)+"ave pe"+L(1099)+L(322)+L(639)+"lose r"+L(1015)+"s.",IUhqh:"{staff}",KVEMS:L(325)+"request",rIxca:"An err"+L(370)+L(356)+L(598)+L(772)+"g the "+L(686)+"request.",bnvUk:L(837),vGvEI:function(e,t){return e!==t},cViRz:L(899),xJoQo:"#FF0000",HpwQf:L(389)},R=T.options.getSubcommand(),S=T[L(434)+"s"].getSubcommandGroup(!1);if("add"!==R||S)if(R!==b.oKGnl||S)if(R!=="cancel"+L(917)||S)if(S===b[L(353)]){if(R===L(851))try{let e=T.options[L(687)+"r"]("user"),t=T[L(434)+"s"][L(682)+L(878)]("reason")||L(819)+L(821)+L(748),n=config["Modera"+L(557)+L(668)][L(1002)+L(358)],r=T.member[L(674)][L(548)].some(e=>n[L(149)+"es"](e.id))||T[L(615)][L(272)+"sions"].has(PermissionsBitField.Flags["Admini"+L(538)+"r"]);var he;return r?await Blacklist[L(921)+"e"]({userId:e.id})?T[L(230)]({content:e.tag+(" is already blackl"+L(235)),flags:MessageFlags[L(1152)+"ral"]}):(await(Q=new Blacklist({userId:e.id,addedBy:T.user.id,addedAt:new Date,reason:t}))[L(530)](),ne=lang[L(500)+"s"]?.BlacklistManagement?.[L(992)+"acklis"+L(280)]||{},he=(new EmbedBuilder).setColor(ne[L(677)]||"#FF0000").setTitle(ne[L(1101)]||L(496)+L(834)+"listed")[L(893)+L(513)+"on"]((ne[L(295)+L(640)]||b.Lfzji)[L(159)+"e"](b.kuGUS,L(1119)+e.id+L(253)))[L(543)+L(1018)]({name:ne[L(604)]?.Reason||b[L(741)],value:t,inline:!1},{name:ne[L(604)]?.BlacklistedBy||"Blackl"+L(665)+"By",value:"<@"+T[L(771)].id+">",inline:!0},{name:ne[L(604)]?.[L(237)]||"Date",value:L(943)+Math.floor(new Date(Q[L(1051)+"t"]).getTime()/1e3)+L(484),inline:!0}).setThumbnail(e[L(1143)+"yAvata"+L(167)]({dynamic:!0}))[L(833)+L(839)]({text:ne[L(285)]||L(273)+L(1139)+L(738)+"f you believ"+L(563)+" is a "+L(431)+"e."}),void await T.reply({embeds:[he],flags:MessageFlags[L(1152)+L(527)]})):T[L(230)]({content:L(726)+" not have permissi"+L(1155)+" use t"+L(393)+L(1158),flags:MessageFlags.Ephemeral})}catch(e){console.error("Error "+L(1002)+L(931)+L(300),e),await T[L(230)]({content:"An err"+L(370)+"urred while "+L(1002)+L(931)+" the user. P"+L(776)+L(1129)+L(357)+L(997),flags:MessageFlags[L(1152)+"ral"]})}else if(R===L(695))try{let e=T.options[L(687)+"r"](b.PciJI),t=config[L(542)+"tionRo"+L(668)]["blackl"+L(358)],n=T[L(615)].roles[L(548)].some(e=>t.includes(e.id))||T[L(615)].permissions[L(925)](PermissionsBitField.Flags[L(171)+L(538)+"r"]);var a,c,ye;return n?(a=await Blacklist.findOne({userId:e.id}))?(c=lang[L(500)+"s"]?.BlacklistManagement?.[L(290)+"istInfo"]||{},ye=(new EmbedBuilder)[L(257)+"or"](c.Color||"#FFA500")[L(181)+"le"](c[L(1101)]||L(779)+"klist Inform"+L(428))["addFie"+L(1018)]({name:c.Fields?.[L(1104)]||"User",value:"<@"+a.userId+">",inline:!0},{name:c.Fields?.[L(290)+L(191)+"y"]||L(290)+"isted By",value:"<@"+a.addedBy+">",inline:!0},{name:c[L(604)]?.Reason||"Reason",value:a[L(268)],inline:!1},{name:c[L(604)]?.Date||L(237),value:"<t:"+Math[L(767)](new Date(a.addedAt)[L(448)+"e"]()/1e3)+L(484),inline:!0})[L(291)+"mbnail"](e.displayAvatarURL({dynamic:!0}))[L(833)+"ter"]({text:c.Footer||b[L(647)]}),void await T[L(230)]({embeds:[ye],flags:MessageFlags[L(1152)+L(527)]})):b.JDRRW(b.SmLJQ,L(993))?T[L(230)]({content:e.tag+(L(1140)+L(787)+L(619)+"d."),flags:MessageFlags.Ephemeral}):R[L(230)]({content:"You are not watchi"+L(1058)+"s ticket.",flags:S[L(1152)+"ral"]}):T.reply({content:L(726)+L(607)+L(152)+L(1099)+L(1155)+" use this co"+L(1158),flags:MessageFlags[L(1152)+"ral"]})}catch(e){console[L(476)](b[L(1131)],e),await T.reply({content:"An err"+L(370)+L(356)+L(598)+"fetching the"+L(1021)+L(649)+L(731)+L(947)+L(442)+L(361)+L(768)+L(1027),flags:MessageFlags[L(1152)+L(527)]})}else if("remove"===R)try{let e=T.options.getUser(b[L(946)]),t=config["ModerationRo"+L(668)].blacklist,n=T.member[L(674)].cache.some(e=>t[L(149)+"es"](e.id))||T.member[L(272)+L(777)].has(PermissionsBitField[L(786)].Administrator);var d,ve;return n?await Blacklist[L(921)+"eAndDelete"]({userId:e.id})?(d=lang[L(500)+"s"]?.[L(290)+"istManagement"]?.[L(573)+L(1002)+L(901)]||{},ve=(new EmbedBuilder).setColor(d.Color||b.uMrIJ)[L(181)+"le"](d[L(1101)]||b.nzwZT)[L(893)+"cription"]((d[L(295)+L(640)]||"{user} has been re"+L(212)+"from the blacklist.")[L(159)+"e"](L(1094),"**<@"+e.id+">**"))[L(543)+L(1018)]({name:d[L(604)]?.RemovedBy||"Remove"+L(1038),value:"<@"+T.user.id+">",inline:!0},{name:d[L(604)]?.[L(237)]||b[L(224)],value:"<t:"+Math[L(767)]((new Date).getTime()/1e3)+":F>",inline:!0})["setThu"+L(229)](e[L(1143)+"yAvatarURL"]({dynamic:!0}))[L(833)+"ter"]({text:d.Footer||L(407)+"er can now o"+L(730)+"ckets "+L(1083)}),void await T[L(230)]({embeds:[ve],flags:MessageFlags.Ephemeral})):T[L(230)]({content:e.tag+(L(1140)+"t blacklisted."),flags:MessageFlags.Ephemeral}):T[L(230)]({content:"You do not h"+L(152)+L(1099)+"ons to use this co"+L(1158),flags:MessageFlags[L(1152)+"ral"]})}catch(e){console[L(476)](L(909)+L(485)+L(689)+"r from"+L(1021)+"list:",e),await T[L(230)]({content:L(612)+L(370)+L(356)+"while "+L(485)+L(620)+L(165)+"from the bla"+L(559)+". Please try"+L(913)+L(844)+".",flags:MessageFlags.Ephemeral})}}else if(R!==L(825)||S)if("panel"!==R||S)if(R!==L(566)||S)if(R!==L(392)||S)if(b.fWAOn(R,"stats")&&!S)if(b.wVQak(b.lsLef,"KeSXR")){await T[L(302)+L(417)]({flags:MessageFlags["Epheme"+L(527)]});try{var Te,e,f=moment(),pe=f[L(429)]().subtract(24,L(1061)).toDate(),Le=f[L(429)]()[L(336)+"ct"](7,L(437))[L(241)](),Ce=f.clone()[L(336)+"ct"](30,"days")[L(241)](),[Y]=await Ticket[L(750)+L(576)]([{$facet:{totalCounts:[{$group:{_id:null,totalTickets:{$sum:1},totalMessages:{$sum:{$ifNull:[L(555)+"geCount",0]}},openTickets:{$sum:{$cond:[{$eq:[b[L(1146)],"open"]},1,0]}},closedTickets:{$sum:{$cond:[{$eq:[L(223)+"s","closed"]},1,0]}},deletedTickets:{$sum:{$cond:[{$eq:[b[L(1146)],b[L(657)]]},1,0]}},claimedTickets:{$sum:{$cond:[{$eq:["$claimed",!0]},1,0]}},unclaimedTickets:{$sum:{$cond:[{$and:[{$eq:[b.sYQMR,L(368)]},{$ne:[b.aFevr,!0]}]},1,0]}}}}],recentActivity:[{$group:{_id:null,last24Hours:{$sum:{$cond:[{$gte:["$creat"+L(261),pe]},1,0]}},last7Days:{$sum:{$cond:[{$gte:[L(577)+L(261),Le]},1,0]}},last30Days:{$sum:{$cond:[{$gte:["$createdAt",Ce]},1,0]}},closedLast24Hours:{$sum:{$cond:[{$and:[{$gte:[b[L(190)],pe]},{$in:["$status",[L(987),"deleted"]]}]},1,0]}},closedLast7Days:{$sum:{$cond:[{$and:[{$gte:[L(628)+L(199),Le]},{$in:["$status",[b.lsSqY,L(177)+"d"]]}]},1,0]}}}}],priorityStats:[{$match:{priority:{$exists:!0,$ne:null}}},{$group:{_id:L(775)+"ity",count:{$sum:1},openCount:{$sum:{$cond:[{$eq:[L(223)+"s","open"]},1,0]}}}}],ticketTypeStats:[{$match:{ticketType:{$exists:!0,$ne:null}}},{$group:{_id:"$ticketType",count:{$sum:1},openCount:{$sum:{$cond:[{$eq:["$status",L(368)]},1,0]}}}}],ratingStats:[{$match:{rating:{$regex:/\(\d\/5\)$/}}},{$addFields:{numericRating:{$toInt:{$arrayElemAt:[{$split:[{$arrayElemAt:[{$split:["$rating","("]},1]},"/"]},0]}}}},{$group:{_id:L(962)+L(410)+"ng",count:{$sum:1},sum:{$sum:b[L(265)]}}}],responseMetrics:[{$match:{"messages.1":{$exists:!0},userId:{$exists:!0}}},{$addFields:{firstUserMsg:{$arrayElemAt:[{$filter:{input:L(555)+"ges",as:b.DTVVt,cond:{$eq:["$$msg.authorId",L(700)+"d"]}}},0]},firstStaffMsg:{$arrayElemAt:[{$filter:{input:b.rcwkS,as:L(1013),cond:{$ne:[L(1086)+"authorId",L(700)+"d"]}}},0]}}},{$addFields:{responseTime:{$cond:[{$and:[{$ne:["$firstUserMsg",null]},{$ne:[L(504)+"StaffMsg",null]},{$gt:["$firstStaffM"+L(1064)+"estamp",L(504)+L(1074)+"g.time"+L(835)]}]},{$subtract:[L(504)+L(202)+"sg.tim"+L(254),L(504)+L(1074)+"g.timestamp"]},null]}}},{$match:{responseTime:{$ne:null,$gt:0}}},{$group:{_id:null,avgFirstResponse:{$avg:"$respo"+L(303)+"e"},minResponseTime:{$min:"$responseTime"},maxResponseTime:{$max:"$respo"+L(303)+"e"},count:{$sum:1}}}],resolutionMetrics:[{$match:{status:{$in:["closed","deleted"]},createdAt:{$exists:!0},closedAt:{$exists:!0,$ne:null}}},{$addFields:{resolutionTime:{$cond:[{$gt:[b[L(190)],L(577)+L(261)]},{$subtract:[b[L(190)],b[L(1149)]]},null]}}},{$match:{resolutionTime:{$ne:null,$gt:0}}},{$group:{_id:null,avgResolutionTime:{$avg:L(979)+"utionTime"},minResolutionTime:{$min:"$resolutionTime"},maxResolutionTime:{$max:"$resolutionT"+L(942)},count:{$sum:1}}}],staffPerformance:[{$match:{claimed:!0,claimedBy:{$exists:!0,$ne:null}}},{$group:{_id:"$claimedBy",ticketsClaimed:{$sum:1},ticketsClosed:{$sum:{$cond:[{$in:[b.sYQMR,[b[L(670)],"deleted"]]},1,0]}}}},{$sort:{ticketsClaimed:-1}},{$limit:5}],timeOfDayAnalysis:[{$addFields:{hour:{$hour:L(577)+L(261)}}},{$group:{_id:b.QXHnV,count:{$sum:1}}},{$sort:{_id:1}}]}}]),U=Y.totalCounts[0]||{totalTickets:0,totalMessages:0,openTickets:0,closedTickets:0,deletedTickets:0,claimedTickets:0,unclaimedTickets:0},K=Y[L(579)+"Activity"][0]||{last24Hours:0,last7Days:0,last30Days:0,closedLast24Hours:0,closedLast7Days:0},be=Y[L(176)+"tyStats"][L(749)]((e,t)=>{var n=L;return t[n(714)]&&b.wVQak(t[n(714)],"undefined")&&(e[t._id]=t.count),e},{}),Me=Y["ticket"+L(420)+"ats"].reduce((e,t)=>{var n,r=L;return"XJcIV"===b.xxzPr?(t[r(714)]&&!(n=config[r(500)+r(423)][t[r(714)]]?.Name||t[r(714)])[r(1025)](/^TicketType\d+$/)&&(e[n]={total:t[r(568)],open:t["openCo"+r(452)]}),e):(n=b.vOjgF(h,i[r(1025)](/\d+/)[0]),t=j[r(1025)](/[smhdw]/)[0],k+n*l[t])},{}),Be=Y[L(994)+"Stats"][L(749)]((e,t)=>{var n=L;return e[t[n(714)]]=t[n(568)],e},{}),$=Y[L(994)+L(373)].reduce((e,t)=>e+t.count,0),ze=Y[L(994)+L(373)][L(749)]((e,t)=>e+t._id*t.count,0),De=b[L(609)]($,0)?(ze/$).toFixed(1):"N/A",W=Y["responseMetr"+L(355)][0]||{avgFirstResponse:0,minResponseTime:0,maxResponseTime:0},V=Y.resolutionMetrics[0]||{avgResolutionTime:0,minResolutionTime:0,maxResolutionTime:0},Ae=Y[L(708)+"erformance"]||[],xe=Y["timeOf"+L(593)+"lysis"]||[],ke=0<xe.length?xe[L(1157)]((e,t)=>t.count-e.count)[L(655)](0,3):[],Z=(new EmbedBuilder)[L(181)+"le"]("üìä Tick"+L(572)+"tistics").setColor(L(759)+"1")[L(543)+"lds"]([{name:L(929)+"ent St"+L(960),value:b.tUNfr(b[L(1118)](L(277)+L(1085)+L(769)+" `"+U[L(831)+"ickets"]+"`\n",L(163)+"tal Messages"+L(868)+U[L(314)+"essages"]+"`\n")+("> üü¢ Open: `"+U[L(457)+"ckets"])+"`\n> ‚úÖ Cl"+L(463)+"`"+U[L(987)+L(500)+"s"]+"`\n",L(391)+L(841)+" `"+U[L(177)+"dTickets"]+"`\n")+(L(1162)+L(745)+" `"+U.claimedTickets)+"`\n"+(L(185)+L(915)+L(382)+U["unclai"+L(1126)+"kets"])+"`",inline:!1},{name:"‚è∞ Recent Act"+L(1042),value:b.EtHwf(b[L(438)]("> üìÖ Cr"+L(1011)+"(24h): `"+K[L(465)+"Hours"]+" tickets`\n","> ‚úÖ Closed (24h): `"+K["closed"+L(182)+"Hours"]+L(386)+"ts`\n"),L(169)+"eated (7d): `"+K[L(1073)+L(881)]+(L(386)+L(184)))+(L(1147)+L(197)+L(728)+K.closedLast7Days+(L(386)+L(184)))+("> üìà Created (30d): `"+K[L(941)+L(1121)]+" ticke"+L(433)),inline:!0},{name:b.cVkgY,value:0<Object.entries(be).length?Object[L(426)+"s"](be).map(([e,t])=>{var n=L;return"> "+(e===n(376)?"üî¥":e===n(596)?"üü°":e===b.CrpQb?"üü¢":"‚ö™")+" "+e+": `"+t+" ticke"+n(433)}).join("\n"):b.zCvvn,inline:!0},{name:L(337)+"et Typ"+L(857)+"ribution",value:0<Object[L(426)+"s"](Me)[L(636)]?Object[L(426)+"s"](Me)[L(926)](([e])=>!e.match(/^TicketType\d+$/)).map(([e,t])=>"> "+e+L(868)+t[L(725)]+L(1098)+"` (`"+t.open+" open`)").join("\n"):b[L(882)],inline:!1},{name:L(1112)+L(519)+"tistics",value:0<$?b[L(1118)]("> Average Ra"+L(920)+"`"+De+"/5` "+"‚≠ê"[L(1066)](Math[L(907)](b.AZTUj(parseFloat,De)))+"\n",Object[L(426)+"s"](Be).sort((e,t)=>t[0]-e[0])[L(332)](([e,t])=>"> "+e+"‚≠ê: `"+t+" reviews`")[L(936)]("\n")):"> No r"+L(842)+" yet",inline:!1},{name:b.tqMXV,value:b.kfHsX("> Average First Response"+L(868)+b[L(435)](formatDuration,b[L(1102)](W[L(146)+"stResponse"],0)?W.avgFirstResponse:0)+"`\n> Fastest Re"+L(279)+L(868)+formatDuration(0<W["minRes"+L(546)+"ime"]?W[L(297)+"ponseT"+L(942)]:0)+"`\n",L(366)+"est Response: `"+b[L(1060)](formatDuration,b[L(195)](W[L(583)+L(546)+"ime"],0)?W["maxRes"+L(546)+"ime"]:0)+"`\n")+(L(270)+L(399)+L(813)+"on Time: `"+formatDuration(b.uEOWU(V["avgResolutio"+L(876)],0)?V[L(1032)+L(187)+L(876)]:0))+"`\n> Fastest Resolution: `"+formatDuration(0<V[L(297)+"olutionTime"]?V["minRes"+L(187)+L(876)]:0)+"`",inline:!1}]).setFooter({text:"Last Updated",iconURL:T[L(1108)][L(626)+"L"]()})[L(614)+L(254)](),X=[Z];0<Ae[L(636)]&&(Te=(new EmbedBuilder).setTitle(b[L(932)]).setColor("#2B2D31")[L(893)+"cription"](Ae[L(332)](e=>{var t=L,n=0<e["ticket"+t(560)+"ed"]?Math[t(907)](e[t(1123)+t(654)+"d"]/e[t(1123)+t(560)+"ed"]*100):0;return"<@"+e[t(714)]+">: `"+e[t(1123)+t(560)+"ed"]+" claimed` | `"+e["ticket"+t(654)+"d"]+" closed` | `"+n+"% resolution rate`"}).join("\n\n"))[L(833)+"ter"]({text:b.HfUqJ,iconURL:T[L(1108)].iconURL()}),X[L(360)](Te)),0<ke.length&&(e={name:L(501)+" Activ"+L(875)+L(694),value:ke[L(332)](e=>"> "+e._id+":00 - "+e._id+":59: `"+e.count+(L(386)+L(433)))[L(936)]("\n"),inline:!1},Z[L(582)].fields.length<25?Z[L(543)+L(1018)](e):1<X.length&&X[1].addFields(e)),await T.editReply({embeds:X})}catch(e){console[L(476)]("Error fetchi"+L(1046)+L(164)+"ats:",e),await T["editRe"+L(180)]({content:L(612)+L(370)+L(356)+L(598)+"fetching tic"+L(164)+"ats. P"+L(776)+L(1129)+L(357)+L(997),flags:MessageFlags["Epheme"+L(527)]})}}else S.setFooter({text:g[L(285)].Text,iconURL:h[L(285)].Icon||null});else if(R!==b.nGHog||S)if(b.tAMCz(R,b.zHbYo)&&!S)try{var qe=await Ticket.findOne({channelId:T[L(1047)+"l"].id});if(!qe)return T[L(230)]({content:b.HxvJg,flags:MessageFlags["Epheme"+L(527)]});var Ie=T[L(434)+"s"][L(682)+L(878)]("priority");await handlePriorityChange(T,qe,Ie)}catch(e){var Q;return console.error(L(909)+L(588)+"ng tic"+L(923)+"iority:",e),e[L(770)+"e"][L(792)+"With"](L(586)+L(506))?(Q=e.message.split(":")[1],T[L(230)]({content:L(442)+" wait "+Q+(L(973)+L(896))+"ore ch"+L(468)+L(780)+L(155)+"ain.",flags:MessageFlags[L(1152)+L(527)]})):e.message===b[L(1020)]?T[L(230)]({content:"You do"+L(607)+L(152)+L(1099)+"on to "+L(1037)+" ticke"+L(587)+L(880),flags:MessageFlags.Ephemeral}):void await b[L(142)](safeInteractionResponse,T,L(612)+"or occ"+L(356)+L(598)+"changi"+L(620)+" ticke"+L(587)+L(845)+"Please try a"+L(768)+"ater.",!0)}else if(R!==L(211)+L(1015)||S)if(R!==b.bnvUk||S)if(R!==L(158)+"h"||S){if(b.fWAOn(R,L(319)+"rs")&&!S)try{var _=await Ticket.findOne({channelId:T[L(1047)+"l"].id});if(!_)return T.reply({content:"This c"+L(756)+L(367)+L(455)+" used within"+L(1109)+L(781)+"annel.",flags:MessageFlags[L(1152)+L(527)]});var Re=config[L(500)+L(423)][_[L(1123)+L(1088)]];if(!Re)return T[L(230)]({content:L(500)+L(398)+L(377)+"uration not found.",flags:MessageFlags[L(1152)+"ral"]});let t=Re[L(1124)+L(782)]||[],e=T[L(615)].roles.cache.some(e=>t.includes(e.id));if(!e&&_.userId!==T.user.id)return T.reply({content:"You do"+L(607)+"ave pe"+L(1099)+"on to "+L(1023)+"atchers.",flags:MessageFlags[L(1152)+L(527)]});var ee=_.watchers||[],Ee=(new EmbedBuilder).setColor("#2B2D31")[L(181)+"le"]("üëÅÔ∏è Tick"+L(1028)+"chers")[L(893)+"cription"](0<ee.length?ee.map(e=>"> <@"+e+">")[L(936)]("\n"):"> No o"+L(411)+L(289)+"ng this tick"+L(515))[L(833)+"ter"]({text:ee[L(636)]+(L(1019)+"er")+(1!==ee.length?"s":"")});await T.reply({embeds:[Ee],flags:MessageFlags[L(1152)+L(527)]})}catch(e){if(!b[L(1016)](b[L(247)],"nAecw"))throw S[L(476)]("Error "+L(1144)+" chann"+L(622),g),new h("Failed"+L(801)+L(716)+L(226));console[L(476)]("Error fetching watchers:",e),await T[L(230)]({content:"An err"+L(370)+"urred while fetching wat"+L(349),flags:MessageFlags[L(1152)+"ral"]})}}else try{var te=await Ticket.findOne({channelId:T.channel.id});if(!te)return T[L(230)]({content:L(474)+"ommand"+L(367)+L(455)+L(157)+"within"+L(1109)+L(781)+"annel.",flags:MessageFlags[L(1152)+L(527)]});if(!te[L(319)+"rs"]||!te[L(319)+"rs"].includes(T.user.id))return T[L(230)]({content:L(578)+L(156)+"watching this ticket.",flags:MessageFlags["Epheme"+L(527)]});await Ticket[L(616)+L(889)]({channelId:T.channel.id},{$pull:{watchers:T.user.id}});var Pe=(new EmbedBuilder).setColor(b.xJoQo).setDescription("üëÅÔ∏è You are no longer watc"+L(444)+"his ti"+L(378));await T[L(230)]({embeds:[Pe],flags:MessageFlags.Ephemeral})}catch(e){console.error(L(909)+L(485)+"ng watcher:",e),await T[L(230)]({content:"An err"+L(370)+L(356)+"while "+L(158)+"hing this ti"+L(378),flags:MessageFlags[L(1152)+"ral"]})}else if(L(790)!==L(790)){var ne={Primary:u[L(855)+"y"],Secondary:v[L(351)+L(221)],Success:w[L(193)+"s"],Danger:x[L(313)]}[y[L(1059)].Style]||z[L(855)+"y"];A.addComponents((new B)["setCus"+L(652)](L(1123)+"create-"+C).setLabel(D(E[L(1059)].Name||"Unnamed Ticket",F))[L(710)+"ji"](G.Button[L(705)]||"").setStyle(ne)),5===H["compon"+L(1007)].length&&(M.push(N),O=new P)}else try{var re=await Ticket.findOne({channelId:T[L(1047)+"l"].id});if(!re)return T.reply({content:"This c"+L(756)+L(367)+"nly be used "+L(561)+" a ticket channel.",flags:MessageFlags.Ephemeral});var He,Se=config[L(500)+L(423)][re[L(1123)+L(1088)]];if(!Se)return T[L(230)]({content:"Ticket"+L(398)+L(377)+"uratio"+L(610)+"found.",flags:MessageFlags.Ephemeral});let t=Se[L(1124)+L(782)]||[],e=T.member[L(674)].cache.some(e=>t[L(149)+"es"](e.id));if(!e)return b[L(794)](L(899),b.cViRz)?(He=L(943)+g.floor(b.NPDMv(h[L(525)+"ime"][L(448)+"e"](),1e3))+":R>",i.reply({content:L(1114)+L(847)+"s alre"+L(269)+"tive f"+L(805)+"s tick"+L(975)+" will "+L(912)+"r "+He+L(644)+" `/tickets cancel-"+L(632)+L(205)+L(592)+"he existing "+L(394)+"first.",flags:j[L(1152)+L(527)]})):T[L(230)]({content:"Only s"+L(721)+" staff can watch t"+L(222)+".",flags:MessageFlags.Ephemeral});if(re[L(319)+"rs"]&&re.watchers.includes(T.user.id))return T[L(230)]({content:L(578)+"e alre"+L(812)+L(436)+L(633)+L(1123)+".",flags:MessageFlags[L(1152)+L(527)]});await Ticket.updateOne({channelId:T[L(1047)+"l"].id},{$addToSet:{watchers:T[L(771)].id}});var Ge=(new EmbedBuilder)[L(257)+"or"](b.uMrIJ)[L(893)+"cription"]("üëÅÔ∏è You "+L(1056)+"w watc"+L(444)+"his ticket. You will receive D"+L(743)+L(883)+"ons when the"+L(153)+" updates."),Fe=(await T[L(230)]({embeds:[Ge],flags:MessageFlags["Epheme"+L(527)]}),(new EmbedBuilder)[L(257)+"or"]("#2B2D31")[L(893)+L(513)+"on"]("üëÅÔ∏è <@"+T[L(771)].id+"> is n"+L(451)+L(938)+"this t"+L(580)));await T.channel[L(1001)]({embeds:[Fe]})}catch(e){console[L(476)](L(909)+L(866)+L(1019)+"er:",e),await T.reply({content:"An err"+L(370)+"urred "+L(598)+L(289)+"ng this ticket.",flags:MessageFlags[L(1152)+L(527)]})}else try{if(L(681)===b[L(601)]){var se=config[L(419)+"equest"];if(!se?.Enabled){if(b[L(443)]===L(540))throw new b(L(971)+"MISSION");return T[L(230)]({content:b[L(352)],flags:MessageFlags["Epheme"+L(527)]})}var ie=await Ticket[L(921)+"e"]({channelId:T.channel.id});if(!ie)return T.reply({content:"This command"+L(367)+L(455)+L(157)+"within a tic"+L(781)+L(464),flags:MessageFlags.Ephemeral});var Ye=config[L(500)+"Types"][ie["ticket"+L(1088)]];if(!Ye)return T[L(230)]({content:"Ticket"+L(398)+"config"+L(930)+L(610)+L(1006),flags:MessageFlags.Ephemeral});let t=Ye["Suppor"+L(782)]||[],e=T[L(615)][L(674)][L(548)][L(951)](e=>t.includes(e.id));if(!e)return T[L(230)]({content:b[L(976)],flags:MessageFlags[L(1152)+L(527)]});if(ie.closeRequestPending)return T.reply({content:"A close requ"+L(720)+" already pen"+L(397)+"or this tick"+L(515),flags:MessageFlags.Ephemeral});if(ie.status===b[L(670)])return T.reply({content:L(1078)+L(646)+L(853)+"eady c"+L(860),flags:MessageFlags.Ephemeral});var ae=T[L(434)+"s"].getString("reason")||se.DefaultReason||L(621)+"has be"+L(252)+L(822),oe=(await Ticket["update"+L(889)]({channelId:T.channel.id},{closeRequestPending:!0,closeRequestBy:T.user.id,closeRequestReason:ae,closeRequestAt:new Date}),se[L(570)]),ce=new EmbedBuilder;oe[L(1101)]&&ce.setTitle(oe.Title),oe["Descri"+L(640)]&&ce.setDescription(oe["Descri"+L(640)].join("\n")[L(159)+"e"](b[L(815)],"<@"+ie.userId+">")[L(159)+"e"](b[L(981)],"<@"+T.user.id+">")[L(159)+"e"]("{reason}",ae)),oe[L(677)]&&ce.setColor(oe[L(677)]),oe[L(285)]?.[L(1004)]&&ce[L(833)+"ter"]({text:oe.Footer.Text,iconURL:oe[L(285)].Icon||null}),oe[L(489)]&&ce.setImage(oe.Image),oe[L(523)+L(372)]&&ce.setThumbnail(oe.Thumbnail);let n=se[L(1059)+"s"],r=(new ButtonBuilder)[L(214)+L(652)]("closerequest-"+ie[L(1123)+"Id"]+"-accept").setLabel(n[L(991)]?.Label||"Accept")[L(1087)+"le"](ButtonStyle[n[L(991)]?.[L(529)]||"Success"])[L(710)+"ji"](n[L(991)]?.Emoji||"‚úÖ"),s=(new ButtonBuilder)[L(214)+"tomId"]("closer"+L(1015)+"-"+ie.ticketId+L(809)+"ne").setLabel(n.Decline?.Label||"Decline")[L(1087)+"le"](ButtonStyle[n[L(550)+"e"]?.[L(529)]||"Danger"])[L(710)+"ji"](n.Decline?.[L(705)]||"‚ùå"),i=(new ActionRowBuilder)[L(1054)+L(672)+"s"](r,s),a=await T.channel[L(1001)]("<@"+ie[L(1049)]+">"),o=await T[L(1047)+"l"][L(1001)]({embeds:[ce],components:[i]});setTimeout(()=>a.delete()[L(970)](()=>{}),500),await Ticket[L(616)+L(889)]({channelId:T.channel.id},{closeRequestMessageId:o.id});var Ne=(new EmbedBuilder)[L(257)+"or"](b[L(306)]).setDescription("Close reques"+L(613)+" to <@"+ie.userId+">.");await T.reply({embeds:[Ne],flags:MessageFlags.Ephemeral}),notifyWatchers(T.client,ie,b.KVEMS,{requestedBy:T.user.id,reason:ae,excludeUser:T.user.id})}else g=h,i[L(177)](j)}catch(e){console[L(476)](L(909)+"sendin"+L(922)+"e request:",e),await T.reply({content:b[L(486)],flags:MessageFlags["Epheme"+L(527)]})}else{await T[L(302)+L(417)]({flags:MessageFlags.Ephemeral});try{var Ue=T.options[L(682)+L(878)](b[L(1050)]),le=await Ticket.findOne({channelId:T[L(1047)+"l"].id});if(!le)return T["editRe"+L(180)]({content:L(474)+"ommand can only be"+L(157)+"within a tic"+L(781)+"annel."});let t=config["Ticket"+L(423)][le[L(1123)+"Type"]],e=config.TicketTypes[Ue];if(!e)return T[L(653)+"ply"]({content:L(599)+"cket t"+L(533)+"t found."});if(b.RtBvV(le[L(1123)+"Type"],Ue))return T[L(653)+L(180)]({content:L(1078)+"icket "+L(853)+"eady o"+L(747)+L(488)+L(859)+"pe."});if(!T[L(615)][L(674)].cache[L(951)](e=>t["Suppor"+L(782)].includes(e.id)))return T.editReply({content:L(726)+L(607)+"ave pe"+L(1099)+"on to use th"+L(900)+L(848)});var ue=await T.guild[L(1047)+"ls"].fetch(le["channe"+L(757)]);if(!ue)return T.editReply({content:b[L(288)]});var Oe=await T.guild[L(615)+"s"].fetch(le[L(1049)]),je=await getUserPriority(Oe);let n=null;var ge=e[L(719)+L(1145)];if(Array[L(897)+"y"](ge)){for(var de of ge)if(de&&!b[L(1079)](de,"")&&de!==L(341)+"RY_ID")if(ue[L(1108)][L(1047)+"ls"].cache[L(1161)](de)){n=de;break}}else if(ge&&""!==ge&&ge!==L(341)+"RY_ID"){if("PtIqN"!==L(249))return R.reply({content:"You do not have pe"+L(1099)+L(1155)+L(460)+"his command.",flags:S[L(1152)+L(527)]});n=ge}let r=null;if(n){var fe=ue.guild.channels.cache.get(n);if(fe&&50<=fe.children?.cache[L(666)]&&Array.isArray(config.TicketSettings?.overFlow))for(var me of config[L(500)+L(967)+"gs"].overFlow){if(L(676)===b.AfjGw)return R.reply({content:L(726)+L(607)+L(152)+L(1099)+L(322)+"use th"+L(900)+"mand.",flags:S.Ephemeral});if(me&&""!==me&&me!==b.kXFJe){var Ke=ue.guild[L(1047)+"ls"][L(548)][L(1161)](me);if(Ke&&Ke[L(950)+"en"]?.[L(548)][L(666)]<50){r=Ke.id;break}}}else fe&&(r=fe.id)}try{await moveChannel(ue,r),await updateChannelPermissions(ue,e,le[L(1049)])}catch(e){return console[L(476)](L(909)+"during"+L(996)+"el ope"+L(793)+"s:",e),void await safeInteractionResponse(T,b.HDfse,!0)}le["questi"+L(406)]=le[L(189)+L(406)].map(e=>({question:e.question||L(746)+"stion "+L(1134)+"ed",answer:e[L(469)]||"No Answer Provided"})),le[L(1123)+"Type"]=Ue,await le.save();await queueChannelRename(ue,e[L(635)+L(692)][L(159)+"e"](L(659)+L(316),le.ticketId)[L(159)+"e"](L(1094),Oe[L(771)].username)[L(159)+"e"]("{priority}",je),le,e);var $e=(new EmbedBuilder).setColor(b.uMrIJ).setDescription(L(193)+L(752)+" transferred"+L(499)+"icket to "+e.Name+"."),We=(await T.editReply({embeds:[$e]}),(new EmbedBuilder).setColor(L(650)+"0")["setDes"+L(513)+"on"](L(500)+" has b"+L(1014)+L(706)+"red to "+e.Name+" by <@"+T.user.id+">."));await ue.send({embeds:[We]})}catch(e){console.error("Error "+L(828)+L(547)+L(386)+"t:",e),await safeInteractionResponse(T,"An error occ"+L(356)+L(598)+"transf"+L(547)+" the ticket. Pleas"+L(905)+"again later.",!0)}}else try{var Ve=T[L(434)+"s"][L(682)+L(878)](L(286)),Ze=await Ticket.findOne({channelId:T.channel.id});if(!Ze){if("jxRZS"!==b.wjSnx)return T[L(230)]({content:b.HxvJg,flags:MessageFlags.Ephemeral});h.setAuthor({name:i(j[L(1017)][L(1004)],k),iconURL:l[L(1017)].Icon||null})}let t=config["Ticket"+L(423)][Ze[L(1123)+L(1088)]][L(1124)+"tRole"],e=T.member.roles.cache.some(e=>t.includes(e.id));if(!e)return T.reply({content:L(726)+L(607)+L(152)+L(1099)+"ons to"+L(460)+"his co"+L(1158),flags:MessageFlags["Epheme"+L(527)]});var Je=T[L(1047)+"l"],Xe=(await b[L(333)](queueChannelRename,Je,Ve),(new EmbedBuilder)[L(257)+"or"](L(650)+"0")["setDes"+L(513)+"on"]("Succes"+L(752)+" renamed the"+L(386)+"t to "+Ve+".")),Qe=(await T[L(230)]({embeds:[Xe],flags:MessageFlags[L(1152)+L(527)]}),(new EmbedBuilder)[L(257)+"or"](L(650)+"0")[L(893)+L(513)+"on"](L(220)+L(260)+L(331)+"n rena"+L(712)+" "+Ve+" by <@"+T[L(771)].id+">."));await Je[L(1001)]({embeds:[Qe]})}catch(e){console.error(L(909)+"renaming tic"+L(1135),e),await T[L(230)]({content:"An error occ"+L(356)+"while "+L(1156)+L(620)+" ticket. Ple"+L(1026)+L(685)+"n later.",flags:MessageFlags["Epheme"+L(527)]})}else try{var we=T[L(434)+"s"].getUser(b[L(946)]),_e=await Ticket[L(921)+"e"]({channelId:T[L(1047)+"l"].id});if(!_e)return T[L(230)]({content:L(474)+L(756)+" can o"+L(455)+" used within a ticket ch"+L(464),flags:MessageFlags[L(1152)+L(527)]});let t=config["Ticket"+L(423)][_e[L(1123)+L(1088)]].SupportRole,e=T.member[L(674)].cache.some(e=>t[L(149)+"es"](e.id));if(!e)return T.reply({content:L(726)+L(607)+"ave pe"+L(1099)+"ons to use t"+L(393)+"mmand.",flags:MessageFlags.Ephemeral});var et=T.channel,tt=et.permissionsFor(we);if(!tt||!tt.has(PermissionsBitField.Flags[L(1106)+L(256)]))return T[L(230)]({content:b[L(969)],flags:MessageFlags[L(1152)+"ral"]});await et["permissionOv"+L(308)+"es"][L(803)](we,{ViewChannel:!1,SendMessages:!1,ReadMessageHistory:!1,AttachFiles:!1,EmbedLinks:!1});var nt=(new EmbedBuilder)[L(257)+"or"]("#FF0000").setDescription(L(193)+L(752)+L(1035)+"ed "+we.tag+" from "+L(526)+L(378)),rt=(await T[L(230)]({embeds:[nt],flags:MessageFlags[L(1152)+"ral"]}),(new EmbedBuilder).setColor("#FF0000")[L(893)+"cription"]("<@"+we.id+(L(811)+L(204)+L(699)+L(321)+L(526))+"cket b"+L(697)+T.user.id+">."));await et.send({embeds:[rt]}),notifyWatchers(T.client,_e,b.TWFEd,{removedUser:we.id,removedBy:T[L(771)].id,excludeUser:T.user.id})}catch(e){if(b[L(755)]!==b[L(755)])return R.reply({content:L(726)+L(607)+"ave pe"+L(1099)+L(1155)+L(460)+L(393)+L(1158),flags:S.Ephemeral});console.error("Error removing user from"+L(386)+"t:",e),await T.reply({content:L(612)+"or occurred while removing the user "+L(704)+"he tic"+L(858)+L(776)+"try ag"+L(357)+"ter.",flags:MessageFlags[L(1152)+"ral"]})}else try{if(!config.TicketSettings?.Enabled)return T[L(230)]({content:"This command"+L(663)+"een di"+L(439)+L(238)+"e conf"+L(1024),flags:MessageFlags[L(1152)+L(527)]});if(!T.member[L(272)+"sions"][L(925)](PermissionsBitField.Flags["Admini"+L(538)+"r"]))return T.reply({content:b.qsGuh,flags:MessageFlags[L(1152)+"ral"]});let s=T[L(434)+"s"][L(682)+L(878)]("panel"),e=config["Ticket"+L(584)+L(347)+"s"][s];if(!e)return T[L(230)]({content:b[L(403)],flags:MessageFlags[L(1152)+L(527)]});let t=e[L(570)]||{},a=new EmbedBuilder,n=moment().tz(config.WorkingHours[L(898)+"ne"]),r=n[L(531)](b.zdJSz),o=b.SZhHa(r[L(517)](0).toUpperCase(),r[L(655)](1)[L(808)+"rCase"]()),c={};var st,it,at,ot,ct,lt,ut,gt,dt,ft,mt,wt;if(config[L(1133)+L(509)].NonWorkingDays&&config[L(1133)+"gHours"]["NonWor"+L(662)+"ys"][L(149)+"es"](o)?(c.start=L(651),c.end="N/A"):(st=config.WorkingHours[L(206)+"le"][o])&&([it,at]=st[L(758)]("-"),[ot,ct]=it[L(758)](":"),[lt,ut]=at.split(":"),dt=(gt=moment().tz(config.WorkingHours.Timezone))[L(429)]().hour(parseInt(ot)).minute(b.AZTUj(parseInt,ct)).second(0)[L(1033)+"econd"](0),ft=gt[L(429)]().hour(b[L(528)](parseInt,lt)).minute(b[L(385)](parseInt,ut))[L(409)](0).millisecond(0),c.start="<t:"+dt[L(1048)]()+":t>",c.end=L(943)+ft[L(1048)]()+":t>"),Object[L(565)](config[L(1133)+L(509)][L(206)+"le"]).forEach(e=>{let n=L;if("FwoHz"===b[n(258)])return h[n(804)+"e"](n(736))[n(893)+"cription"]("The pa"+n(986)+" display")[n(739)+"uired"](!0),i[n(565)](j["Ticket"+n(584)+n(347)+"s"]).forEach(e=>{var t=n;m[t(553)+"ices"]({name:e,value:e})}),l;var t,r,s,a,o;config[n(1133)+n(509)]["NonWor"+n(662)+"ys"]&&config["Workin"+n(509)][n(784)+"kingDays"].includes(e)?(c[e[n(808)+"rCase"]()+n(233)]=b.HEcMg,c[e.toLowerCase()+n(144)]=n(651)):([a,t]=config[n(1133)+n(509)][n(206)+"le"][e].split("-"),[a,o]=a.split(":"),[t,r]=t[n(758)](":"),a=(s=b.AErtJ(moment).tz(config[n(1133)+"gHours"].Timezone)).clone()[n(949)](b[n(183)](parseInt,a))[n(856)](parseInt(o))[n(409)](0)["millis"+n(762)](0),o=s[n(429)]()[n(949)](parseInt(t)).minute(b.ZROGH(parseInt,r)).second(0)["millis"+n(762)](0),c[e["toLowe"+n(424)]()+n(233)]="<t:"+a.unix()+n(301),c[e[n(808)+n(424)]()+n(144)]=n(943)+o[n(1048)]()+":t>")}),t[L(1101)]&&a[L(181)+"le"](replacePlaceholders(t[L(1101)],c)),t[L(295)+L(640)]&&Array.isArray(t[L(295)+"ption"])&&(mt=t[L(295)+"ption"].join("\n"))[L(939)]()&&a[L(893)+L(513)+"on"](b[L(219)](replacePlaceholders,mt,c)),t[L(677)]?b[L(1022)](L(623),b[L(330)])?(wt=g.Description[L(936)]("\n"))[L(939)]()&&k.setDescription(l(wt,m)):a[L(257)+"or"](t[L(677)]):a.setColor(L(245)+"F"),t[L(285)]?.[L(1004)]&&a[L(833)+L(839)]({text:replacePlaceholders(t.Footer.Text,c),iconURL:t[L(285)][L(323)]||null}),t[L(1017)]?.Text&&a[L(1067)+L(478)]({name:replacePlaceholders(t[L(1017)][L(1004)],c),iconURL:t.Author[L(323)]||null}),t.Image&&isValidHttpUrl(t.Image)&&a.setImage(t.Image),t["Thumbn"+L(372)]&&b.zPlnT(isValidHttpUrl,t["Thumbn"+L(372)])&&(b.JWkyt(b[L(958)],L(544))?b.wVQak(S.code,50007)&&i[L(476)]("Error sendin"+L(870),j):a[L(291)+"mbnail"](t["Thumbn"+L(372)])),t.Fields&&Array.isArray(t.Fields)){if("KzKMs"===L(1105))return R+"h "+S+"m";t[L(604)].forEach(e=>{var t=L,n=replacePlaceholders(e.name,c),r=b[t(462)](replacePlaceholders,e.value,c);b[t(432)](n,r)&&a["addFie"+t(1018)]({name:n,value:r,inline:e[t(228)]||!1})})}let u=config["Ticket"+L(967)+"gs"].useSelectMenu,d=[],f=new ActionRowBuilder;if(u){let r=(new StringSelectMenuBuilder)[L(214)+L(652)](b.hAtGo).setPlaceholder(lang[L(500)+"s"][L(500)+L(968)+"aceholder"]);if(r[L(532)+"ions"]({label:lang[L(500)+"s"]["Ticket"+L(968)+"acehol"+L(886)],value:"nothing_sele"+L(688),default:!0}),Object[L(565)](config[L(500)+L(423)])[L(1003)+"h"](e=>{var t=L,n=config[t(500)+"Types"][e];n.Enabled&&n[t(742)]===s&&r[t(532)+t(554)]({label:replacePlaceholders(n.Button[t(470)]||t(304)+t(718)+"et",c),emoji:n.Button[t(705)]||"",value:e,description:replacePlaceholders(n[t(1059)].Description||"",c)})}),!(0<r[L(434)+"s"].length)){if(L(952)!==L(916))throw new Error("No ticket ty"+L(498)+"e enab"+L(518)+"r this"+L(210)+".");return R.reply({content:L(474)+"ommand can only be"+L(157)+L(561)+L(1109)+L(781)+"annel.",flags:S.Ephemeral})}f.addComponents(r),d[L(360)](f)}else{if(Object[L(565)](config[L(500)+"Types"]).forEach(e=>{var t=L,n={xbeoB:"You do not have pe"+t(1099)+"ons to use t"+t(393)+t(1158)};if(!b[t(774)](t(707),"mvnRz"))return R[t(230)]({content:n.xbeoB,flags:S.Ephemeral});var r,n=config.TicketTypes[e];n[t(849)+"d"]&&n[t(742)]===s&&(r={Primary:ButtonStyle[t(855)+"y"],Secondary:ButtonStyle[t(351)+t(221)],Success:ButtonStyle[t(193)+"s"],Danger:ButtonStyle.Danger}[n.Button[t(529)]]||ButtonStyle[t(855)+"y"],f["addCom"+t(672)+"s"]((new ButtonBuilder)[t(214)+t(652)](t(1123)+"create-"+e).setLabel(replacePlaceholders(n.Button.Name||b[t(887)],c)).setEmoji(n.Button[t(705)]||"").setStyle(r)),5===f[t(1010)+"ents"][t(636)])&&(d[t(360)](f),f=new ActionRowBuilder)}),0<f["compon"+L(1007)].length){if("xJdkm"!==b[L(287)])return R.reply({content:b.TMfnq,flags:S[L(1152)+L(527)]});d[L(360)](f)}if(b.JDRRW(d[L(636)],0)){var ht=b[L(363)][L(758)]("|");let e=0;for(;;){switch(ht[e++]){case"0":console[L(243)]("\n"+colors.bold.yellow(b[L(1138)]));continue;case"1":console.log(colors.yellow(L(696)+L(500)+L(894)));continue;case"2":console.log(colors[L(611)]("‚îÇ"));continue;case"3":console.log(colors.yellow("‚îÇ"));continue;case"4":console.log(colors[L(611)](L(696)+L(902)+"n your"+L(386)+L(1012)+L(995)));continue;case"5":console.log(colors[L(510)][L(611)]("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"+L(154)+"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"+L(154)+L(154)+"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"+L(154)+"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"+L(154)+"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"+L(154)));continue;case"6":console.log(colors[L(611)]("‚îÇ  ‚ö†Ô∏è  Warnin"+L(959)+L(948)+L(215)+L(1075)+'es found for panel "'+s+'"'));continue;case"7":console.log(colors.yellow(L(494)+L(754)+"uide:"));continue;case"8":console[L(243)](colors[L(611)]("‚îÇ"));continue;case"9":throw new Error(L(508)+"bled t"+L(646)+L(594)+"found for this panel.");case"10":console.log(colors.yellow("‚îÇ     "+L(147)+"s://docs.dra"+L(944)+L(239)+"t.net/"+L(318)+"eature"+L(669)+L(1080)+"tem"));continue;case"11":console.log(colors[L(611)]("‚îÇ       Name"+L(763)+'eral Support"'));continue;case"12":console[L(243)](colors.yellow(L(251)+"xample confi"+L(957)+"on:"));continue;case"13":console[L(243)](colors.yellow("‚îÇ"));continue;case"14":console.log(colors.bold.yellow("üé´ TICKET PANEL WARNING -"+L(658)+"LID TICKET TYPES"));continue;case"15":console[L(243)](colors[L(611)](b[L(999)]));continue;case"16":console.log(colors.yellow("‚îÇ"));continue;case"17":console[L(243)](colors.yellow(L(696)+L(521)+L(200)+L(818)+L(170)+"and Su"+L(236)+"ole properly"));continue;case"18":console.log(colors.yellow("‚îÇ     "+L(208)+L(810)+": true"));continue;case"19":console.log(colors[L(611)]("‚îÇ     "+L(618)+L(481)+" least"+L(234)+L(646)+L(1039)+L(415)));continue;case"20":console[L(243)](colors[L(611)](L(696)+"2. Nav"+L(602)+L(1154)+" TicketTypes"+L(344)+"on"));continue;case"21":console[L(243)](colors.yellow("‚îÇ     "+L(820)+'anel: "'+s+'"'));continue;case"22":console.log(colors.yellow(L(696)+'  Panel: "'+s+'"'));continue;case"23":console[L(243)](colors[L(611)](L(735)+L(174)+"this:"));continue;case"24":console[L(243)](colors[L(611)](L(696)+"  CategoryID"+L(928)+L(537)+'GORY_ID"'));continue;case"25":console.log(colors.yellow("‚îÇ     "+L(328)+L(271)+'e: ["YOUR_ROLE_ID"]'));continue;case"26":console[L(243)](colors.bold[L(611)](L(154)+L(154)+"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"+L(154)+"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"+L(154)+L(154)+"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"+L(154)+L(154)+L(154)+L(154)+"\n"));continue}break}}}await T[L(230)]({content:L(500)+" panel"+L(1063),flags:MessageFlags[L(1152)+L(527)]}),await T.channel.send({embeds:[a],components:d})}catch(e){console.error(L(909)+L(772)+"g ticket panel:",e),await safeInteractionResponse(T,b.tuVtq,!0)}else try{var yt=T[L(434)+"s"][L(483)+"lean"]("silent")||!1,vt=T[L(434)+"s"][L(682)+"ing"](b.chYFh),Tt=T.options["getStr"+L(878)]("custom"+L(375)+"n");if(yt)try{await T.deferReply({flags:MessageFlags[L(1152)+L(527)]});var pt=await Ticket.findOne({channelId:T.channel.id});if(!pt){if(b.XWIMc===L(595))return T[L(653)+L(180)]({content:"Ticket"+L(836)+"ound or already closed."});g[L(953)+L(339)+L(1062)](e=>e.setName(L(268)).setDescription("Reason for c"+L(673)+" the t"+L(817))[L(739)+"uired"](!1)["addCho"+L(396)](...k.TicketSettings.CloseReasons[L(591)+"s"].map(e=>({name:e[L(552)]+" "+e[L(286)],value:e.value})))),i[L(500)+L(967)+"gs"].CloseReasons["AllowC"+L(1077)+"eason"]&&k[L(953)+"ingOption"](e=>e[L(804)+"e"]("custom_reason")[L(893)+L(513)+"on"]("Custom reaso"+L(549)+"closing the ticket")["setReq"+L(213)](!1))}let t=config["Ticket"+L(423)][pt[L(1123)+L(1088)]];if(t["Restri"+L(807)+L(374)])if(!T.member.roles.cache.some(e=>t[L(1124)+L(782)].includes(e.id)))return T.reply({content:L(726)+L(607)+L(152)+"rmission to close this ticket.",flags:MessageFlags[L(1152)+"ral"]});return await T[L(653)+L(180)]({content:L(500)+" close"+L(196)+"ntly."}),await Ticket[L(921)+L(940)+"date"]({channelId:T[L(1047)+"l"].id},{status:L(177)+"d",closedAt:new Date,closedBy:T.user.id}),void await T[L(1047)+"l"][L(177)]()}catch(e){return console.error("Error "+L(862)+L(761)+"ose:",e),void await safeInteractionResponse(T,b.kojeF,!0)}await T.deferReply({flags:MessageFlags["Epheme"+L(527)]});var Lt=await Ticket[L(921)+"e"]({channelId:T.channel.id});if(!Lt)return T[L(653)+L(180)]({content:L(500)+" not f"+L(764)+"r alre"+L(227)+"osed."});await handleTicketClose(T[L(806)],T,Lt[L(1123)+"Id"],vt,Tt)}catch(e){console[L(476)]("Error execut"+L(617)+"lose c"+L(756)+":",e),await safeInteractionResponse(T,b.XFLzm,!0)}else try{let t=await Ticket.findOne({channelId:T[L(1047)+"l"].id});if(!t)return T[L(230)]({content:L(474)+"ommand"+L(367)+"nly be"+L(157)+L(179)+"ket channels.",flags:MessageFlags[L(1152)+"ral"]});let e=config.TicketTypes[t[L(1123)+"Type"]];if(!e)return b.tAMCz("bXzAK",b[L(648)])?R[L(230)]({content:"This command can only be"+L(157)+L(561)+" a tic"+L(781)+"annel.",flags:S[L(1152)+L(527)]}):T[L(230)]({content:L(500)+L(398)+L(377)+"uratio"+L(610)+L(1006),flags:MessageFlags["Epheme"+L(527)]});let n=e[L(1124)+"tRole"];if(!T.member[L(674)][L(548)][L(951)](e=>n.includes(e.id)))return T.reply({content:"You do"+L(607)+"ave permission to "+L(430)+"is command.",flags:MessageFlags[L(1152)+L(527)]});if(!t[L(525)+L(942)]||!t[L(145)+"essageId"])return T[L(230)]({content:b.HbrsQ,flags:MessageFlags["Epheme"+L(527)]});try{let e=await T[L(1047)+"l"][L(770)+"es"][L(262)](t.alertMessageId);e&&await e[L(177)]()}catch(e){b.ObVmK(e[L(369)],10008)&&console[L(476)](L(909)+"deleting alert mes"+L(1065),e)}let r=e[L(625)+"ert"]?parseDuration(e.AutoAlert):0,s=(t.alertTime=0<r?new Date(b[L(799)](Date.now(),r)):null,t.alertReason=null,t[L(145)+L(348)+"Id"]=null,await t.save(),(new EmbedBuilder)[L(257)+"or"](b[L(306)]).setTitle("Alert "+L(1125)+"led")["setDes"+L(513)+"on"](L(603)+L(850)+"r this ticket has been c"+L(1076)+L(305)+"<@"+T[L(771)].id+">.")),i=(await T.reply({embeds:[s],flags:MessageFlags[L(1152)+L(527)]}),(new EmbedBuilder)[L(257)+"or"](L(650)+"0")[L(893)+"cription"]((lang[L(500)+"s"]?.[L(458)+"ancell"+L(840)]||b[L(168)])[L(159)+"e"]("{user}","<@"+T[L(771)].id+">")));await T.channel.send({embeds:[i]})}catch(e){if(b[L(473)]===L(503)){let[e,i]=l[L(758)]("-"),[a,c]=e.split(":"),[u,g]=i.split(":"),d=b.AErtJ(m).tz(n.WorkingHours[L(898)+"ne"]),f=d[L(429)]().hour(b[L(183)](o,a))[L(856)](p(c))[L(409)](0)[L(1033)+"econd"](0),w=d[L(429)]()[L(949)](b[L(512)](q,u))[L(856)](r(g)).second(0)["millis"+L(762)](0);s[L(293)]="<t:"+f[L(1048)]()+L(301),t[L(459)]=L(943)+w.unix()+L(301)}else console[L(476)]("Error "+L(326)+"ling a"+L(307),e),await T.reply({content:L(612)+L(370)+L(356)+"while cancel"+L(630)+L(472)+"rt. Pl"+L(203)+"ry again later.",flags:MessageFlags[L(1152)+"ral"]})}else if("EZglM"===L(461)){let a=await Ticket[L(921)+"e"]({channelId:T[L(1047)+"l"].id});if(!a)return"NznMQ"===L(624)?T[L(230)]({content:b.kWPSq,flags:MessageFlags[L(1152)+L(527)]}):R.reply({content:"You do not have pe"+L(1099)+"on to "+L(1037)+L(386)+L(587)+"rity.",flags:S.Ephemeral});let t=config["Ticket"+L(423)][a.ticketType];if(!t)return T.reply({content:L(500)+" type "+L(377)+L(930)+L(610)+"found.",flags:MessageFlags[L(1152)+"ral"]});let n=t[L(1124)+"tRole"];if(!T[L(615)].roles.cache[L(951)](e=>n.includes(e.id)))return L(201)!==b.KlUlK?R.reply({content:"You do"+L(607)+"ave pe"+L(1099)+"ons to use this command.",flags:S["Epheme"+L(527)]}):T.reply({content:L(726)+" not have permissi"+L(322)+"use th"+L(900)+L(848),flags:MessageFlags.Ephemeral});if(!config[L(675)][L(849)+"d"])return b.JWkyt(L(751),"oAcLN")?T.reply({content:L(814)+"featur"+L(656)+"isabled.",flags:MessageFlags["Epheme"+L(527)]}):S+"d "+g+"h "+h+"m";if(a[L(525)+L(942)]&&a["alertM"+L(348)+"Id"]&&b.NgQGu(a.alertTime,new Date)){let e=L(943)+Math.floor(a.alertTime[L(448)+"e"]()/1e3)+L(296);return T[L(230)]({content:"‚ö†Ô∏è An a"+L(847)+L(1093)+L(269)+L(440)+L(805)+"s ticket. It will "+L(912)+"r "+e+L(644)+" `/tickets cancel-"+L(632)+" to ca"+L(592)+L(795)+"sting alert first.",flags:MessageFlags["Epheme"+L(527)]})}await T[L(302)+"eply"]({flags:MessageFlags.Ephemeral});let c=T.options.getString("reason")||b.dPiWS,e=config.Alert[L(737)],r=b[L(512)](parseDuration,e),s=new Date(b[L(799)](Date[L(522)](),r)),l=L(943)+Math[L(767)](b[L(242)](s.getTime(),1e3))+":R>",u=config.Alert[L(570)],d=(new EmbedBuilder).setDescription(u["Descri"+L(640)][L(936)]("\n").replace(L(1094),"<@"+a[L(1049)]+">")[L(159)+"e"]("{time}",l)[L(159)+"e"](b.QbgSu,c)),f=(u.Title&&d.setTitle(u[L(1101)]),u.Color&&d[L(257)+"or"](u.Color),u.Footer?.[L(1004)]&&d[L(833)+L(839)]({text:u[L(285)].Text,iconURL:u.Footer.Icon||null}),u.Author?.[L(1004)]&&d[L(1067)+L(478)]({name:u[L(1017)][L(1004)],iconURL:u[L(1017)].Icon||null}),u.Image&&d.setImage(u[L(489)]),u[L(523)+L(372)]&&d[L(291)+L(229)](u["Thumbn"+L(372)]),(new ButtonBuilder)[L(214)+L(652)]("ticketclose-"+a.ticketId).setLabel(u.Button?.Label||L(320)+"Ticket").setStyle(ButtonStyle[u[L(1059)]?.Style||b[L(491)]]).setEmoji(u.Button?.Emoji||"üîî")),m=(new ActionRowBuilder)["addCom"+L(672)+"s"](f),w=await T[L(1047)+"l"].send("<@"+a[L(1049)]+">"),y=await T.channel.send({embeds:[d],components:[m]});if(b[L(988)](setTimeout,()=>w[L(177)](),500),await Ticket["findOneAndUp"+L(1034)]({channelId:T.channel.id},{alertTime:s,alertReason:c,alertMessageId:y.id}),config.Alert.DM?.[L(849)+"d"])try{if(b[L(984)]===b.ZMpBL){let e=await T.client[L(892)].fetch(a.userId)[L(970)](()=>null);if(!e)return void console.warn(L(500)+L(165)+L(1044)+L(294)+a.userId);let t=T.guild,n=new EmbedBuilder,r=config.Alert.DM[L(570)];r[L(1101)]&&n.setTitle(r.Title),r.Color&&n.setColor(r[L(677)]);var Ct=r.Description.join("\n").replace(b.kuGUS,"<@"+a[L(1049)]+">").replace(L(785)+"}",t.name).replace(b.fJqqY,l)[L(159)+"e"]("{reason}",c);n[L(893)+"cription"](Ct),r.Footer?.Text&&n.setFooter({text:r.Footer[L(1004)],iconURL:r[L(285)][L(323)]||null}),r.Author?.[L(1004)]&&n.setAuthor({name:r.Author.Text,iconURL:r[L(1017)][L(323)]||null}),r[L(489)]&&n[L(955)+"ge"](r[L(489)]),r[L(523)+"ail"]&&n.setThumbnail(r[L(523)+"ail"]);let s=(new ButtonBuilder)[L(715)+"el"](r[L(1059)]?.[L(895)]||L(974)+L(500))[L(1087)+"le"](ButtonStyle.Link).setURL("https://disc"+L(590)+L(990)+L(535)+t.id+"/"+a[L(1047)+"lId"])[L(710)+"ji"](r[L(1059)]?.[L(705)]||"üì®"),i=(new ActionRowBuilder)[L(1054)+L(672)+"s"](s);await e[L(1001)]({embeds:[n],components:[i]}).catch(()=>{var e=L;config[e(675)].DM?.[e(324)+e(783)]&&T.channel[e(1001)]({content:e(643)+" to se"+e(679)+"to the"+e(371)+" They "+e(832)+"ve DMs"+e(645)+e(283),flags:MessageFlags[e(1152)+"ral"]}).catch(()=>{})})}else{let e=i[L(500)+"Types"][j._id]?.[L(470)]||k._id;e[L(1025)](/^TicketType\d+$/)||(o[e]={total:a.count,open:t.openCount})}}catch(e){50007!==e[L(369)]&&console[L(476)]("Error sendin"+L(870),e)}notifyWatchers(T.client,a,"alert",{excludeUser:T[L(771)].id}),T[L(771)].id!==T.client[L(771)].id&&await T[L(653)+L(180)]({content:"Alert "+L(927)+"uccessfully! The t"+L(646)+L(209)+"e automatically cl"+L(1153)+l+L(278)+" respo"+L(315)+L(1127)+L(1132)})}else q.error("Error updati"+L(571)+"nnel "+r+":",s),t[L(770)+"e"][L(149)+"es"]("rate l"+L(873))?(E.queuedAt=F,G.retries=(H[L(1082)+"s"]||0)+1,I[L(1082)+"s"]>J&&M[L(177)](N)):O[L(177)](P);else try{let e=T[L(434)+"s"].getUser(b[L(946)]),t=await Ticket.findOne({channelId:T.channel.id});if(!t)return T[L(230)]({content:L(474)+L(756)+" can o"+L(455)+L(157)+"within"+L(1109)+L(781)+L(464),flags:MessageFlags.Ephemeral});let n=config["Ticket"+L(423)][t["ticket"+L(1088)]][L(1124)+"tRole"],r=T[L(615)].roles[L(548)].some(e=>n[L(149)+"es"](e.id));if(!r)return T[L(230)]({content:"You do not have pe"+L(1099)+"ons to use this co"+L(1158),flags:MessageFlags[L(1152)+"ral"]});let s=T.channel,i=s.permissionsFor(e);if(i&&i[L(925)](PermissionsBitField.Flags[L(1106)+L(256)],!1))return T.reply({content:"User is already added to"+L(633)+L(1123)+".",flags:MessageFlags["Epheme"+L(527)]});await s[L(272)+L(760)+"erwrites"][L(803)](e,{ViewChannel:!0,SendMessages:!0,ReadMessageHistory:!0,AttachFiles:!0,EmbedLinks:!0});let a=(new EmbedBuilder).setColor("#00FF00").setDescription("Successfully"+L(885)+" "+e.tag+(L(255)+L(298))+"et."),o=(await T.reply({embeds:[a],flags:MessageFlags[L(1152)+"ral"]}),(new EmbedBuilder).setColor(b[L(306)])["setDes"+L(513)+"on"]("<@"+e.id+"> has been a"+L(1095)+L(965)+"ticket by <@"+T[L(771)].id+">."));await s.send({embeds:[o]}),b.hExQZ(notifyWatchers,T.client,t,L(1031)+L(1115),{addedUser:e.id,addedBy:T.user.id,excludeUser:T.user.id})}catch(e){console[L(476)]("Error adding"+L(165)+L(162)+L(1135),e),await T[L(230)]({content:b.COcrg,flags:MessageFlags[L(1152)+L(527)]})}}};