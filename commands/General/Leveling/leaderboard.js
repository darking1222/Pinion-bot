let B=b,{SlashCommandBuilder,EmbedBuilder,ActionRowBuilder,ButtonBuilder,ButtonStyle,MessageFlags}=((()=>{for(var e=b,t=a();;)try{if(535547==-parseInt(e(261))+parseInt(e(299))/2*(-parseInt(e(275))/3)+-parseInt(e(186))/4+-parseInt(e(240))/5+-parseInt(e(215))/6*(parseInt(e(302))/7)+parseInt(e(232))/8*(parseInt(e(259))/9)+parseInt(e(205))/10)break;t.push(t.shift())}catch(e){t.push(t.shift())}})(),require("discord.js")),{getConfig,getLang,getCommands}=require("../../"+B(191)+"ls/cor"+B(263)+B(159)+"er.js"),config=getConfig(),lang=getLang(),UserData=require("../../../models/UserData.js"),Invite=require(B(292)+"../mod"+B(208)+"viteSc"+B(234)+"s"),leaderboardCache=require("../../../uti"+B(238)+B(246)+"rd-cache.js"),CACHE_DURATION=3e5;function b(s,e){let n=a();return(b=function(e,t){e-=156;let a=n[e];void 0===b.jbhENj&&(b.PJYvaW=function(s){let n="",a="";for(let e=0,t,a,r=0;a=s.charAt(r++);~a&&(t=e%4?64*t+a:a,e++%4)&&(n+=String.fromCharCode(255&t>>(-2*e&6))))a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(a);for(let e=0,t=n.length;e<t;e++)a+="%"+("00"+n.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(a)},s=arguments,b.jbhENj=!0);var e=e+n[0],r=s[e];return r?a=r:(a=b.PJYvaW(a),s[e]=a),a})(s,e)}function formatNumber(e){var t=B,a=(null==e&&(e=0),["","k","M","B","T","Qa","Qi","Sx","Sp","Oc","No","Dc"]),r=Math[t(283)](Math.log10(Math.abs(e))/3);return a.length<=r?"8":0!==r?(e/Math[t(241)](1e3,r)).toFixed(1)[t(207)+"e"](/\.0$/,"")+a[r]:e[t(311)+"ng"]()}async function createLeaderboardEmbed(e,t,n,a,i,l,o){let u=B,d={czLnq:u(304)+"e",mddnA:u(211),mHzFK:"Invites",btpCD:"No data avai"+u(247)+u(277)+u(319)+"derboa"+u(290),scJwU:function(e,t){return e+t},pJIDP:function(e,t){return e+t},fXjWi:"..."},r={balance:{color:5763719,name:d[u(323)]},levels:{color:16705372,name:d[u(312)]},messages:{color:5793266,name:"Messages"},invites:{color:15418782,name:d[u(239)]}},s=r[n],c=Math.ceil(l/i),g=(new EmbedBuilder).setTitle(u(182)+" "+s.name+" Leaderboard").setColor(s[u(187)]);if(e&&0!==e.length){let r="",s=d[u(220)](a*i,1);for(var m of e){let e="";switch(n){case u(226)+"e":e=formatNumber(m["totalB"+u(168)]||0);break;case u(321):e=m[u(216)]||0;break;case u(293)+"es":e=formatNumber(m["totalM"+u(295)+"s"]||0);break;case"invites":e=formatNumber(m.invites||0)}let t="",a=(t=1===s?"ðŸ¥‡":2===s?"ðŸ¥ˆ":3===s?"ðŸ¥‰":"ðŸ”¹",m.username);20<a.length&&(a=d.pJIDP(a["substr"+u(189)](0,17),d[u(192)])),r+=t+u(233)+e+" `** - `"+a+"`\n",s++}g.setDescription(r);l="Your position: #"+(await getUserPosition(t,n,o)||u(309))+" - Page "+(a+1)+" of "+c;g[u(164)+u(213)]({text:l})}else g["setDes"+u(278)+"on"](d.btpCD),g.setFooter({text:u(214)+(a+1)+u(314)+c});return g}function a(){let e=["Cg9Uzw50","DgvY","ugfNzsa","mtjZBeP6uKm","Bgv2zwW","y3jLyxrL","C2v0tMfT","z2v0","C2nkD1u","CNmGD2L0","Dg9UihjL","tgfZDcdIJ63VUi8","y29TBwfU","Aw9UoG","yMfSyw5J","zgf0yq","zgv4","BMvUDenV","DxnLCKLK","BwfW","mZm4mdGXnKDLq2XHtW","icOQyca","AgvTys5Q","BMCGBgvH","DgHVCML6","ugfNzsbU","BhmVBgvH","BuH6rKS","mZGYntq0nunurw5yCa","Cg93","y29Kzq","Bwf4","AguGDxnL","BIbvC2vY","zgvYyM9H","BgfIBguG","rLfTtva","zxbSEq","B2n1BwvU","y291BNre","tMv4DcdILRBVUi8","zxHWB3j0","ywrKsw50","ywrKu3vI","tLzrqvm","DhL4r3C","Dg90ywW","mtHYv0fmzgK","jhvZzxjj","ntKZmZu4yxbzrLjZ","4PEa77IpifbYzxy","zs9JB25M","v1fIDui","B2fYzhm","DcbSzxzL","C2v0rgLZ","C2v0tgfI","z3vPBgq","DxnLCNm","zMv0y2G","ww91ignH","BgfZDa","C2v0rgvZ","ndvJueXSEMO","DgLVBG","zM9YihrO","y3jPChrP","vMfSDwu","zMLUzeLU","tKLMzLq","BwLUyxrV","zMXVB3i","Dg8GDMLL","yM9HCMq","C2v0twLU","shrivu8","yxLNqwi","z2v0sw50","CMqU","ysbHDMfP","lI4VlI4V","BwvZC2fN","Aw52AxrL","zxnZywDL","C2v0u3r5","DxnLCG","BM5VDcb1","mZi0ntzbEK5dEw8","yw1W","zwrPDa","mZa1nteXnwvcsfnPza","C2v0","qMfSyw5J","BMfTzq","DcbYDw4G","vMLLDYbS","zw5K","tI9b","zYb1BMf1","Dg9tDhjP","BwrKBKe","jgjHBgfU","ig9Mia","DxnLCM5H","CYb5B3uG","CMfS","CgfNzq","AxmGBgvH","B2Xzy1q","Bgv2zwXZ","rfnvChy","y3PmBNe","yxj5","Aw91CW","uhjPBwfY","ywDNCMvN","C2vUzgLU","AwDmB2fK","CMqGAw50","y2vPBa","yxrL","y291BNqT","C2v0rM9V","Dw1IzxiG","twvZC2fN","Bw9ZDcbP","ywXHBMnL","jgLUDML0","zxjHy3rP","zwDLCK9W","DxbKyxrP","x2LK","C2uGDgHL","zxjYB3i","Dwr4Cuq","ywjSzwq","C2v0q3vZ","zgLKig5V","yxjMr0u","BM93","r2XVyMfS","rxjYB3iG","BNLKC2G","z2v0u3vI","mJa3ntK2ogrzqunYua","y29SB3i","Acb0AguG","Aw5N","zMLYC3q","lI4VDxrP","zLHQv2K","Bw9ZDcbT","zwDLCG","B246","BMv4Da","u2vJB25K","Dg9Tswq","CgX5","vMLLDYb0","weDyEgy","ywrKq29T","zunVBxbV","zxjjra","mJy4nda5mJbRue1kDey","Euf2yxrH","CMvWBgfJ","zwXZl2LU","jgjHBMS","zwfKzxjI","tgv2zwXZ"];return(a=function(){return e})()}async function getUserPosition(t,a,r){let s=B,n={NIffT:s(183)+s(172)+"ng lea"+s(246)+s(160)+s(170)+s(195),FQmMP:s(260)+"d",DSUpv:"nybBR",pFnvJ:"$xp",udxqD:"messages",NVQAS:"$totalMessages",WQbuB:"$uses",aygAb:s(169)+"es"};try{let e=null;switch(a){case"balance":var i=await UserData[s(157)+"ate"]([{$match:{guildId:t.id,$or:[{balance:{$gt:0}},{bank:{$gt:0}}]}},{$addFields:{totalBalance:{$add:[{$ifNull:["$balance",0]},{$ifNull:[s(209),0]}]}}},{$sort:{totalBalance:-1}},{$group:{_id:null,users:{$push:{userId:n[s(248)],totalBalance:"$total"+s(304)+"e"}}}}]);if(i[0])if(n[s(322)]!==n[s(322)]){if(10062===n.code)return;e.error(n[s(281)],i)}else e=i[0][s(270)][s(280)+s(228)](e=>e[s(230)]===r)+1;break;case"levels":var l=await UserData[s(157)+"ate"]([{$match:{guildId:t.id,$or:[{level:{$gt:0}},{xp:{$gt:0}}]}},{$sort:{level:-1,xp:-1}},{$group:{_id:null,users:{$push:{userId:"$userId",level:"$level",xp:n.pFnvJ}}}}]);l[0]&&(e=l[0][s(270)][s(280)+s(228)](e=>e[s(230)]===r)+1);break;case n[s(176)]:var o=await UserData["aggreg"+s(162)]([{$match:{guildId:t.id,totalMessages:{$gt:0}}},{$sort:{totalMessages:-1}},{$group:{_id:null,users:{$push:{userId:n.FQmMP,totalMessages:n[s(256)]}}}}]);o[0]&&(e=o[0].users["findIn"+s(228)](e=>e[s(230)]===r)+1);break;case s(294)+"s":var u=await Invite["aggreg"+s(162)]([{$match:{guildID:t.id}},{$group:{_id:"$invit"+s(204),userId:{$first:"$invit"+s(204)},invites:{$sum:n[s(264)]}}},{$match:{invites:{$gt:0}}},{$sort:{invites:-1}},{$group:{_id:null,users:{$push:{userId:s(260)+"d",invites:n[s(288)]}}}}]);u[0]&&(e=u[0].users[s(280)+"dex"](e=>e.userId===r)+1)}return 0<e?e:null}catch(e){return console[s(175)]("Error getting user posit"+s(225),e),null}}async function getLeaderboardData(s,e,t,a){let n=B,r={KdSGQ:n(321),LIfXL:"$uses"},i=s.id+"-"+e+"-"+t+"-"+a,l=leaderboardCache[n(219)](i);if(l&&Date.now()-l.timestamp<CACHE_DURATION){if("QYVTv"!==n(184))return l.data;a=r[0].users["findIn"+n(228)](e=>e.userId===l)+1}var o=t*a;let u;switch(e){case"balance":u=await UserData[n(157)+n(162)]([{$match:{guildId:s.id,$or:[{balance:{$gt:0}},{bank:{$gt:0}}]}},{$addFields:{totalBalance:{$add:[{$ifNull:[n(313)+"ce",0]},{$ifNull:[n(209),0]}]}}},{$sort:{totalBalance:-1}},{$skip:o},{$limit:a}],{allowDiskUse:!0});break;case r.KdSGQ:u=await UserData[n(157)+"ate"]([{$match:{guildId:s.id,$or:[{level:{$gt:0}},{xp:{$gt:0}}]}},{$sort:{level:-1,xp:-1}},{$skip:o},{$limit:a}],{allowDiskUse:!0});break;case"messages":u=await UserData["aggreg"+n(162)]([{$match:{guildId:s.id,totalMessages:{$gt:0}}},{$sort:{totalMessages:-1}},{$skip:o},{$limit:a}],{allowDiskUse:!0});break;case"invites":u=await Invite[n(157)+n(162)]([{$match:{guildID:s.id}},{$group:{_id:"$inviterID",userId:{$first:n(169)+n(204)},invites:{$sum:r.LIfXL}}},{$match:{invites:{$gt:0}}},{$sort:{invites:-1}},{$skip:o},{$limit:a}],{allowDiskUse:!0})}let d=u.map(e=>e.userId||e[n(173)]),c=await s.members[n(271)]({user:d}).catch(()=>new Map),g=await Promise.all(u[n(231)](async e=>{var t=n,a=e.userId||e._id,r=c.get(a);return r?{...e,username:r[t(297)].username,discriminator:r.user["discri"+t(282)+"r"],avatar:r.user["displa"+t(206)+"rURL"]({extension:"png",size:128})}:(r=await s.client[t(270)].fetch(a).catch(()=>null))?{...e,username:r[t(315)+"me"],discriminator:r.discriminator,avatar:r["displa"+t(206)+"rURL"]({extension:"png",size:128})}:{...e,username:"Unknow"+t(245),discriminator:"0",avatar:""}}));return leaderboardCache[n(303)](i,{data:g,timestamp:Date[n(181)]()}),g}async function getTotalCount(e,t){var a=B,r={GLvuv:function(e,t){return e-t},bgTHj:"levels",XGXxf:"total"},s=a(163)+e.id+"-"+t,n=leaderboardCache[a(219)](s);if(n&&r.GLvuv(Date.now(),n["timest"+a(300)])<CACHE_DURATION)return n[a(227)];let i;switch(t){case"balance":i=await UserData.countDocuments({guildId:e.id,$or:[{balance:{$gt:0}},{bank:{$gt:0}}]});break;case r.bgTHj:i=await UserData[a(251)+a(250)+"ts"]({guildId:e.id,$or:[{level:{$gt:0}},{xp:{$gt:0}}]});break;case a(293)+"es":i=await UserData["countD"+a(250)+"ts"]({guildId:e.id,totalMessages:{$gt:0}});break;case"invites":var l=await Invite[a(157)+a(162)]([{$match:{guildID:e.id}},{$group:{_id:a(169)+a(204),invites:{$sum:"$uses"}}},{$match:{invites:{$gt:0}}},{$count:r[a(201)]}],{allowDiskUse:!0});i=l[0]?.[a(258)]||0}return leaderboardCache.set(s,{data:i,timestamp:Date[a(181)]()}),i}module[B(253)+"s"]={data:(new SlashCommandBuilder).setName("leaderboard").setDescription(B(307)+B(210)+B(265))[B(255)+"command"](e=>e[B(218)+"e"]("balance").setDescription("View the use"+B(221)+B(188)+"highest balance")[B(254)+B(171)+B(276)](e=>e[B(218)+"e"](B(318))["setDes"+B(278)+"on"](B(237)+"umber "+B(284)+"w")[B(286)+B(279)](1)))[B(255)+"command"](e=>e.setName(B(321))[B(274)+"cription"](B(200)+B(244)+B(221)+B(188)+"highes"+B(266)+"l").addIntegerOption(e=>e[B(218)+"e"](B(318))["setDes"+B(278)+"on"]("Page n"+B(165)+"to view")[B(286)+B(279)](1)))["addSub"+B(224)+"d"](e=>e.setName(B(293)+"es").setDescription(B(200)+"he use"+B(221)+"h the "+B(193)+"essages").addIntegerOption(e=>e[B(218)+"e"](B(318))[B(274)+B(278)+"on"]("Page n"+B(165)+B(284)+"w")[B(286)+"Value"](1)))[B(255)+"command"](e=>e[B(218)+"e"](B(294)+"s")["setDes"+B(278)+"on"]("View t"+B(244)+"rs wit"+B(188)+B(167)+"nvites")["addInt"+B(171)+B(276)](e=>e.setName("page").setDescription(B(237)+B(165)+"to view")[B(286)+B(279)](1))),category:"General",async execute(l){let o=B,u={HtHUO:function(e,t,a,r,s){return e(t,a,r,s)},TuLmU:function(e,t){return e===t},jVCUe:"next",olYcT:function(e,t){return t<=e},qDeDB:"XZxgS",NBiMz:"first",tyxGw:"â®ï¸ First",arfGE:function(e,t){return e===t}};try{await l["deferR"+o(249)]();let r=l.options[o(185)+o(224)+"d"](),s=(l.options[o(289)+o(194)]("page")||1)-1,n=await getTotalCount(l[o(269)],r),i=Math[o(161)](n/10);if(u.olYcT(s,i)){if(u[o(180)]("fnlfp","Ylnqz"))return"8";s=Math[o(243)](0,i-1)}async function d(e){var t=o,a=await u[t(287)](getLeaderboardData,l.guild,r,e,10);return!a||u.TuLmU(a.length,0)?{content:"No dat"+t(291)+t(247)+"for this leaderboa"+t(290),flags:MessageFlags.Ephemeral}:{embeds:[await createLeaderboardEmbed(a,l.guild,r,e,10,n,l[t(297)].id)],components:[(new ActionRowBuilder)[t(202)+t(212)+"s"]((new ButtonBuilder)[t(178)+t(198)](t(190))[t(268)+"el"]("â®ï¸ First").setStyle(ButtonStyle[t(197)+"ary"]).setDisabled(0===e),(new ButtonBuilder).setCustomId("prev").setLabel("â—€ï¸ Prev"+t(325)).setStyle(ButtonStyle[t(156)+"y"])["setDis"+t(177)](0===e),(new ButtonBuilder)["setCus"+t(198)](u.jVCUe).setLabel(t(252)).setStyle(ButtonStyle[t(156)+"y"]).setDisabled(e>=i-1),(new ButtonBuilder)[t(178)+"tomId"](t(273))[t(268)+"el"](t(223))[t(296)+"le"](ButtonStyle["Second"+t(324)])[t(267)+"abled"](u[t(320)](e,i-1)))]}}let e=await d(s),a=await l.editReply(e),t=a[o(217)+o(166)+o(203)+o(229)+"llector"]({time:6e4});t.on("collect",async e=>{var t=o;if(e.user.id!==l.user.id)try{await e.reply({content:t(272)+t(298)+t(174)+"se buttons a"+t(316)+t(179)+t(306)+"the command.",flags:MessageFlags.Ephemeral})}catch(e){10062!==e[t(242)]&&console[t(175)]("Error "+t(158)+t(310)+t(236)+"ed but"+t(222)+"sponse:",e)}else{switch(e.customId){case t(190):s=0;break;case"prev":s=Math.max(0,s-1);break;case"next":s=Math.min(i-1,s+1);break;case"last":s=i-1}try{var a=await d(s);await e.update(a)}catch(e){if(10062===e.code)return"XZxgS"!==u.qDeDB?(r[t(175)]("Error getting user position:",s),null):void 0;console.error(t(183)+"updati"+t(235)+"derboard int"+t(170)+"on:",e)}}}),t.on(o(308),async()=>{var e=o,t=(new ActionRowBuilder)[e(202)+e(212)+"s"]((new ButtonBuilder).setCustomId(u.NBiMz).setLabel(u[e(257)])[e(296)+"le"](ButtonStyle["Second"+e(324)])["setDis"+e(177)](!0),(new ButtonBuilder)["setCus"+e(198)]("prev")[e(268)+"el"](e(262)+e(325))[e(296)+"le"](ButtonStyle.Primary)[e(267)+"abled"](!0),(new ButtonBuilder)["setCus"+e(198)](e(196))[e(268)+"el"](e(252)).setStyle(ButtonStyle.Primary).setDisabled(!0),(new ButtonBuilder)["setCus"+e(198)]("last")[e(268)+"el"](e(223))[e(296)+"le"](ButtonStyle["Second"+e(324)]).setDisabled(!0));await a[e(301)]({components:[t]}).catch(()=>{})})}catch(e){console.error(e),await l["editRe"+o(199)]({content:lang["Leader"+o(285)].Error[o(207)+"e"](/{guild}/g,l[o(269)][o(305)]),flags:MessageFlags["Epheme"+o(317)]})}}};