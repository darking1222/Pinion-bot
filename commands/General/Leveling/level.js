let Z=b;function a(){let e=["DMvSCZO","igLUihrO","igeGDxnL","lI4VBw9K","B0PTDwi","suHmr1O","zgLZy29Y","mtG2ntaWnZfmz2v3t3a","zxiGC2v0","D2HPBguG","ywrKu3rY","BsbszxnL","CYbYB2XL","sw50zxjH","BMDtExn0","CK9WDgLV","C2uGzw5Z","DxnLCM5H","zwrPDfjL","mJe5yuPvq0zK","qM90Acby","ChPKEMi","Aw5NihrO","ywrKsw50","ksbMCM9T","y29UzMLY","ywrKvxnL","AKHyyxi","E3HWFq","Aw9U","CYb0BYbH","zMLSDgvY","tKrDievY","DezVDw5K","zMXVB3i","zxzLBhmG","DNrAy0m","zwXZl1vZ","DxbKyxrL","CMvZzxq","wfaGB3iG","DwLYzwq","zxjZjYbS","C2v0rgvZ","q3vYCMvU","vLLSCeK","iIaO","AKDvveK","zxjYB3i","ifHqig9Y","wfbozwvK","ienptu1b","z2fPBI4","mZy2mdiWC0PmBe1t","C2z1BgX5","yM90Aa","DxnLCG","BgvKlG","DgLUz3mU","CgvYBwLZ","zYbSzxzL","E3vZzxj9","CM9Szxm","lIbqBgvH","zMLYBwf0","zwqGywjV","Dw5KB25L","zIbHihvZ","DgLVBG","4PQG77IpieXLDMu","zxzHBhvH","uM9SzvnL","mJe4mJmXmfD4BMT3vq","AfjVAMy","DhLWzq","x3jLC2v0","ngfLq2jTCW","ihDOyxqG","ALrgDxe","tKrDiejV","uMvZzxqG","y2fJAgu","yw50ihrV","DwXHoG","AwnLCW","DgHPCYbZ","DgfN","iIbMCM9T","BMfTzq","Dg9tDhjP","igXLDMvS","zsbIB3qN","zw1VDMuG","Bv9SzxzL","DxjYzwqG","zc5QCW","DhrPBMDZ","C2v0q29S","zxiGDg8G","ucbHBMqG","Aw9UigHH","i0zgmdaW","rM9YBxvS","BcbVzIbH","u3rHy2Ts","y29TBwfU","ucbVCIbm","r2L2zsby","BwvTyMvY","C2v0q3vZ","ihjVBguG","zw50","wfaGyw5K","AeH6u1K","zfflzvi","BgvUz3rO","z2v0","C2v0tMfT","zsbHBw91","CMvWBgfJ","B3iGB2nJ","vKrJru0","q2fUy2vS","C2LVBNm","y3jPChrP","Cg9Uzw50","vxnLrM9Y","Aw5Nt3b0","y29Kzq","Aw5N","B2XLCW","zwTIAwC","AgfZ","Bwf4","z3vPBgq","Dfnnq3G","C2vY","Bgv2zwW","CMvTB3zL","z1nMwwi","CM9SzuLe","igzVCG","qxjLihLV","y3vZDg9T","uhjVy2vZ","mZe5mgXiEKfeDa","nda1nJCYCMverejN","DeXLDMvS","ucbMB3jT","tgv2zwXP","mJiZmJrcEgHWA2q","DxjLihrO","zMv0y2G","yxj5","tM9Uzq","CMvZzxr0","BIbJyw5U","CgX5","y2HLy2SG","tgv2zwW","ywrKu3vI","vxbKyxrL","qwrTAw5P","Dg8Gysb1","CYbMCM9T","ELfTzuK","ihvZzxjZ","ihjLC2v0","ugvYBwLZ","ksb0BYa","zw0GuMvZ","DcbSywnR","CMfS","zsbZzxj2","ig91Dc4G","zxnLDc4U","yw1VDw50","qw1VDw50","rgf0yu5V","q2HVB3nL","zMLUze9U","vgHLihvZ","BcbtExn0","q29UzMLY","C2L0Aw9U","DgLUzYby","B2XSzwn0","s095vfi","igLZihbV","CM9YigfZ","BMrSAw5N","ig9YieXL","r2vUzxjH","rxbOzw1L","zfHq","u3vJy2vZ","zwDLCK9W","iIb0BYa","C3rYyxrV","z2L2zq","sentz1G","Bw9KAwzP","zwrdB3vU","y2HLy2S","zxj2zxi/","CMvWBhK","ihjVBgvZ","mtjYzxzrweG","ywrKq2HV","Bgv2zwWG","qw4GzxjY","Bgv2zwXZ","C2v0","sgzzu3O","zeXLDMvS","tgv2zwXZ","AguGy29U","igfJDgLV","B3b0Aw9U","mtG0otrzD1rMt2q","CgHYt04","qw5Kwfa","Ag9Zveq","w0XfvKvm","C2LNBMLU","zxjeyxrH","C2v0uMvX","DMuGDgHL","y2fUy2vS","A3rmDee","yxfSqNy","mtqZnJrNAffRs3K","AxnZAw9U","BgWGDxnL","zgf0zq","DMvSCYb0","BhmU","ieXLDMvS","u0Dss0e","zxqGq29U"];return(a=function(){return e})()}(()=>{for(var e=b,t=a();;)try{if(369255==-parseInt(e(531))*(parseInt(e(554))/2)+-parseInt(e(497))/3*(-parseInt(e(388))/4)+-parseInt(e(550))/5+parseInt(e(445))/6*(-parseInt(e(457))/7)+-parseInt(e(384))/8+-parseInt(e(469))/9*(parseInt(e(383))/10)+parseInt(e(485))/11)break;t.push(t.shift())}catch(e){t.push(t.shift())}})();let{SlashCommandBuilder,EmbedBuilder,PermissionsBitField,ActionRowBuilder,ButtonBuilder,ButtonStyle,MessageFlags}=require(Z(484)+Z(573)),UserData=require("../../"+Z(481)+Z(515)+Z(463)),fs=require("fs"),yaml=require("js-yaml"),{getConfig,getLang,getCommands}=require("../../../utils/core/configLoader.js"),config=getConfig(),lang=getLang();function b(s,e){let i=a();return(b=function(e,t){e-=383;let r=i[e];void 0===b.CBmgwd&&(b.lQpysd=function(a){let s="",r="";for(let e=0,t,r,n=0;r=a.charAt(n++);~r&&(t=e%4?64*t+r:r,e++%4)&&(s+=String.fromCharCode(255&t>>(-2*e&6))))r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(let e=0,t=s.length;e<t;e++)r+="%"+("00"+s.charCodeAt(e).toString(16)).slice(-2);return decodeURIComponent(r)},s=arguments,b.CBmgwd=!0);var e=e+i[0],n=s[e];return n?r=n:(r=b.lQpysd(r),s[e]=r),r})(s,e)}function calculateXPNeeded(c){let a0=Z,d={JloGA:function(e,t){return e===t},jTFuq:function(e,t){return e*t},nbBux:function(e,t){return e+t},aRMAT:function(e,t){return e*t}};if(d.JloGA(c,0))return 70;if(config[a0(387)+a0(492)+"em"][a0(604)+"mula"]&&config.LevelingSystem[a0(580)+"a"])try{let e=config.LevelingSystem[a0(580)+"a"][a0(597)+"e"](/\{level\}/g,(c+1)[a0(567)+"ng"]()),f=eval(e[a0(597)+"e"](/\^/g,"**"));return Math[a0(611)](1,Math.floor(f))}catch(g){return console[a0(526)]("Error "+a0(548)+"ting XP form"+a0(561),g),d[a0(556)](d.nbBux(c,1),config["Leveli"+a0(492)+"em"][a0(528)+"ed"])}return d.aRMAT(d.nbBux(c,1),config[a0(387)+a0(492)+"em"].XPNeeded)}async function assignLevelRoles(t,r){let n=Z,e={HfYSz:function(e,t){return t<e},SGRKA:function(e,t){return t<=e}},a=config[n(387)+"ngSystem"][n(549)+n(574)]["LevelR"+n(608)]||[],s=config.LevelingSystem[n(549)+n(574)][n(582)+n(608)],i=a[n(509)](e=>r>=e[n(615)]&&e[n(618)]),o=e[n(451)](i[n(593)],0)?i.reduce((e,t)=>e[n(615)]>t.level?e:t):null;for(var l of a){var u=l.roleID?t.guild[n(540)].cache[n(594)](l[n(618)]):null;if(u){l=s?e[n(476)](r,l[n(615)]):o&&l.roleID===o.roleID;if(l&&!t.roles.cache[n(610)](u.id))try{await t.roles.add(u)}catch(e){50013===e.code?console.error(n(461)+n(529)+n(557)+n(409)+"s perm"+n(470)+n(508)+'ssign level role "'+u[n(566)]+'" ('+u.id+n(407)+t.user.tag+". Plea"+n(494)+n(389)+"e bot'"+n(490)+" is position"+n(543)+n(465)+n(568)+" roles in th"+n(411)+"er set"+n(536)):console.error("[LEVEL COMMAND] Er"+n(427)+'signing level role "'+u[n(566)]+n(435)+t[n(534)][n(564)]+":",e)}else if(!l&&t[n(540)][n(559)].has(u.id))try{await t[n(540)].remove(u)}catch(e){50013===e[n(606)]?console[n(526)](n(461)+" COMMA"+n(557)+"t lacks perm"+n(470)+"s to r"+n(570)+n(447)+'role "'+u[n(566)]+n(524)+u.id+n(502)+" "+t[n(534)].tag+n(541)+"se ens"+n(389)+n(569)+n(490)+n(426)+n(422)+"ed abo"+n(465)+" level roles"+n(479)+n(411)+"er set"+n(536)):console.error("[LEVEL COMMA"+n(510)+"ror removing level"+n(588)+'"'+u[n(566)]+n(565)+" "+t.user[n(564)]+":",e)}}}}module.exports={data:(new SlashCommandBuilder)[Z(595)+"e"](Z(615))[Z(521)+Z(602)+"on"]("Manage user "+Z(449)+" and XP")["addSub"+Z(583)+"d"](e=>e[Z(595)+"e"](Z(437))[Z(521)+"cription"](Z(585)+Z(584)+Z(513)+Z(401)+Z(614))["addUse"+Z(493)+"n"](e=>e.setName(Z(534))[Z(521)+Z(602)+"on"]("The us"+Z(576)+"give XP or Levels to").setRequired(!0))["addStr"+Z(605)+Z(507)](e=>e[Z(595)+"e"]("type").setDescription(Z(417)+Z(527)+" Level").setRequired(!0)[Z(446)+"ices"]({name:"XP",value:"xp"},{name:Z(397),value:Z(615)}))[Z(501)+Z(434)+Z(546)](e=>e.setName(Z(414))[Z(521)+"cription"](Z(415)+" of XP or Le"+Z(473)+"o give")[Z(464)+"uired"](!0))).addSubcommand(e=>e[Z(595)+"e"]("remove")["setDes"+Z(602)+"on"]("Remove XP or"+Z(475)+"s from"+Z(480)+"r")["addUse"+Z(493)+"n"](e=>e.setName("user")[Z(521)+Z(602)+"on"]("The user to "+Z(616)+Z(527)+" Level"+Z(402))[Z(464)+Z(519)](!0))["addStr"+Z(605)+Z(507)](e=>e[Z(595)+"e"]("type")[Z(521)+Z(602)+"on"]("Choose XP or Level")["setReq"+Z(519)](!0)["addCho"+Z(562)]({name:"XP",value:"xp"},{name:"Level",value:"level"}))["addIntegerOp"+Z(546)](e=>e.setName(Z(414)).setDescription("Amount of XP or Le"+Z(473)+"o remove")[Z(464)+Z(519)](!0))).addSubcommand(e=>e.setName("set")[Z(521)+Z(602)+"on"]("Set the XP or Leve"+Z(581)+" user")[Z(504)+"rOption"](e=>e[Z(595)+"e"](Z(534))[Z(521)+Z(602)+"on"](Z(419)+Z(576)+"set XP"+Z(429)+"vel for").setRequired(!0))[Z(488)+Z(605)+"ion"](e=>e[Z(595)+"e"]("type")["setDes"+Z(602)+"on"](Z(417)+" XP or Level")[Z(464)+"uired"](!0)["addCho"+Z(562)]({name:"XP",value:"xp"},{name:Z(397),value:"level"}))["addIntegerOp"+Z(546)](e=>e[Z(595)+"e"]("amount")["setDes"+Z(602)+"on"]("Set th"+Z(596)+"nt of "+Z(518)+Z(397))["setReq"+Z(519)](!0)))["addSub"+Z(583)+"d"](e=>e[Z(595)+"e"](Z(441)).setDescription("Check the XP and level o"+Z(545)+"er")["addUse"+Z(493)+"n"](e=>e.setName("user")[Z(521)+"cription"]("The user to "+Z(396)+Z(590)+" level"+Z(619))[Z(464)+Z(519)](!1)))[Z(398)+Z(583)+"d"](e=>e.setName("reset")[Z(521)+Z(602)+"on"](Z(558)+"all us"+Z(520)+Z(513)+"and XP in th"+Z(411)+"er")[Z(488)+"ingOption"](e=>e[Z(595)+"e"]("type")[Z(521)+Z(602)+"on"](Z(417)+Z(555)+"to reset")[Z(464)+"uired"](!0)[Z(446)+Z(562)]({name:"XP Only",value:"xp"},{name:"Level Only",value:Z(615)},{name:Z(498)+Z(577)+Z(397),value:Z(533)}))),category:Z(430)+"l",async execute(g){let d=Z,c={dQKeR:function(e,t){return e+t},RirLn:function(e,t){return e+t},xYMtj:function(e,t){return e!==t},vtZcC:d(441),zQmeI:d(552),kJkQA:d(547)+d(420)+d(408)+d(477)+d(542)+"ion",HCSgX:d(533),lFYCq:"#FFA500",UvBRq:"cancel_level"+d(553),phrON:function(e,t){return e!==t},IHLGZ:d(503)+"m_level_reset",XfSOj:function(e,t){return e===t},uoAia:"level",fhUxF:function(e,t){return e===t},jGUTI:"OkBQT",VYlpI:d(579)+"0",gSfYb:d(491)+"ctionC"+d(424)+"orError",ktLtA:d(421)+"mation timed"+d(412)+"Please try a"+d(530),YubTG:"Error in confirmat"+d(578)+d(428)+":",FeIYI:d(534),KOyTR:d(437),jHXar:"remove",VDcEM:function(e,t){return e-t},DyRIj:function(e,t){return e(t)},hRojf:d(591),DmxOb:function(e,t,r){return e(t,r)},hosTD:"{user}",IqoWU:d(506),aqlBv:function(e,t){return e+t},ekbig:function(e,t,r){return e(t,r)},pzdzb:"{level}"},o=g[d(456)+"s"]["getSub"+d(583)+"d"](),f=g[d(612)].id;if(c.xYMtj(o,c[d(514)])){let e=config.LevelingSystem[d(406)+"sion"],t=g.member[d(537)+d(601)].has(PermissionsBitField.Flags[d(400)+d(436)+"r"])||e.some(e=>g[d(586)][d(540)][d(559)].has(e));if(!t)return void await g.reply({content:lang[d(453)].NoPermission,flags:MessageFlags[d(431)+"ral"]})}if(o===d(517)){let r=g[d(456)+"s"]["getStr"+d(607)](c[d(403)]),n=(new EmbedBuilder).setTitle(c.kJkQA)["setDes"+d(602)+"on"](d(620)+"u sure you w"+d(560)+" reset "+(r===c[d(438)]?"both XP and "+d(449):r)+" for a"+d(471)+"rs in "+d(563)+d(442)+"\n\nThis"+d(455)+d(394)+"ot be "+d(544)+"!")[d(575)+"or"](c.lFYCq),a=(new ButtonBuilder)[d(587)+"tomId"](d(503)+d(571)+"l_reset").setLabel(d(421)+d(489)+"t").setStyle(ButtonStyle.Danger),e=(new ButtonBuilder)[d(587)+"tomId"](c.UvBRq).setLabel(d(600)).setStyle(ButtonStyle["Second"+d(391)]),t=(new ActionRowBuilder)["addCom"+d(603)+"s"](a,e),o=await g.reply({embeds:[n],components:[t],flags:MessageFlags["Epheme"+d(410)]});try{var m=await o["awaitMessageCompon"+d(589)]({filter:e=>e[d(534)].id===g.user.id,time:3e4});if(m.customId===d(466)+"_level_reset"){if(c[d(458)](d(482),"oJmub")){let e=h[d(387)+"ngSystem"][d(580)+"a"].replace(/\{level\}/g,c[d(592)](i,1)[d(567)+"ng"]()),t=r(e[d(597)+"e"](/\^/g,"**"));return n.max(1,a[d(512)](t))}return m.update({content:"Reset cancel"+d(535),embeds:[],components:[]})}if(m[d(621)+"Id"]===c[d(483)]){await m[d(516)]({content:d(622)+"sing r"+d(413)+".",embeds:[],components:[]});var z={};"xp"!==r&&"both"!==r||(z.xp=0),(c.XfSOj(r,c.uoAia)||c.fhUxF(r,c[d(438)]))&&(z[d(615)]=0);try{if(c[d(525)]!==d(613)){let e=await UserData[d(516)+"Many"]({guildId:g[d(612)].id},{$set:z}),t=(new EmbedBuilder).setDescription(d(433)+d(532)+d(405)+" "+(r===d(533)?d(590)+" levels":r)+" for "+e[d(439)+d(440)+"t"]+d(404)+".")[d(575)+"or"](c[d(523)]);return m.editReply({content:"",embeds:[t]})}try{let e=s["Leveli"+d(492)+"em"][d(580)+"a"][d(597)+"e"](/\{level\}/g,c.RirLn(e,1).toString()),t=t(e[d(597)+"e"](/\^/g,"**"));return v[d(611)](1,w.floor(t))}catch(e){return A[d(526)]("Error evalua"+d(423)+d(386)+"ula:",e),(B+1)*C["Leveli"+d(492)+"em"][d(528)+"ed"]}}catch(e){return console.error("Error "+d(393)+"ing le"+d(478),e),m[d(496)+"ply"]({content:d(448)+d(598)+d(572)+d(487)+"resett"+d(500)+"e leve"+d(474),embeds:[]})}}}catch(e){e[d(606)]===c[d(617)]?await g["editRe"+d(395)]({content:c[d(467)],embeds:[],components:[]}):(console[d(526)](c.YubTG,e),await g.editReply({content:"An error occ"+d(572)+d(487)+"processing t"+d(454)+d(542)+"ion.",embeds:[],components:[]}))}}else{var L=g.options.getUser(c.FeIYI)||g.user;switch(o){case c[d(425)]:case c[d(505)]:case"set":var y=g[d(456)+"s"]["getStr"+d(607)](d(552)),D=g[d(456)+"s"].getInteger("amount"),b=await g[d(612)][d(586)+"s"][d(390)](L.id).catch(()=>null);if("xp"===y){let e=await UserData[d(418)+"e"]({userId:L.id,guildId:f})||{xp:0,level:0},t="set"===o?D:"give"===o?e.xp+D:Math[d(611)](0,c.VDcEM(e.xp,D)),r=e[d(615)],n=t,a=!1;for(;;){var M=c.DyRIj(calculateXPNeeded,r);if(!(n>=M))break;"obDQR"===c[d(551)]?50013===l.code?u.error(d(461)+d(529)+"ND] Bo"+d(409)+'s permissions to assign level role "'+v[d(566)]+'" ('+w.id+") to "+y.user.tag+". Please ens"+d(389)+"e bot's role"+d(426)+"sition"+d(543)+d(465)+d(568)+d(444)+d(479)+d(411)+d(486)+"tings."):D.error(d(461)+d(529)+"ND] Error as"+d(462)+d(538)+'l role "'+b[d(566)]+'" to '+s[d(534)].tag+":",e):(n-=M,r++,a=!0)}await UserData["findOneAndUp"+d(472)]({userId:L.id,guildId:f},{$set:{level:r,xp:n},$setOnInsert:{userId:L.id,guildId:f,totalMessages:0,balance:0,warns:0,bans:0,kicks:0,timeouts:0,note:d(392),warnings:[]}},{upsert:!0,new:!0});a&&b&&await c.DmxOb(assignLevelRoles,b,r),a?await g[d(443)]({content:lang.Levels["UpdatedXPAnd"+d(397)][d(597)+"e"](c[d(460)],L.username)[d(597)+"e"](d(506),n)[d(597)+"e"]("{level}",r),flags:MessageFlags[d(431)+"ral"]}):await g.reply({content:lang[d(453)][d(399)+d(432)][d(597)+"e"](d(539),L.username)[d(597)+"e"](c.IqoWU,n),flags:MessageFlags[d(431)+"ral"]})}else{var e=await UserData.findOne({userId:L.id,guildId:f})||{level:0},e=o===d(450)?D:o===d(437)?c[d(468)](e.level,D):Math[d(611)](0,c[d(599)](e[d(615)],D));await UserData.findOneAndUpdate({userId:L.id,guildId:f},{$set:{level:e},$setOnInsert:{userId:L.id,guildId:f,xp:0,totalMessages:0,balance:0,warns:0,bans:0,kicks:0,timeouts:0,note:"None",warnings:[]}},{upsert:!0,new:!0});b&&await c[d(609)](assignLevelRoles,b,e),await g[d(443)]({content:lang.Levels[d(399)+d(452)][d(597)+"e"](c[d(460)],L[d(495)+"me"]).replace(c[d(499)],e),flags:MessageFlags.Ephemeral})}break;case"check":let s=await UserData.findOne({userId:L.id,guildId:f});s?await g.reply({content:lang[d(453)][d(522)+d(385)+d(459)][d(597)+"e"]("{user}",L.username).replace("{level}",s[d(615)])[d(597)+"e"]("{xp}",s.xp),flags:MessageFlags[d(431)+d(410)]}):await g[d(443)]({content:lang[d(453)][d(416)+d(511)][d(597)+"e"](c.hosTD,L[d(495)+"me"]),flags:MessageFlags.Ephemeral})}}}};